(this["webpackJsonpcandy-machine-mint"]=this["webpackJsonpcandy-machine-mint"]||[]).push([[0],{151:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return j})),n.d(t,"c",(function(){return k}));var a,r=n(18),i=n(1),s=n.n(i),o=n(20),c=n(3),u=n(33),l=(n(482),n.t(482,1)),d=n(54),m=n(57),p=n(49),h=new u.e.PublicKey("DGjTcPhTDjk3JTE1YsvqHMxAtFZbMygJcYRee3hzcfwS");!function(e){e.Brewing="Brewing",e.Finished="Finished",e.PastDue="Past Due"}(a||(a={}));var f=function(){var e=Object(c.a)(s.a.mark((function e(t,n,a){var r,i,c,d,m,p,f,g,v,j,k,x,S;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new u.c(a,t,{preflightCommitment:"recent"}),i=l,console.log(i),(new Map).set(i),console.log(i.default),c=new u.b(i.default,h,r),e.next=9,c.account.fairLaunch.fetch(n);case 9:return d=e.sent,e.next=12,b(d.tokenMint,t.publicKey);case 12:return m=e.sent,p=Object(o.a)(m,2),f=p[0],g=p[1],e.prev=16,e.next=19,c.account.fairLaunchTicket.fetch(f);case 19:v=e.sent,e.next=25;break;case 22:e.prev=22,e.t0=e.catch(16),console.log("No ticket");case 25:return e.next=27,c.provider.connection.getBalance(d.treasury);case 27:return j=e.sent,k=new Uint8Array([]),e.next=31,y(d.tokenMint);case 31:return x=e.sent[0],e.prev=32,e.next=35,c.provider.connection.getAccountInfo(x);case 35:S=e.sent,k=new Uint8Array((null===S||void 0===S?void 0:S.data)||[]),e.next=43;break;case 39:e.prev=39,e.t1=e.catch(32),console.log("Could not find fair launch lottery."),console.log(e.t1);case 43:return e.abrupt("return",{id:n,state:d,program:c,ticket:{pubkey:f,bump:g,data:v},lottery:{pubkey:x,data:k},treasury:j});case 44:case"end":return e.stop()}}),e,null,[[16,22],[32,39]])})));return function(t,n,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(s.a.mark((function e(t,n){var a,i,o,c,l,m,h,f,g,j;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(n.state.tokenMint,t.publicKey);case 2:return a=e.sent[0],i=n.ticket.data,e.next=6,y(n.state.tokenMint);case 6:return o=e.sent[0],e.next=9,Object(p.d)(n.state.tokenMint,t.publicKey);case 9:if(c=e.sent[0],!(null===i||void 0===i?void 0:i.amount.gt(n.state.currentMedian))){e.next=20;break}return console.log("Adjusting down...",null===i||void 0===i?void 0:i.amount.toNumber(),n.state.currentMedian.toNumber()),e.next=14,v(n.program,n.state.currentMedian.toNumber(),t,n,a);case 14:return l=e.sent,m=l.remainingAccounts,h=l.instructions,f=l.signers,e.next=20,n.program.rpc.adjustTicket(n.state.currentMedian,{accounts:{fairLaunchTicket:a,fairLaunch:n.id,fairLaunchLotteryBitmap:o,treasury:n.state.treasury,systemProgram:u.e.SystemProgram.programId,clock:u.e.SYSVAR_CLOCK_PUBKEY},__private:{logAccounts:!0},instructions:h.length>0?h:void 0,remainingAccounts:[{pubkey:t.publicKey,isSigner:!0,isWritable:!0}].concat(Object(r.a)(m)),signers:f});case 20:return e.next=22,n.program.provider.connection.getAccountInfo(c);case 22:return g=e.sent,j=g?[]:[Object(p.b)(c,t.publicKey,t.publicKey,n.state.tokenMint)],e.next=26,n.program.rpc.punchTicket({accounts:{fairLaunchTicket:a,fairLaunch:n.id,fairLaunchLotteryBitmap:o,payer:t.publicKey,buyerTokenAccount:c,tokenMint:n.state.tokenMint,tokenProgram:d.b},instructions:j.length>0?j:void 0});case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var t=Object(c.a)(s.a.mark((function t(n,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),a.toBuffer()],h);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),y=function(){var t=Object(c.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),e.from("lottery")],h);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(s.a.mark((function e(t,n,a,r,i){var c,l,h,f,g,b,y,v,j,k,x;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",{remainingAccounts:[],instructions:[],signers:[],amountLamports:0});case 2:if(c=r.ticket,l=[],h=[],f=[],g=0,r.state.treasuryMint){e.next=11;break}g=c||0!==n?Math.ceil(n*m.LAMPORTS_PER_SOL):r.state.data.priceRangeStart.toNumber(),e.next=23;break;case 11:return b=u.e.Keypair.generate(),f.push(b),h.push(d.c.createApproveInstruction(d.b,r.state.treasuryMint,b.publicKey,a.publicKey,[],amountNumber+r.state.data.fees.toNumber())),l.push({pubkey:r.state.treasuryMint,isWritable:!0,isSigner:!1}),e.t0=l,e.next=18,Object(p.d)(r.state.treasuryMint,a.publicKey);case 18:e.t1=e.sent[0],e.t2={pubkey:e.t1,isWritable:!0,isSigner:!1},e.t0.push.call(e.t0,e.t2),l.push({pubkey:b.publicKey,isWritable:!1,isSigner:!0}),l.push({pubkey:d.b,isWritable:!1,isSigner:!1});case 23:if(!c.data){e.next=39;break}return e.next=26,Object(p.e)(r.state.tokenMint,null===(y=c.data)||void 0===y?void 0:y.seq);case 26:return v=e.sent,j=Object(o.a)(v,2),k=j[0],x=j[1],e.next=32,t.provider.connection.getAccountInfo(k);case 32:if(e.sent){e.next=39;break}return e.t3=h,e.next=37,t.instruction.createTicketSeq(x,{accounts:{fairLaunchTicketSeqLookup:k,fairLaunch:r.id,fairLaunchTicket:i,payer:a.publicKey,systemProgram:u.e.SystemProgram.programId,rent:u.e.SYSVAR_RENT_PUBKEY},signers:[]});case 37:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 39:return e.abrupt("return",{remainingAccounts:l,instructions:h,signers:f,amountLamports:g});case 40:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(s.a.mark((function e(t,n){var a,r,i,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(p.d)(n.state.tokenMint,t.publicKey);case 4:if(a=e.sent[0],r=u.e.Keypair.generate(),i=[r],o=[d.c.createApproveInstruction(d.b,a,r.publicKey,t.publicKey,[],1)],c=[],!n.state.treasuryMint){e.next=17;break}return c.push({pubkey:n.state.treasuryMint,isWritable:!0,isSigner:!1}),e.t0=c,e.next=14,Object(p.d)(n.state.treasuryMint,t.publicKey);case 14:e.t1=e.sent[0],e.t2={pubkey:e.t1,isWritable:!0,isSigner:!1},e.t0.push.call(e.t0,e.t2);case 17:return console.log("tfr",n.state.treasury.toBase58(),t.publicKey.toBase58(),a.toBase58()),e.next=20,n.program.rpc.receiveRefund({accounts:{fairLaunch:n.id,treasury:n.state.treasury,buyer:t.publicKey,buyerTokenAccount:a,transferAuthority:r.publicKey,tokenMint:n.state.tokenMint,tokenProgram:d.b,systemProgram:u.e.SystemProgram.programId,clock:u.e.SYSVAR_CLOCK_PUBKEY},__private:{logAccounts:!0},remainingAccounts:c,instructions:o,signers:i});case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(c.a)(s.a.mark((function e(t,n,a){var i,c,l,d,m,p,h,f,g,j,k;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return i=a.ticket.data,e.next=5,b(a.state.tokenMint,n.publicKey);case 5:return c=e.sent,l=Object(o.a)(c,2),d=l[0],m=l[1],e.next=11,v(a.program,t,n,a,d);case 11:if(p=e.sent,h=p.remainingAccounts,f=p.instructions,g=p.signers,j=p.amountLamports,!i){e.next=24;break}return e.next=19,y(a.state.tokenMint);case 19:return k=e.sent[0],console.log("Anchor wallet",n.publicKey.toBase58(),j),e.next=23,a.program.rpc.adjustTicket(new u.a(j),{accounts:{fairLaunchTicket:d,fairLaunch:a.id,fairLaunchLotteryBitmap:k,treasury:a.state.treasury,systemProgram:u.e.SystemProgram.programId,clock:u.e.SYSVAR_CLOCK_PUBKEY},__private:{logAccounts:!0},remainingAccounts:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}].concat(Object(r.a)(h)),signers:g,instructions:f.length>0?f:void 0});case 23:return e.abrupt("return");case 24:return e.prev=24,console.log("Amount",j),e.next=28,a.program.rpc.purchaseTicket(m,new u.a(j),{accounts:{fairLaunchTicket:d,fairLaunch:a.id,treasury:a.state.treasury,buyer:n.publicKey,payer:n.publicKey,systemProgram:u.e.SystemProgram.programId,rent:u.e.SYSVAR_RENT_PUBKEY,clock:u.e.SYSVAR_CLOCK_PUBKEY},remainingAccounts:h,signers:g,instructions:f.length>0?f:void 0});case 28:e.next=34;break;case 30:throw e.prev=30,e.t0=e.catch(24),console.log(e.t0),e.t0;case 34:case"end":return e.stop()}}),e,null,[[24,30]])})));return function(t,n,a){return e.apply(this,arguments)}}()}).call(this,n(6).Buffer)},231:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return y}));var a=n(1),r=n.n(a),i=n(3),s=n(33),o=n(54),c=n(57),u=n(481),l=n(49),d=new s.e.PublicKey("cndyAnrLdpjq1Ssp1z8xxDsB8dxe7u4HL5Nxi2K5WXZ"),m=new s.e.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),p=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a){var s,o,c,u,l=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>3&&void 0!==l[3]?l[3]:"recent",s=l.length>4&&void 0!==l[4]&&l[4],o=!1,c={slot:0,confirmations:0,err:null},u=0,e.next=7,new Promise(function(){var e=Object(i.a)(r.a.mark((function e(u,l){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){o||(o=!0,console.log("Rejecting for timeout..."),l({timeout:!0}))}),n);case 1:if(o||!s){e.next=7;break}return Object(i.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.getSignatureStatuses([t]);case 3:n=e.sent,c=n&&n.value[0],o||(c?c.err?(console.log("REST error for",t,c),o=!0,l(c.err)):c.confirmations?(console.log("REST confirmation for",t,c),o=!0,u(c)):console.log("REST no confirmations for",t,c):console.log("REST null result for",t,c)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=5,v(2e3);case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return c=e.sent,a._signatureSubscriptions[u]&&a.removeSignatureListener(u),o=!0,console.log("Returning status",c),e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),h=function(t,n,a,r){var i=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:s.e.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:o.b,isSigner:!1,isWritable:!1},{pubkey:s.e.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new s.e.TransactionInstruction({keys:i,programId:l.a,data:e.from([])})},f=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a){var i,o,c,u,l,m,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new s.c(a,t,{preflightCommitment:"recent"}),e.next=3,s.b.fetchIdl(d,i);case 3:return o=e.sent,c=new s.b(o,d,i),e.next=7,c.account.candyMachine.fetch(n);case 7:return u=e.sent,l=u.data.itemsAvailable.toNumber(),m=u.itemsRedeemed.toNumber(),p=l-m,e.abrupt("return",{id:n,program:c,state:{itemsAvailable:l,itemsRedeemed:m,itemsRemaining:p,isSoldOut:0===p,isActive:u.data.goLiveDate.toNumber()<(new Date).getTime()/1e3,goLiveDate:u.data.goLiveDate,treasury:u.wallet,tokenMint:u.tokenMint,config:u.config,price:u.data.price}});case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),g=function(){var t=Object(i.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.e.PublicKey.findProgramAddress([e.from("metadata"),m.toBuffer(),n.toBuffer(),e.from("edition")],m);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(i.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.e.PublicKey.findProgramAddress([e.from("metadata"),m.toBuffer(),n.toBuffer()],m);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i,d,p,f,y,v,j,k,x;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.e.Keypair.generate(),e.next=3,Object(l.d)(a.publicKey,n);case 3:return i=e.sent[0],e.next=6,Object(l.d)(t.state.tokenMint,n);case 6:return d=e.sent[0],p=t.id,f=[],y=[a],e.t0=s.e.SystemProgram,e.t1=n,e.t2=a.publicKey,e.t3=o.a.span,e.next=16,t.program.provider.connection.getMinimumBalanceForRentExemption(o.a.span);case 16:return e.t4=e.sent,e.t5=o.b,e.t6={fromPubkey:e.t1,newAccountPubkey:e.t2,space:e.t3,lamports:e.t4,programId:e.t5},e.t7=e.t0.createAccount.call(e.t0,e.t6),e.t8=o.c.createInitMintInstruction(o.b,a.publicKey,0,n,n),e.t9=h(i,n,n,a.publicKey),e.t10=o.c.createMintToInstruction(o.b,a.publicKey,i,n,[],1),v=[e.t7,e.t8,e.t9,e.t10],t.state.tokenMint&&(j=s.e.Keypair.generate(),y.push(j),f.push({pubkey:d,isWritable:!0,isSigner:!1}),f.push({pubkey:j.publicKey,isWritable:!1,isSigner:!0}),v.push(o.c.createApproveInstruction(o.b,d,j.publicKey,n,[],t.state.price.toNumber()))),e.next=27,b(a.publicKey);case 27:return k=e.sent,e.next=30,g(a.publicKey);case 30:return x=e.sent,e.t11=v,e.next=34,t.program.instruction.mintNft({accounts:{config:t.state.config,candyMachine:p,payer:n,wallet:t.state.treasury,mint:a.publicKey,metadata:k,masterEdition:x,mintAuthority:n,updateAuthority:n,tokenMetadataProgram:m,tokenProgram:o.b,systemProgram:c.SystemProgram.programId,rent:s.e.SYSVAR_RENT_PUBKEY,clock:s.e.SYSVAR_CLOCK_PUBKEY},remainingAccounts:f.length>0?f:void 0});case 34:return e.t12=e.sent,e.t11.push.call(e.t11,e.t12),e.prev=37,e.next=40,Object(u.a)(t.program.provider.connection,t.program.provider.wallet,v,y);case 40:return e.abrupt("return",e.sent.txid);case 43:e.prev=43,e.t13=e.catch(37),console.log(e.t13);case 46:return e.abrupt("return","j");case 47:case"end":return e.stop()}}),e,null,[[37,43]])})));return function(t,n){return e.apply(this,arguments)}}(),v=function(e){return new Promise((function(t){return setTimeout(t,e)}))}}).call(this,n(6).Buffer)},481:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a,r=n(18),i=n(1),s=n.n(i),o=n(3),c=n(57),u=n(65);!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(a||(a={}));var l=function(){var e=Object(o.a)(s.a.mark((function e(t,n,a,i){var o,l,d,m,h,f,g,b,y,v,j,k=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=k.length>4&&void 0!==k[4]?k[4]:"singleGossip",l=k.length>5&&void 0!==k[5]&&k[5],d=k.length>6?k[6]:void 0,m=k.length>7?k[7]:void 0,n.publicKey){e.next=6;break}throw new u.WalletNotConnectedError;case 6:if(h=new c.Transaction,a.forEach((function(e){return h.add(e)})),e.t0=d,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(o);case 12:e.t0=e.sent;case 13:if(h.recentBlockhash=e.t0.blockhash,l?(f=h).setSigners.apply(f,Object(r.a)(i.map((function(e){return e.publicKey})))):(g=h).setSigners.apply(g,[n.publicKey].concat(Object(r.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(b=h).partialSign.apply(b,Object(r.a)(i)),l){e.next=20;break}return e.next=19,n.signTransaction(h);case 19:h=e.sent;case 20:return m&&m(),e.next=23,p({connection:t,signedTransaction:h});case 23:return y=e.sent,v=y.txid,j=y.slot,e.abrupt("return",{txid:v,slot:j});case 27:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),d=function(){return(new Date).getTime()/1e3},m=15e3;function p(e){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(s.a.mark((function e(t){var n,a,r,i,c,u,l,p,h,g,y,j,k;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,a=t.connection,r=t.timeout,i=void 0===r?m:r,c=n.serialize(),u=d(),l=0,e.next=6,a.sendRawTransaction(c,{skipPreflight:!0});case 6:return p=e.sent,console.log("Started awaiting confirmation for",p),h=!1,Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h||!(d()-u<i)){e.next=6;break}return a.sendRawTransaction(c,{skipPreflight:!0}),e.next=4,v(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,b(p,i,a,"recent",!0);case 13:if(g=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!g.err){e.next=19;break}throw console.error(g.err),new Error("Transaction failed: Custom instruction error");case 19:l=(null===g||void 0===g?void 0:g.slot)||0,e.next=47;break;case 22:if(e.prev=22,e.t0=e.catch(10),console.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return y=null,e.prev=28,e.next=31,f(a,n,"single");case 31:y=e.sent.value,e.next=36;break;case 34:e.prev=34,e.t1=e.catch(28);case 36:if(!y||!y.err){e.next=47;break}if(!y.logs){e.next=46;break}j=y.logs.length-1;case 39:if(!(j>=0)){e.next=46;break}if(!(k=y.logs[j]).startsWith("Program log: ")){e.next=43;break}throw new Error("Transaction failed: "+k.slice("Program log: ".length));case 43:--j,e.next=39;break;case 46:throw new Error(JSON.stringify(y.err));case 47:return e.prev=47,h=!0,e.finish(47);case 50:return console.log("Latency",p,d()-u),e.abrupt("return",{txid:p,slot:l});case 52:case"end":return e.stop()}}),e,null,[[10,22,47,50],[28,34]])})))).apply(this,arguments)}function f(e,t,n){return g.apply(this,arguments)}function g(){return(g=Object(o.a)(s.a.mark((function e(t,n,a){var r,i,o,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,r=n.serializeMessage(),i=n._serialize(r),o=i.toString("base64"),c=[o,{encoding:"base64",commitment:a}],e.next=10,t._rpcRequest("simulateTransaction",c);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t,n){return y.apply(this,arguments)}function y(){return y=Object(o.a)(s.a.mark((function e(t,n,a){var r,i,c,u,l,d=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>3&&void 0!==d[3]?d[3]:"recent",i=d.length>4&&void 0!==d[4]&&d[4],c=!1,u={slot:0,confirmations:0,err:null},l=0,e.next=7,new Promise(function(){var e=Object(o.a)(s.a.mark((function e(d,m){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){c||(c=!0,console.log("Rejecting for timeout..."),m({timeout:!0}))}),n);try{l=a.onSignature(t,(function(e,t){c=!0,u={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),m(u)):(console.log("Resolved via websocket",e),d(u))}),r)}catch(p){c=!0,console.error("WS error in setup",t,p)}case 2:if(c||!i){e.next=8;break}return Object(o.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.getSignatureStatuses([t]);case 3:n=e.sent,u=n&&n.value[0],c||(u?u.err?(console.log("REST error for",t,u),c=!0,m(u.err)):u.confirmations?(console.log("REST confirmation for",t,u),c=!0,d(u)):console.log("REST no confirmations for",t,u):console.log("REST null result for",t,u)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=6,v(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return u=e.sent,a._signatureSubscriptions[l]&&a.removeSignatureListener(l),c=!0,console.log("Returning status",u),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function v(e){return new Promise((function(t){return setTimeout(t,e)}))}},482:function(e){e.exports=JSON.parse('{"version":"0.0.0","name":"fair_launch","instructions":[{"name":"initializeFairLaunch","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"tokenMint","isMut":true,"isSigner":false},{"name":"treasury","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"treasuryBump","type":"u8"},{"name":"tokenMintBump","type":"u8"},{"name":"data","type":{"defined":"FairLaunchData"}}]},{"name":"updateFairLaunch","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"data","type":{"defined":"FairLaunchData"}}]},{"name":"startPhaseThree","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"fairLaunchLotteryBitmap","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"tokenMint","isMut":true,"isSigner":false}],"args":[]},{"name":"updateFairLaunchLotteryBitmap","accounts":[{"name":"fairLaunch","isMut":false,"isSigner":false},{"name":"fairLaunchLotteryBitmap","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"index","type":"u32"},{"name":"bytes","type":"bytes"}]},{"name":"createFairLaunchLotteryBitmap","accounts":[{"name":"fairLaunch","isMut":false,"isSigner":false},{"name":"fairLaunchLotteryBitmap","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"payer","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"}]},{"name":"purchaseTicket","accounts":[{"name":"fairLaunchTicket","isMut":true,"isSigner":false},{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"treasury","isMut":true,"isSigner":false},{"name":"buyer","isMut":true,"isSigner":true},{"name":"payer","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"amount","type":"u64"}]},{"name":"createTicketSeq","accounts":[{"name":"fairLaunchTicketSeqLookup","isMut":true,"isSigner":false},{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"fairLaunchTicket","isMut":true,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"}]},{"name":"adjustTicket","accounts":[{"name":"fairLaunchTicket","isMut":true,"isSigner":false},{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"fairLaunchLotteryBitmap","isMut":false,"isSigner":false},{"name":"treasury","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"punchTicket","accounts":[{"name":"fairLaunchTicket","isMut":true,"isSigner":false},{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"fairLaunchLotteryBitmap","isMut":false,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"buyerTokenAccount","isMut":true,"isSigner":false},{"name":"tokenMint","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"withdrawFunds","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"treasury","isMut":true,"isSigner":false},{"name":"authority","isMut":true,"isSigner":true},{"name":"tokenMint","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"receiveRefund","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"treasury","isMut":true,"isSigner":false},{"name":"buyer","isMut":true,"isSigner":false},{"name":"buyerTokenAccount","isMut":true,"isSigner":false},{"name":"transferAuthority","isMut":false,"isSigner":true},{"name":"tokenMint","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[]},{"name":"restartPhaseTwo","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[]},{"name":"setTokenMetadata","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"authority","isMut":true,"isSigner":true},{"name":"payer","isMut":true,"isSigner":true},{"name":"metadata","isMut":true,"isSigner":false},{"name":"tokenMint","isMut":true,"isSigner":false},{"name":"tokenMetadataProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"data","type":{"defined":"TokenMetadata"}}]},{"name":"setParticipationNft","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"payer","isMut":true,"isSigner":true},{"name":"participationMint","isMut":true,"isSigner":false},{"name":"participationTokenAccount","isMut":true,"isSigner":false},{"name":"metadata","isMut":true,"isSigner":false},{"name":"masterEdition","isMut":true,"isSigner":false},{"name":"tokenMetadataProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"participationMintBump","type":"u8"},{"name":"participationTokenBump","type":"u8"},{"name":"participationModulo","type":"u8"},{"name":"data","type":{"defined":"TokenMetadata"}}]},{"name":"updateParticipationNft","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"metadata","isMut":true,"isSigner":false},{"name":"tokenMetadataProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"participationModulo","type":"u8"},{"name":"data","type":{"defined":"TokenMetadata"}}]},{"name":"mintParticipationNft","accounts":[{"name":"fairLaunch","isMut":false,"isSigner":false},{"name":"fairLaunchTicket","isMut":true,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"participationMint","isMut":true,"isSigner":false},{"name":"participationTokenAccount","isMut":true,"isSigner":false},{"name":"buyer","isMut":false,"isSigner":false},{"name":"buyerNftTokenAccount","isMut":false,"isSigner":false},{"name":"newMetadata","isMut":true,"isSigner":false},{"name":"newEdition","isMut":true,"isSigner":false},{"name":"newMint","isMut":true,"isSigner":false},{"name":"newMintAuthority","isMut":false,"isSigner":true},{"name":"metadata","isMut":true,"isSigner":false},{"name":"masterEdition","isMut":true,"isSigner":false},{"name":"editionMarkPda","isMut":true,"isSigner":false},{"name":"tokenMetadataProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false}],"args":[]},{"name":"mintTokens","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"tokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"tokenMint","isMut":true,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]}],"accounts":[{"name":"FairLaunch","type":{"kind":"struct","fields":[{"name":"tokenMint","type":"publicKey"},{"name":"treasury","type":"publicKey"},{"name":"treasuryMint","type":{"option":"publicKey"}},{"name":"authority","type":"publicKey"},{"name":"bump","type":"u8"},{"name":"treasuryBump","type":"u8"},{"name":"tokenMintBump","type":"u8"},{"name":"data","type":{"defined":"FairLaunchData"}},{"name":"numberTicketsUnSeqed","type":"u64"},{"name":"numberTicketsSold","type":"u64"},{"name":"numberTicketsDropped","type":"u64"},{"name":"numberTicketsPunched","type":"u64"},{"name":"numberTokensBurnedForRefunds","type":"u64"},{"name":"numberTokensPreminted","type":"u64"},{"name":"phaseThreeStarted","type":"bool"},{"name":"treasurySnapshot","type":{"option":"u64"}},{"name":"currentEligibleHolders","type":"u64"},{"name":"currentMedian","type":"u64"},{"name":"countsAtEachTick","type":{"vec":"u64"}},{"name":"participationModulo","type":"u8"},{"name":"participationMintBump","type":"u8"},{"name":"participationTokenBump","type":"u8"},{"name":"participationMint","type":{"option":"publicKey"}}]}},{"name":"FairLaunchLotteryBitmap","type":{"kind":"struct","fields":[{"name":"fairLaunch","type":"publicKey"},{"name":"bump","type":"u8"},{"name":"bitmapOnes","type":"u64"}]}},{"name":"FairLaunchTicket","type":{"kind":"struct","fields":[{"name":"fairLaunch","type":"publicKey"},{"name":"buyer","type":"publicKey"},{"name":"amount","type":"u64"},{"name":"state","type":{"defined":"FairLaunchTicketState"}},{"name":"bump","type":"u8"},{"name":"seq","type":"u64"},{"name":"gottenParticipation","type":"bool"}]}},{"name":"FairLaunchTicketSeqLookup","type":{"kind":"struct","fields":[{"name":"fairLaunchTicket","type":"publicKey"},{"name":"buyer","type":"publicKey"},{"name":"seq","type":"u64"},{"name":"bump","type":"u8"}]}}],"types":[{"name":"Creator","type":{"kind":"struct","fields":[{"name":"address","type":"publicKey"},{"name":"verified","type":"bool"},{"name":"share","type":"u8"}]}},{"name":"TokenMetadata","type":{"kind":"struct","fields":[{"name":"name","type":"string"},{"name":"symbol","type":"string"},{"name":"uri","type":"string"},{"name":"sellerFeeBasisPoints","type":"u16"},{"name":"creators","type":{"option":{"vec":{"defined":"Creator"}}}},{"name":"isMutable","type":"bool"}]}},{"name":"AntiRugSetting","type":{"kind":"struct","fields":[{"name":"reserveBp","type":"u16"},{"name":"tokenRequirement","type":"u64"},{"name":"selfDestructDate","type":"i64"}]}},{"name":"FairLaunchData","type":{"kind":"struct","fields":[{"name":"uuid","type":"string"},{"name":"priceRangeStart","type":"u64"},{"name":"priceRangeEnd","type":"u64"},{"name":"phaseOneStart","type":"i64"},{"name":"phaseOneEnd","type":"i64"},{"name":"phaseTwoEnd","type":"i64"},{"name":"lotteryDuration","type":"i64"},{"name":"tickSize","type":"u64"},{"name":"numberOfTokens","type":"u64"},{"name":"fee","type":"u64"},{"name":"antiRugSetting","type":{"option":{"defined":"AntiRugSetting"}}}]}},{"name":"FairLaunchTicketState","type":{"kind":"enum","variants":[{"name":"NoSequenceStruct"},{"name":"Unpunched"},{"name":"Punched"},{"name":"Withdrawn"}]}}],"errors":[{"code":300,"name":"IncorrectOwner","msg":"Account does not have correct owner!"},{"code":301,"name":"Uninitialized","msg":"Account is not initialized!"},{"code":302,"name":"MintMismatch","msg":"Mint Mismatch!"},{"code":303,"name":"TokenTransferFailed","msg":"Token transfer failed"},{"code":304,"name":"NumericalOverflowError","msg":"Numerical overflow error"},{"code":305,"name":"TimestampsDontLineUp","msg":"Timestamps of phases should line up"},{"code":306,"name":"CantSetPhaseThreeDatesYet","msg":"Cant set phase 3 dates yet"},{"code":307,"name":"UuidMustBeExactly6Length","msg":"Uuid must be exactly of 6 length"},{"code":308,"name":"TickSizeTooSmall","msg":"Tick size too small"},{"code":309,"name":"CannotGiveZeroTokens","msg":"Cannot give zero tokens"},{"code":310,"name":"InvalidPriceRanges","msg":"Invalid price ranges"},{"code":311,"name":"TooMuchGranularityInRange","msg":"With this tick size and price range, you will have too many ticks(>"},{"code":312,"name":"CannotUseTickSizeThatGivesRemainder","msg":"Cannot use a tick size with a price range that results in a remainder when doing (end-start)/ticksize"},{"code":313,"name":"DerivedKeyInvalid","msg":"Derived key invalid"},{"code":314,"name":"TreasuryAlreadyExists","msg":"Treasury Already Exists"},{"code":315,"name":"LotteryBitmapOnesMustEqualNumberOfTicketsSold","msg":"The number of ones in the lottery must equal the number of tickets sold in phase 1"},{"code":316,"name":"InvalidPurchaseAmount","msg":"Amount must be between price ranges and at a tick mark"},{"code":317,"name":"TreasuryMintMismatch","msg":"Treasury mint does not match"},{"code":318,"name":"NotEnoughTokens","msg":"Not enough tokens to pay for this minting"},{"code":319,"name":"NotEnoughSOL","msg":"Not enough SOL to pay for this minting"},{"code":320,"name":"InvalidTokenProgram","msg":"Sent up invalid token program"},{"code":321,"name":"CannotBuyTicketsOutsidePhaseOne","msg":"Cannot buy tickets outside phase one"},{"code":322,"name":"CannotCreateFairLaunchLotteryBitmapBeforePhaseTwoEnd","msg":"Cannot create the bitmap before phase two end"},{"code":323,"name":"CannotUpdateFairLaunchLotteryOncePhaseThreeLocked","msg":"Cannot update fair launch lottery once phase three locked"},{"code":324,"name":"SeqAlreadyExists","msg":"Seq already exists"},{"code":325,"name":"CannotSetFairLaunchLotteryUntilAllTicketsAreSequenced","msg":"Cannot set lottery until all tickets have sequence lookups using permissionless crank endpoint. Use CLI to make."},{"code":326,"name":"CanOnlySubmitZeroDuringPhaseThree","msg":"During phase three, since you did not pay up to the median, you can only withdraw your funds"},{"code":327,"name":"CanOnlySubmitDifferenceDuringPhaseThree","msg":"During phase three, since you paid above median, you can only withdraw the difference"},{"code":328,"name":"DidNotWinLotteryCanOnlyWithdraw","msg":"You did not win the lottery, therefore you can only withdraw your funds"},{"code":329,"name":"AccountShouldHaveNoDelegates","msg":"This account should have no delegates"},{"code":330,"name":"TokenMintToFailed","msg":"Token minting failed"},{"code":331,"name":"DuringPhaseTwoAndOneBuyerMustBeSigner","msg":"During phase two and one buyer must be signer"},{"code":332,"name":"InvalidFairLaunchTicketState","msg":"Invalid fair launch ticket state for this operation"},{"code":333,"name":"CannotCashOutUntilAllRefundsAndPunchesHaveBeenProcessed","msg":"Cannot cash out until all refunds and punches (permissionless calls) have been processed. Use the CLI."},{"code":334,"name":"CannotCashOutUntilPhaseThree","msg":"Cannot cash out until phase three"},{"code":335,"name":"CannotUpdateFairLaunchDataOnceInProgress","msg":"Cannot update fair launch variables once it is in progress"},{"code":336,"name":"PhaseTwoEnded","msg":"Not able to adjust tickets between phase two and three"},{"code":337,"name":"CannotPunchTicketWhenHavingPaidLessThanMedian","msg":"Cannot punch ticket when having paid less than median."},{"code":338,"name":"AlreadyWithdrawnCapitalAlotment","msg":"You have already withdrawn your seed capital alotment from the treasury."},{"code":339,"name":"NoAntiRugSetting","msg":"No anti rug settings on this fair launch. Should\'ve checked twice."},{"code":340,"name":"SelfDestructNotPassed","msg":"Self destruct date has not passed yet, so you are not eligible for a refund."},{"code":341,"name":"TokenBurnFailed","msg":"Token burn failed"},{"code":342,"name":"NoTreasurySnapshot","msg":"No treasury snapshot present"},{"code":343,"name":"CannotRefundUntilAllTicketsHaveBeenPunchedOrDropped","msg":"Cannot refund until all existing tickets have been dropped or punched"},{"code":344,"name":"CannotRefundUntilPhaseThree","msg":"Cannot refund until phase three"},{"code":345,"name":"InvalidReserveBp","msg":"Invalid reserve bp"},{"code":346,"name":"InvalidAntiRugTokenRequirement","msg":"Anti Rug Token Requirement must be less than or equal to number of tokens being sold"},{"code":347,"name":"CannotPunchTicketUntilPhaseThree","msg":"Cannot punch ticket until phase three"},{"code":348,"name":"CannotPunchTicketUntilEqualized","msg":"Cannot punch ticket until you have refunded the difference between your given price and the median."},{"code":349,"name":"InvalidLotteryDuration","msg":"Invalid lottery duration"},{"code":350,"name":"PhaseThreeAlreadyStarted","msg":"Phase two already started"},{"code":351,"name":"PhaseTwoHasntEndedYet","msg":"Phase two hasnt ended yet"},{"code":352,"name":"LotteryDurationHasntEndedYet","msg":"Lottery duration hasnt ended yet"},{"code":353,"name":"FairLaunchMismatch","msg":"Fair launch ticket and fair launch key mismatch"},{"code":354,"name":"ParticipationTokenAccountAlreadyExists","msg":"Participation Token Account already exists"},{"code":355,"name":"InvalidParticipationModulo","msg":"Invalid participation modulo"},{"code":356,"name":"AlreadyMintedParticipation","msg":"Already got participation"},{"code":357,"name":"NotEligibleForParticipation","msg":"Not eligible for participation"},{"code":358,"name":"ParticipationMintMismatch","msg":"The mint on this account does not match the participation nft mint"},{"code":359,"name":"AccountOwnerShouldBeBuyer","msg":"Account owner should be buyer"},{"code":360,"name":"AccountOwnerShouldBeAuthority","msg":"Account owner should be fair launch authority"},{"code":361,"name":"TokenMintMismatch","msg":"Token mint mismatch"},{"code":362,"name":"CannotMintMoreTokensThanTotal","msg":"Cannot mint more tokens than are allowed by the fair launch"},{"code":363,"name":"CanOnlyPremintOnce","msg":"Due to concerns that you might mint, burn, then mint again and mess up the counter, you can only mint once before the FLP"},{"code":364,"name":"CannotMintTokensUntilAllCashedOut","msg":"Once phase three has begun, no more FLP tokens can be minted until all ticket holders have been given tokens"}],"metadata":{"address":"DGjTcPhTDjk3JTE1YsvqHMxAtFZbMygJcYRee3hzcfwS"}}')},49:function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return g}));var a=n(1),r=n.n(a),i=n(3),s=n(33),o=n(54),c=n(57),u=new s.e.PublicKey("DGjTcPhTDjk3JTE1YsvqHMxAtFZbMygJcYRee3hzcfwS"),l=function(e){if(e)return new Date(1e3*e.toNumber())},d=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),m={format:function(e){return e?d.format(e):"--"},asNumber:function(e){if(e)return e.toNumber()/c.LAMPORTS_PER_SOL}},p=new s.e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),h=function(){var t=Object(i.a)(r.a.mark((function t(n,a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),a.toArrayLike(e,"le",8)],u);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.e.PublicKey.findProgramAddress([n.toBuffer(),o.b.toBuffer(),t.toBuffer()],p);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function g(t,n,a,r){var i=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:o.b,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new c.TransactionInstruction({keys:i,programId:p,data:e.from([])})}}).call(this,n(6).Buffer)},508:function(e,t,n){},509:function(e,t,n){},514:function(e,t){},516:function(e,t){},532:function(e,t){},533:function(e,t){},654:function(e,t){},656:function(e,t){},670:function(e,t){},674:function(e,t){},676:function(e,t){},687:function(e,t){},689:function(e,t){},716:function(e,t){},718:function(e,t){},723:function(e,t){},725:function(e,t){},732:function(e,t){},744:function(e,t){},747:function(e,t){},759:function(e,t){},760:function(e,t,n){"use strict";n.r(t);var a,r,i,s,o=n(5),c=n.n(o),u=n(41),l=n.n(u),d=(n(508),n(509),n(10)),m=n(1),p=n.n(m),h=n(3),f=n(20),g=n(230),b=n(175),y=n(793),v=n(782),j=n(789),k=n(781),x=n(779),S=n(790),O=n(780),w=n(492),M=n(495),T=n(788),P=n(477),L=n(172),A=n(383),C=n(19),R=Object(A.a)((function(e){return Object(P.a)({root:{display:"flex",padding:e.spacing(0),"& > *":{margin:e.spacing(.5),marginRight:0,width:e.spacing(6),height:e.spacing(6),display:"flex",flexDirection:"column",alignContent:"center",alignItems:"center",justifyContent:"center",background:"#384457",color:"white",borderRadius:5,fontSize:10}},done:{display:"flex",margin:e.spacing(1),marginRight:0,padding:e.spacing(1),flexDirection:"column",alignContent:"center",alignItems:"center",justifyContent:"center",background:"#384457",color:"white",borderRadius:5,fontWeight:"bold",fontSize:18},item:{fontWeight:"bold",fontSize:18}})})),E=function(e){var t=e.date,n=e.status,a=e.style,r=e.start,i=e.end,s=e.onComplete,c=R(),u=Object(o.useState)(!!(r&&i&&t)&&r.getTime()-Date.now()<0),l=Object(f.a)(u,2),d=l[0],m=(l[1],function(e){var t=e.days,r=e.hours,i=e.minutes,s=e.seconds;return r+=24*t,e.completed?n?Object(C.jsx)("span",{className:c.done,children:n}):null:Object(C.jsxs)("div",{className:c.root,style:a,children:[d&&Object(C.jsx)(w.a,{elevation:0,children:Object(C.jsx)("span",{className:c.item,children:"+"})}),Object(C.jsxs)(w.a,{elevation:0,children:[Object(C.jsx)("span",{className:c.item,children:r<10?"0".concat(r):r}),Object(C.jsx)("span",{children:"hrs"})]}),Object(C.jsxs)(w.a,{elevation:0,children:[Object(C.jsx)("span",{className:c.item,children:i<10?"0".concat(i):i}),Object(C.jsx)("span",{children:"mins"})]}),Object(C.jsxs)(w.a,{elevation:0,children:[Object(C.jsx)("span",{className:c.item,children:s<10?"0".concat(s):s}),Object(C.jsx)("span",{children:"secs"})]})]})});return t&&r&&i&&d&&L.a,t?Object(C.jsx)(L.a,{date:t,onComplete:s,renderer:m}):null},B=n(783),N=n(787),D=n(786),K=n(300),_=n.n(K),F=n(791),I=n(57),W=n(102),U=n(218),Y=n(231),q=n(151),z=n(49),H=Object(b.a)(U.WalletDialogButton)(a||(a=Object(g.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),G=b.a.div(r||(r=Object(g.a)([""]))),J=Object(b.a)(O.a)(i||(i=Object(g.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),V=function(e){return Object(P.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})},Z=Object(b.a)(y.a)({color:"#C0D5FE",height:8,"& > *":{height:4},"& .MuiSlider-track":{border:"none",height:4},"& .MuiSlider-thumb":{height:24,width:24,marginTop:-10,background:"linear-gradient(180deg, #604AE5 0%, #813EEE 100%)",border:"2px solid currentColor","&:focus, &:hover, &.Mui-active, &.Mui-focusVisible":{boxShadow:"inherit"},"&:before":{display:"none"}},"& .MuiSlider-valueLabel":{"& > *":{background:"linear-gradient(180deg, #604AE5 0%, #813EEE 100%)"},lineHeight:1.2,fontSize:12,padding:0,width:32,height:32,marginLeft:9}});!function(e){e[e.Phase0=0]="Phase0",e[e.Phase1=1]="Phase1",e[e.Phase2=2]="Phase2",e[e.Lottery=3]="Lottery",e[e.Phase3=4]="Phase3",e[e.Phase4=5]="Phase4",e[e.Unknown=6]="Unknown"}(s||(s={}));var Q=function(e){var t=e.phaseName,n=e.desc,a=e.date,r=e.status;return Object(C.jsxs)(T.a,{container:!0,justifyContent:"center",children:[Object(C.jsxs)(T.a,{xs:6,justifyContent:"center",direction:"column",children:[Object(C.jsx)(M.a,{variant:"h5",style:{fontWeight:600},children:t}),Object(C.jsx)(M.a,{variant:"body1",color:"textSecondary",children:n})]}),Object(C.jsx)(T.a,{xs:6,container:!0,justifyContent:"flex-end",children:Object(C.jsx)(E,{date:Object(z.f)(a),style:{justifyContent:"flex-end"},status:r||"COMPLETE"})})]})};var X=function(e,t){var n,a,r;if(t>0)return!0;if(!(null===e||void 0===e?void 0:e.lottery.data)||!(null===e||void 0===e?void 0:e.lottery.data.length)||!(null===e||void 0===e||null===(n=e.ticket.data)||void 0===n?void 0:n.seq)||!(null===e||void 0===e?void 0:e.state.phaseThreeStarted))return!1;var i=e.lottery.data[49+Math.floor((null===(a=e.ticket.data)||void 0===a?void 0:a.seq.toNumber())/8)],s=7-(null===(r=e.ticket.data)||void 0===r?void 0:r.seq.toNumber())%8,o=i&Math.pow(2,s);return o>0},$=function(e){var t,n,a,r,i,c,u,l,m,g,b,y,O,P,A,R,E,K,U,$,ee,te,ne,ae,re,ie,se,oe,ce,ue,le,de,me=Object(o.useState)(0),pe=Object(f.a)(me,2),he=pe[0],fe=pe[1],ge=Object(o.useState)(null),be=Object(f.a)(ge,2),ye=be[0],ve=be[1],je=Object(o.useState)(!1),ke=Object(f.a)(je,2),xe=ke[0],Se=ke[1],Oe=Object(o.useState)(0),we=Object(f.a)(Oe,2),Me=we[0],Te=we[1],Pe=Object(W.useWallet)(),Le=Object(o.useMemo)((function(){if(Pe&&Pe.publicKey&&Pe.signAllTransactions&&Pe.signTransaction)return{publicKey:Pe.publicKey,signAllTransactions:Pe.signAllTransactions,signTransaction:Pe.signTransaction}}),[Pe]),Ae=Object(o.useState)({open:!1,message:"",severity:void 0}),Ce=Object(f.a)(Ae,2),Re=Ce[0],Ee=Ce[1],Be=Object(o.useState)(),Ne=Object(f.a)(Be,2),De=Ne[0],Ke=Ne[1],_e=Object(o.useState)(),Fe=Object(f.a)(_e,2),Ie=Fe[0],We=Fe[1],Ue=Object(o.useState)(!1),Ye=Object(f.a)(Ue,2),qe=Ye[0],ze=Ye[1],He=Object(o.useState)(!1),Ge=Object(f.a)(He,2),Je=Ge[0],Ve=Ge[1],Ze=Object(o.useState)(!1),Qe=Object(f.a)(Ze,2),Xe=Qe[0],$e=Qe[1],et=function(){var t=Object(h.a)(p.a.mark((function t(){var n,a,r,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,Se(!0),!(Pe.connected&&(null===Ie||void 0===Ie?void 0:Ie.program)&&Pe.publicKey)){t.next=13;break}if(!(null===De||void 0===De||null===(n=De.ticket.data)||void 0===n?void 0:n.state.unpunched)||!X(De,he)){t.next=6;break}return t.next=6,ut();case 6:return t.next=8,Object(Y.c)(Ie,Pe.publicKey);case 8:return a=t.sent,t.next=11,Object(Y.a)(a,e.txTimeout,e.connection,"singleGossip",!1);case 11:(null===(r=t.sent)||void 0===r?void 0:r.err)?Ee({open:!0,message:"Mint failed! Please try again!",severity:"error"}):Ee({open:!0,message:"Congratulations! Mint succeeded!",severity:"success"});case 13:t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),i=t.t0.msg||"Minting failed! Please try again!",t.t0.msg?311===t.t0.code?(i="SOLD OUT!",window.location.reload()):312===t.t0.code&&(i="Minting period hasn't started yet."):t.t0.message?t.t0.message.indexOf("0x138")||(t.t0.message.indexOf("0x137")?i="SOLD OUT!":t.t0.message.indexOf("0x135")&&(i="Insufficient funds to mint. Please fund your wallet.")):i="Transaction Timeout! Please try again.",Ee({open:!0,message:i,severity:"error"});case 20:return t.prev=20,Se(!1),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[0,15,20,23]])})));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){Object(h.a)(p.a.mark((function t(){var n,a,r,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Le){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.connection.getBalance(Le.publicKey);case 5:return n=t.sent,ve(n),t.next=9,Object(q.a)(Le,e.fairLaunchId,e.connection);case 9:if(a=t.sent,Ke(a),t.prev=11,!a.state.tokenMint){t.next=21;break}return t.t0=e.connection,t.next=16,Object(z.d)(a.state.tokenMint,Le.publicKey);case 16:return t.t1=t.sent[0],t.next=19,t.t0.getTokenAccountBalance.call(t.t0,t.t1);case 19:(r=t.sent).value&&fe(r.value.uiAmount||0);case 21:t.next=27;break;case 23:t.prev=23,t.t2=t.catch(11),console.log("Problem getting fair launch token balance"),console.log(t.t2);case 27:Te((a.state.currentMedian||a.state.data.priceRangeStart).toNumber()/I.LAMPORTS_PER_SOL),t.next=34;break;case 30:t.prev=30,t.t3=t.catch(2),console.log("Problem getting fair launch state"),console.log(t.t3);case 34:if(!e.candyMachineId){t.next=48;break}return t.prev=35,t.next=38,Object(Y.b)(Le,e.candyMachineId,e.connection);case 38:i=t.sent,We(i),t.next=46;break;case 42:t.prev=42,t.t4=t.catch(35),console.log("Problem getting candy machine state"),console.log(t.t4);case 46:t.next=49;break;case 48:console.log("No candy machine detected in configuration.");case 49:case"end":return t.stop()}}),t,null,[[2,30],[11,23],[35,42]])})))()}),[Le,e.candyMachineId,e.connection,e.fairLaunchId]);var tt=z.c.asNumber(null===De||void 0===De?void 0:De.state.data.priceRangeStart),nt=z.c.asNumber(null===De||void 0===De?void 0:De.state.data.priceRangeEnd),at=z.c.asNumber(null===De||void 0===De?void 0:De.state.data.tickSize),rt=z.c.asNumber(null===De||void 0===De?void 0:De.state.currentMedian),it=[{value:tt||0,label:"".concat(tt," SOL")},{value:rt||0,label:"".concat(rt)},{value:nt||0,label:"".concat(nt," SOL")}].filter((function(e){return void 0!==e&&0!==e.value})),st=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Le){e.next=2;break}return e.abrupt("return");case 2:return console.log("deposit"),Se(!0),e.prev=4,e.next=7,Object(q.c)(Me,Le,De);case 7:Se(!1),Ee({open:!0,message:"Congratulations! Bid ".concat((null===De||void 0===De?void 0:De.ticket.data)?"updated":"inserted","!"),severity:"success"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0),Se(!1),Ee({open:!0,message:"Something went wrong.",severity:"error"});case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Le){e.next=2;break}return e.abrupt("return");case 2:return console.log("refund"),e.prev=3,Se(!0),e.next=7,Object(q.d)(Le,De);case 7:Se(!1),Ee({open:!0,message:"Congratulations! You have received a refund. This is an irreversible action.",severity:"success"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),Se(!1),Ee({open:!0,message:"Something went wrong.",severity:"error"});case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),ct=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Le){e.next=2;break}return e.abrupt("return");case 2:return console.log("refund"),e.prev=3,Se(!0),e.next=7,Object(q.c)(0,Le,De);case 7:Se(!1),Ee({open:!0,message:"Congratulations! Funds withdrawn. This is an irreversible action.",severity:"success"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),Se(!1),Ee({open:!0,message:"Something went wrong.",severity:"error"});case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),ut=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Le&&De&&De.ticket){e.next=2;break}return e.abrupt("return");case 2:return console.log("punch"),Se(!0),e.prev=4,e.next=7,Object(q.b)(Le,De);case 7:Se(!1),Ee({open:!0,message:"Congratulations! Ticket punched!",severity:"success"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0),Se(!1),Ee({open:!0,message:"Something went wrong.",severity:"error"});case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),lt=function(e,t){var n,a,r,i,o=(new Date).getTime(),c=null===(n=Object(z.f)(null===e||void 0===e?void 0:e.state.data.phaseOneStart))||void 0===n?void 0:n.getTime(),u=null===(a=Object(z.f)(null===e||void 0===e?void 0:e.state.data.phaseOneEnd))||void 0===a?void 0:a.getTime(),l=null===(r=Object(z.f)(null===e||void 0===e?void 0:e.state.data.phaseTwoEnd))||void 0===r?void 0:r.getTime(),d=null===(i=Object(z.f)(null===t||void 0===t?void 0:t.state.goLiveDate))||void 0===i?void 0:i.getTime();return c&&o<c?s.Phase0:u&&o<=u?s.Phase1:l&&o<=l?s.Phase2:(null===e||void 0===e?void 0:e.state.phaseThreeStarted)?(null===e||void 0===e?void 0:e.state.phaseThreeStarted)&&d&&o>d?s.Phase4:(null===e||void 0===e?void 0:e.state.phaseThreeStarted)?s.Phase3:s.Unknown:s.Lottery}(De,Ie),dt=(null===Ie||void 0===Ie?void 0:Ie.state.goLiveDate)&&(null===De||void 0===De?void 0:De.state.data.phaseTwoEnd)&&(null===Ie||void 0===Ie?void 0:Ie.state.goLiveDate.lt(null===De||void 0===De?void 0:De.state.data.phaseTwoEnd)),mt=!!(null!=ye&&(null===De||void 0===De?void 0:De.state.data.priceRangeStart)&&(null===De||void 0===De?void 0:De.state.data.fee)&&ye+((null===De||void 0===De||null===(t=De.ticket)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.amount.toNumber())||0)<Me*I.LAMPORTS_PER_SOL+(null===De||void 0===De?void 0:De.state.data.fee.toNumber())+.01);return Object(C.jsxs)(v.a,{style:{marginTop:100},children:[Object(C.jsx)(v.a,{maxWidth:"xs",style:{position:"relative"},children:Object(C.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},children:Object(C.jsx)(j.a,{component:"button",variant:"body2",color:"textSecondary",align:"right",onClick:function(){$e(!0)},children:"Anti-Rug Policy"})})}),Object(C.jsx)(v.a,{maxWidth:"xs",style:{position:"relative"},children:Object(C.jsx)(w.a,{style:{padding:24,backgroundColor:"#151A1F",borderRadius:6},children:Object(C.jsxs)(T.a,{container:!0,justifyContent:"center",direction:"column",children:[lt===s.Phase0&&Object(C.jsx)(Q,{phaseName:"Phase 0",desc:"Anticipation Phase",date:null===De||void 0===De?void 0:De.state.data.phaseOneStart}),lt===s.Phase1&&Object(C.jsx)(Q,{phaseName:"Phase 1",desc:"Set price phase",date:null===De||void 0===De?void 0:De.state.data.phaseOneEnd}),lt===s.Phase2&&Object(C.jsx)(Q,{phaseName:"Phase 2",desc:"Grace period",date:null===De||void 0===De?void 0:De.state.data.phaseTwoEnd}),lt===s.Lottery&&Object(C.jsx)(Q,{phaseName:"Phase 3",desc:"Raffle in progress",date:null===De||void 0===De?void 0:De.state.data.phaseTwoEnd.add(null===De||void 0===De?void 0:De.state.data.lotteryDuration)}),lt===s.Phase3&&!Ie&&Object(C.jsx)(Q,{phaseName:"Phase 3",desc:"Raffle finished!",date:null===De||void 0===De?void 0:De.state.data.phaseTwoEnd}),lt===s.Phase3&&Ie&&Object(C.jsx)(Q,{phaseName:"Phase 3",desc:"Minting starts in...",date:null===Ie||void 0===Ie?void 0:Ie.state.goLiveDate}),lt===s.Phase4&&Object(C.jsx)(Q,{phaseName:dt?"Phase 3":"Phase 4",desc:"Candy Time \ud83c\udf6c \ud83c\udf6c \ud83c\udf6c",date:null===Ie||void 0===Ie?void 0:Ie.state.goLiveDate,status:"LIVE"}),De&&Object(C.jsx)(T.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:200,marginTop:20,marginBottom:20,background:"#384457",borderRadius:6},children:De.ticket.data?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(M.a,{children:"Your bid"}),Object(C.jsxs)(M.a,{variant:"h6",style:{fontWeight:900},children:[z.c.format(((null===De||void 0===De||null===(a=De.ticket.data)||void 0===a?void 0:a.amount.toNumber())||0)/I.LAMPORTS_PER_SOL)," ","SOL"]})]}):[s.Phase0,s.Phase1].includes(lt)?Object(C.jsxs)(M.a,{children:["The last person to bid wins the honeypot. ",Object(C.jsx)("br",{}),"Seriously, check the code. https://github.com/dyor-market/fair3d - or run the 'show' command on cli to see updated authority ;).",Object(C.jsx)("br",{}),"The counter resets every time some new address bids. ",Object(C.jsx)("br",{}),"This isn't necessarily what @redacted_j had in mind. ",Object(C.jsx)("br",{})]}):Object(C.jsx)(M.a,{children:"You didn't participate in this raffle."})}),De&&Object(C.jsxs)(C.Fragment,{children:[[s.Phase1,s.Phase2,s.Phase3,s.Lottery].includes(lt)&&(null===De||void 0===De||null===(r=De.ticket)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.state.withdrawn)&&Object(C.jsx)("div",{style:{paddingTop:"15px"},children:Object(C.jsx)(F.a,{severity:"error",children:"Your bid was withdrawn and cannot be adjusted or re-inserted."})}),[s.Phase1,s.Phase2].includes(lt)&&De.state.currentMedian&&(null===De||void 0===De||null===(c=De.ticket)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.amount)&&!(null===De||void 0===De||null===(l=De.ticket)||void 0===l||null===(m=l.data)||void 0===m?void 0:m.state.withdrawn)&&De.state.currentMedian.gt(null===De||void 0===De||null===(g=De.ticket)||void 0===g||null===(b=g.data)||void 0===b?void 0:b.amount)&&Object(C.jsx)("div",{style:{paddingTop:"15px"},children:Object(C.jsx)(F.a,{severity:"warning",children:"Your bid is currently below the median and will not be eligible for the raffle."})}),[s.Phase3,s.Lottery].includes(lt)&&De.state.currentMedian&&(null===De||void 0===De||null===(y=De.ticket)||void 0===y||null===(O=y.data)||void 0===O?void 0:O.amount)&&!(null===De||void 0===De||null===(P=De.ticket)||void 0===P||null===(A=P.data)||void 0===A?void 0:A.state.withdrawn)&&De.state.currentMedian.gt(null===De||void 0===De||null===(R=De.ticket)||void 0===R||null===(E=R.data)||void 0===E?void 0:E.amount)&&Object(C.jsx)("div",{style:{paddingTop:"15px"},children:Object(C.jsxs)(F.a,{severity:"error",children:["Your bid was below the median and was not included in the raffle. You may click ",Object(C.jsx)("em",{children:"Withdraw"})," when the raffle ends or you will be automatically issued one when the Fair Launch authority withdraws from the treasury."]})}),mt&&Object(C.jsx)(F.a,{severity:"error",children:"You do not have enough SOL in your account to place this bid."})]}),[s.Phase1,s.Phase2].includes(lt)&&Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(T.a,{style:{marginTop:40,marginBottom:20},children:Object(C.jsx)(Z,{min:tt,marks:it,max:nt,step:at,value:Me,onChange:function(e,t){return Te(t)},valueLabelDisplay:"auto",style:{width:"calc(100% - 40px)",marginLeft:20,height:30}})})}),Pe.connected?Object(C.jsxs)("div",{children:[[s.Phase1,s.Phase2].includes(lt)&&Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(J,{onClick:st,variant:"contained",disabled:xe||!(null===De||void 0===De?void 0:De.ticket.data)&&lt===s.Phase2||mt,children:xe?Object(C.jsx)(k.a,{}):(null===De||void 0===De?void 0:De.ticket.data)?"Change bid":"Place bid"})}),[s.Phase3].includes(lt)&&Object(C.jsxs)(C.Fragment,{children:[X(De,he)&&Object(C.jsx)(J,{onClick:ut,variant:"contained",disabled:void 0!==(null===De||void 0===De||null===(K=De.ticket.data)||void 0===K?void 0:K.state.punched),children:xe?Object(C.jsx)(k.a,{}):"Punch Ticket"}),!X(De,he)&&Object(C.jsx)(J,{onClick:ct,variant:"contained",disabled:xe||void 0===(null===De||void 0===De?void 0:De.ticket.data)||void 0!==(null===De||void 0===De||null===(U=De.ticket.data)||void 0===U?void 0:U.state.withdrawn),children:xe?Object(C.jsx)(k.a,{}):"Withdraw"})]}),lt===s.Phase4&&Object(C.jsxs)(C.Fragment,{children:[(!De||X(De,he))&&Object(C.jsx)(G,{children:Object(C.jsx)(J,{disabled:(null===Ie||void 0===Ie?void 0:Ie.state.isSoldOut)||xe||!(null===Ie||void 0===Ie?void 0:Ie.state.isActive)||(null===De||void 0===De||null===($=De.ticket)||void 0===$||null===(ee=$.data)||void 0===ee?void 0:ee.state.punched)&&0===he,onClick:et,variant:"contained",children:(null===De||void 0===De||null===(te=De.ticket)||void 0===te||null===(ne=te.data)||void 0===ne?void 0:ne.state.punched)&&0===he?"MINTED":(null===Ie||void 0===Ie?void 0:Ie.state.isSoldOut)?"SOLD OUT":xe?Object(C.jsx)(k.a,{}):"MINT"})}),!X(De,he)&&Object(C.jsx)(J,{onClick:ct,variant:"contained",disabled:xe||void 0===(null===De||void 0===De?void 0:De.ticket.data)||void 0!==(null===De||void 0===De||null===(ae=De.ticket.data)||void 0===ae?void 0:ae.state.withdrawn),children:xe?Object(C.jsx)(k.a,{}):"Withdraw"})]})]}):Object(C.jsxs)(H,{children:["Connect"," ",[s.Phase1].includes(lt)?"to bid":"to see status"]}),Object(C.jsxs)(T.a,{container:!0,justifyContent:"space-between",color:"textSecondary",children:[Object(C.jsx)(j.a,{component:"button",variant:"body2",color:"textSecondary",align:"left",onClick:function(){ze(!0)},children:"How this raffle works"}),(null===De||void 0===De?void 0:De.ticket.data)&&Object(C.jsx)(j.a,{component:"button",variant:"body2",color:"textSecondary",align:"right",onClick:function(){!De||lt===s.Lottery||X(De,he)?Ve(!0):ct()},children:"Withdraw funds"})]}),Object(C.jsx)(B.a,{open:Je,onClose:function(){return Ve(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:Object(C.jsx)(D.a,{style:{padding:24},children:"During raffle phases, or if you are a winner, or if this website is not configured to be a fair launch but simply a candy machine, refunds are disallowed."})}),Object(C.jsx)(B.a,{open:Xe,onClose:function(){$e(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:Object(C.jsxs)(D.a,{style:{padding:24},children:[!(null===De||void 0===De?void 0:De.state.data.antiRugSetting)&&Object(C.jsx)("span",{children:"This Fair Launch has no anti-rug settings."}),(null===De||void 0===De?void 0:De.state.data.antiRugSetting)&&De.state.data.antiRugSetting.selfDestructDate&&Object(C.jsxs)("div",{children:[Object(C.jsx)("h3",{children:"Anti-Rug Policy"}),Object(C.jsx)("p",{children:"This raffle is governed by a smart contract to prevent the artist from running away with your money."}),Object(C.jsx)("p",{children:"How it works:"}),"This project will retain"," ",De.state.data.antiRugSetting.reserveBp/100,"% (\u25ce"," ",(null===De||void 0===De?void 0:De.treasury)*De.state.data.antiRugSetting.reserveBp/(1e4*I.LAMPORTS_PER_SOL),") of the pledged amount in a locked state until all but"," ",De.state.data.antiRugSetting.tokenRequirement.toNumber()," ","NFTs (out of up to"," ",De.state.data.numberOfTokens.toNumber(),") have been minted.",Object(C.jsxs)("p",{children:["If more than"," ",De.state.data.antiRugSetting.tokenRequirement.toNumber()," ","NFTs remain as of"," ",null===(re=Object(z.f)(De.state.data.antiRugSetting.selfDestructDate))||void 0===re?void 0:re.toLocaleDateString()," ","at"," ",null===(ie=Object(z.f)(De.state.data.antiRugSetting.selfDestructDate))||void 0===ie?void 0:ie.toLocaleTimeString(),", you will have the option to get a refund of"," ",De.state.data.antiRugSetting.reserveBp/100,"% of the cost of your token."]}),(null===De||void 0===De||null===(se=De.ticket)||void 0===se?void 0:se.data)&&!(null===De||void 0===De||null===(oe=De.ticket)||void 0===oe?void 0:oe.data.state.withdrawn)&&Object(C.jsx)(J,{onClick:ot,variant:"contained",disabled:!De.ticket.data||!De.ticket.data.state.punched||Date.now()/1e3<De.state.data.antiRugSetting.selfDestructDate.toNumber(),children:xe?Object(C.jsx)(k.a,{}):Date.now()/1e3<De.state.data.antiRugSetting.selfDestructDate.toNumber()?Object(C.jsxs)("span",{children:["Refund in...",Object(C.jsx)(L.a,{date:Object(z.f)(De.state.data.antiRugSetting.selfDestructDate)})]}):"Refund"}),Object(C.jsx)("div",{style:{textAlign:"center",marginTop:"-5px"},children:(null===De||void 0===De||null===(ce=De.ticket)||void 0===ce?void 0:ce.data)&&!(null===De||void 0===De||null===(ue=De.ticket)||void 0===ue||null===(le=ue.data)||void 0===le?void 0:le.state.punched)&&Object(C.jsx)("small",{children:"You currently have a ticket but it has not been punched yet, so cannot be refunded."})})]})]})}),Object(C.jsxs)(B.a,{open:qe,onClose:function(){return ze(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:[Object(C.jsxs)(N.a,{disableTypography:!0,style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(C.jsx)(j.a,{component:"button",variant:"h6",color:"textSecondary",onClick:function(){ze(!0)},children:"How it works"}),Object(C.jsx)(x.a,{"aria-label":"close",className:V.closeButton,onClick:function(){return ze(!1)},children:Object(C.jsx)(_.a,{})})]}),Object(C.jsxs)(D.a,{children:[Object(C.jsx)(M.a,{variant:"h6",children:"Phase 1 - Set the fair price:"}),Object(C.jsxs)(M.a,{gutterBottom:!0,color:"textSecondary",children:['Enter a bid in the range provided by the artist. The median of all bids will be the "fair" price of the raffle ticket.'," "]}),Object(C.jsx)(M.a,{variant:"h6",children:"Phase 2 - Grace period:"}),Object(C.jsx)(M.a,{gutterBottom:!0,color:"textSecondary",children:"If your bid was at or above the fair price, you automatically get a raffle ticket at that price. There's nothing else you need to do. Your excess SOL will be returned to you when the Fair Launch authority withdraws from the treasury. If your bid is below the median price, you can still opt in at the fair price during this phase."}),dt?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(M.a,{variant:"h6",children:"Phase 3 - The Candy Machine:"}),Object(C.jsx)(M.a,{gutterBottom:!0,color:"textSecondary",children:"Everyone who got a raffle ticket at the fair price is entered to win an NFT. If you win an NFT, congrats. If you don\u2019t, no worries, your SOL will go right back into your wallet."})]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(M.a,{variant:"h6",children:"Phase 3 - The Lottery:"}),Object(C.jsx)(M.a,{gutterBottom:!0,color:"textSecondary",children:"Everyone who got a raffle ticket at the fair price is entered to win a Fair Launch Token that entitles them to an NFT at a later date using a Candy Machine here. If you don\u2019t win, no worries, your SOL will go right back into your wallet."}),Object(C.jsx)(M.a,{variant:"h6",children:"Phase 4 - The Candy Machine:"}),Object(C.jsxs)(M.a,{gutterBottom:!0,color:"textSecondary",children:["On"," ",(null===Ie||void 0===Ie?void 0:Ie.state.goLiveDate)?null===(de=Object(z.f)(null===Ie||void 0===Ie?void 0:Ie.state.goLiveDate))||void 0===de?void 0:de.toLocaleString():" some later date",", you will be able to exchange your Fair Launch token for an NFT using the Candy Machine at this site by pressing the Mint Button."]})]})]})]})]})})}),De&&Object(C.jsx)(v.a,{maxWidth:"xs",style:{position:"relative",marginTop:10},children:Object(C.jsx)("div",{style:{margin:20},children:Object(C.jsxs)(T.a,{container:!0,direction:"row",wrap:"nowrap",children:[Object(C.jsxs)(T.a,{container:!0,md:4,direction:"column",children:[Object(C.jsx)(M.a,{variant:"body2",color:"textSecondary",children:"Bids"}),Object(C.jsx)(M.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:(null===De||void 0===De?void 0:De.state.numberTicketsSold.toNumber())||0})]}),Object(C.jsxs)(T.a,{container:!0,md:4,direction:"column",children:[Object(C.jsx)(M.a,{variant:"body2",color:"textSecondary",children:"Median bid"}),Object(C.jsxs)(M.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:["\u25ce ",z.c.format(rt)]})]}),Object(C.jsxs)(T.a,{container:!0,md:4,direction:"column",children:[Object(C.jsx)(M.a,{variant:"body2",color:"textSecondary",children:"Total raised"}),Object(C.jsxs)(M.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:["\u25ce"," ",z.c.format(((null===De||void 0===De?void 0:De.treasury)||0)/I.LAMPORTS_PER_SOL)]})]})]})})}),Object(C.jsx)(S.a,{open:Re.open,autoHideDuration:6e3,onClose:function(){return Ee(Object(d.a)(Object(d.a)({},Re),{},{open:!1}))},children:Object(C.jsx)(F.a,{onClose:function(){return Ee(Object(d.a)(Object(d.a)({},Re),{},{open:!1}))},severity:Re.severity,children:Re.message})})]})},ee=n(33),te=n(232),ne=n(120),ae=n(778),re=n(487),ie=c.a.createContext(null),se=function(e){var t=e.children,n=void 0===t?null:t,a=Object(o.useRef)(),r=Object(o.useRef)(),i=Object(o.useMemo)((function(){return function(){var e;r.current&&a.current&&(a.current.style.visibility="visible",null===(e=r.current({particleCount:400,spread:160,origin:{y:.3}}))||void 0===e||e.finally((function(){a.current&&(a.current.style.visibility="hidden")})))}}),[]);Object(o.useEffect)((function(){a.current&&!r.current&&(a.current.style.visibility="hidden",r.current=re.a.create(a.current,{resize:!0,useWorker:!0}))}),[]);return Object(C.jsxs)(ie.Provider,{value:{dropConfetti:i},children:[Object(C.jsx)("canvas",{ref:a,style:{width:"100vw",height:"100vh",position:"absolute",zIndex:1,top:0,left:0}}),n]})},oe=Object(ne.b)({palette:{type:"dark"}}),ce=new ee.e.PublicKey("983GUnuPJFcoDG6djWEgQWBJE2Z4YAdcKFtUTp4rnGuw"),ue=new ee.e.Connection("https://api.devnet.solana.com"),le=parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CANDY_MACHINE_ID:"",REACT_APP_SOLANA_NETWORK:"devnet",REACT_APP_SOLANA_RPC_HOST:"https://api.devnet.solana.com",REACT_APP_FAIR_LAUNCH_ID:"983GUnuPJFcoDG6djWEgQWBJE2Z4YAdcKFtUTp4rnGuw"}).REACT_APP_CANDY_START_DATE,10),de=function(){var e=Object(o.useMemo)((function(){return Object(I.clusterApiUrl)("devnet")}),[]),t=Object(o.useMemo)((function(){return[Object(te.getPhantomWallet)(),Object(te.getSolflareWallet)(),Object(te.getSolletWallet)()]}),[]);return Object(C.jsx)(ae.a,{theme:oe,children:Object(C.jsx)(W.ConnectionProvider,{endpoint:e,children:Object(C.jsx)(W.WalletProvider,{wallets:t,autoConnect:!0,children:Object(C.jsx)(U.WalletDialogProvider,{children:Object(C.jsx)(se,{children:Object(C.jsx)($,{candyMachineId:undefined,fairLaunchId:ce,connection:ue,startDate:le,txTimeout:3e4})})})})})})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,794)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};l.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(de,{})}),document.getElementById("root")),me()}},[[760,1,2]]]);
//# sourceMappingURL=main.b43c8b63.chunk.js.map