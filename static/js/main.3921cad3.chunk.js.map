{"version":3,"sources":["fair-launch.ts","candy-machine.ts","utils.ts","connection.tsx","Home.tsx","countdown.tsx","confetti.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["LotteryState","FAIR_LAUNCH_PROGRAM","anchor","PublicKey","getFairLaunchState","anchorWallet","fairLaunchId","connection","a","provider","preflightCommitment","fetchIdl","idl","program","account","fairLaunch","fetch","state","getFairLaunchTicket","tokenMint","publicKey","fairLaunchTicket","bump","fairLaunchData","console","log","getBalance","treasury","lotteryData","Uint8Array","getFairLaunchLotteryBitmap","fairLaunchLotteryBitmap","getAccountInfo","fairLaunchLotteryBitmapObj","data","id","ticket","pubkey","lottery","punchTicket","getAtaForMint","buyerTokenAccount","amount","gt","currentMedian","toNumber","getSetupForTicketing","remainingAccounts","instructions","signers","accountExists","createAssociatedTokenAccountInstruction","rpc","accounts","payer","tokenProgram","TOKEN_PROGRAM_ID","length","undefined","buyer","findProgramAddress","Buffer","from","toBuffer","anchorProgram","ticketKey","amountLamports","treasuryMint","Math","ceil","LAMPORTS_PER_SOL","priceRangeStart","transferAuthority","Keypair","generate","push","Token","createApproveInstruction","amountNumber","fees","isWritable","isSigner","getFairLaunchTicketSeqLookup","seq","fairLaunchTicketSeqLookup","seqBump","instruction","createTicketSeq","systemProgram","SystemProgram","programId","rent","SYSVAR_RENT_PUBKEY","receiveRefund","toBase58","clock","SYSVAR_CLOCK_PUBKEY","__private","logAccounts","purchaseTicket","process","authority","dev","CANDY_MACHINE_PROGRAM","TOKEN_METADATA_PROGRAM_ID","awaitTransactionSignatureConfirmation","txid","timeout","queryStatus","done","status","slot","confirmations","err","subId","Promise","resolve","reject","setTimeout","getSignatureStatuses","signatureStatuses","value","sleep","_signatureSubscriptions","removeSignatureListener","associatedTokenAddress","walletAddress","splTokenMintAddress","keys","TransactionInstruction","SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID","getCandyMachineState","candyMachineId","candyMachine","itemsAvailable","itemsRedeemed","itemsRemaining","isSoldOut","isActive","goLiveDate","Date","getTime","wallet","config","price","getMasterEdition","mint","getMetadata","mintOneToken","userTokenAccountAddress","userPayingAccountAddress","candyMachineAddress","MintLayout","span","getMinimumBalanceForRentExemption","fromPubkey","newAccountPubkey","space","lamports","createAccount","createInitMintInstruction","createMintToInstruction","metadataAddress","masterEdition","mintNft","metadata","mintAuthority","updateAuthority","tokenMetadataProgram","sendTransactionWithRetry","ms","FAIR_LAUNCH_PROGRAM_ID","toDate","numberFormater","Intl","NumberFormat","style","minimumFractionDigits","maximumFractionDigits","formatNumber","format","val","asNumber","toArrayLike","SequenceType","commitment","includesFeePayer","block","beforeSend","WalletNotConnectedError","transaction","Transaction","forEach","add","getRecentBlockhash","recentBlockhash","blockhash","setSigners","map","s","partialSign","signTransaction","sendSignedTransaction","signedTransaction","getUnixTs","DEFAULT_TIMEOUT","rawTransaction","serialize","startTime","sendRawTransaction","skipPreflight","confirmation","Error","error","simulateResult","simulateTransaction","logs","i","line","startsWith","slice","JSON","stringify","_recentBlockhash","_disableBlockhashCaching","signData","serializeMessage","wireTransaction","_serialize","encodedTransaction","toString","args","encoding","_rpcRequest","res","message","result","onSignature","context","e","Phase","useStyles","makeStyles","theme","createStyles","root","display","padding","spacing","margin","marginRight","width","height","flexDirection","alignContent","alignItems","justifyContent","background","color","borderRadius","fontSize","fontWeight","item","PhaseCountdown","date","start","end","onComplete","classes","useState","now","isFixed","renderCountdown","days","hours","minutes","seconds","completed","className","Paper","elevation","renderer","ConnectButton","styled","WalletDialogButton","MintContainer","div","MintButton","Button","dialogStyles","closeButton","position","right","top","palette","grey","ValueSlider","Slider","border","marginTop","boxShadow","lineHeight","marginLeft","Header","props","phaseName","desc","Grid","container","xs","direction","Typography","variant","first","isWinner","fairLaunchBalance","phaseThreeStarted","myByte","floor","positionFromRight","pow","Home","setFairLaunchBalance","setYourSOLBalance","isMinting","setIsMinting","contributed","setContributed","min","useWallet","useMemo","signAllTransactions","open","severity","alertState","setAlertState","setFairLaunch","setCandyMachine","howToOpen","setHowToOpen","refundExplainerOpen","setRefundExplainerOpen","antiRugPolicyOpen","setAnitRugPolicyOpen","onMint","connected","unpunched","onPunchTicket","mintTxId","txTimeout","msg","code","window","location","reload","indexOf","useEffect","balance","getTokenAccountBalance","uiAmount","cndy","phaseOneEnd","fee","max","priceRangeEnd","step","tickSize","median","currentHighest","marks","label","filter","_","onDeposit","onRugRefund","onRefundTicket","phase","phaseOneStart","phaseTwoEnd","Phase1","getPhase","candyMachinePredatesFairLaunch","lt","Container","maxWidth","backgroundColor","Phase0","current_highest","Phase2","Lottery","lotteryDuration","Phase3","Phase4","includes","withdrawn","paddingTop","Alert","marginBottom","onChange","ev","valueLabelDisplay","onClick","disabled","CircularProgress","punched","Link","component","align","Dialog","onClose","PaperProps","antiRugSetting","selfDestructDate","reserveBp","tokenRequirement","numberOfTokens","toLocaleDateString","toLocaleTimeString","textAlign","disableTypography","IconButton","gutterBottom","wrap","md","numberTicketsSold","Snackbar","autoHideDuration","ConfettiContext","React","createContext","ConfettiProvider","children","canvasRef","useRef","confettiRef","dropConfetti","current","visibility","particleCount","spread","origin","y","finally","confetti","create","resize","useWorker","Provider","ref","zIndex","left","createTheme","type","fairLaunchId2","fairLaunchId3","fairLaunchId4","Connection","startDateSeed","parseInt","REACT_APP_CANDY_START_DATE","App","endpoint","clusterApiUrl","wallets","getPhantomWallet","getSolflareWallet","getSolletWallet","ThemeProvider","autoConnect","startDate","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"yRAqFYA,E,+DA3ECC,EAAsB,IAAIC,IAAYC,UACjD,iD,SA0EUH,K,kBAAAA,E,oBAAAA,E,oBAAAA,M,KAML,IAmBMI,EAAkB,uCAAG,WAChCC,EACAC,EACAC,GAHgC,uCAAAC,EAAA,6DAK1BC,EAAW,IAAIP,IAAgBK,EAAYF,EAAc,CAC7DK,oBAAqB,WANS,SASdR,IAAeS,SAASV,EAAqBQ,GAT/B,cAS1BG,EAT0B,OAW1BC,EAAU,IAAIX,IAAeU,EAAKX,EAAqBQ,GAX7B,SAYPI,EAAQC,QAAQC,WAAWC,MAAMV,GAZ1B,cAY1BW,EAZ0B,iBAcOC,EAErCD,EAAME,UACNd,EAAae,WAjBiB,2CAczBC,EAdyB,KAcPC,EAdO,yBAuBPT,EAAQC,QAAQO,iBAAiBL,MACtDK,GAxB4B,QAuB9BE,EAvB8B,0DA2B9BC,QAAQC,IAAI,aA3BkB,yBA8BTZ,EAAQJ,SAASF,WAAWmB,WAAWT,EAAMU,UA9BpC,eA8B1BA,EA9B0B,OAgC5BC,EAA0B,IAAIC,WAAW,IAhCb,UAkCxBC,EAEJb,EAAME,WApCsB,eAiC5BY,EAjC4B,OAsC9B,GAtC8B,oBA0CtBlB,EAAQJ,SAASF,WAAWyB,eAAeD,GA1CrB,QAyCxBE,EAzCwB,OA4C9BL,EAAc,IAAIC,YAAqC,OAA1BI,QAA0B,IAA1BA,OAAA,EAAAA,EAA4BC,OAAQ,IA5CnC,mDA8C9BV,QAAQC,IAAI,uCACZD,QAAQC,IAAR,MA/C8B,iCAkDzB,CACLU,GAAI7B,EACJW,QACAJ,UACAuB,OAAQ,CACNC,OAAQhB,EACRC,OACAY,KAAMX,GAERe,QAAS,CACPD,OAAQN,EACRG,KAAMN,GAERD,aA/D8B,mEAAH,0DAmElBY,EAAW,uCAAG,WACzBlC,EACAU,GAFyB,2BAAAP,EAAA,sEAKjBU,EAEJH,EAAWE,MAAME,UACjBd,EAAae,WARQ,cAInBC,EAJmB,OAUvB,GAEIe,EAASrB,EAAWqB,OAAOF,KAZR,SAejBJ,EAA2Bf,EAAWE,MAAME,WAf3B,cAcnBY,EAdmB,OAgBvB,GAhBuB,SAmBjBS,YAEJzB,EAAWE,MAAME,UACjBd,EAAae,WAtBQ,UAkBnBqB,EAlBmB,OAwBvB,KAxBuB,OA0BrBL,QA1BqB,IA0BrBA,OA1BqB,EA0BrBA,EAAQM,OAAOC,GAAG5B,EAAWE,MAAM2B,gBA1Bd,wBA2BvBpB,QAAQC,IACN,oBADF,OAEEW,QAFF,IAEEA,OAFF,EAEEA,EAAQM,OAAOG,WACf9B,EAAWE,MAAM2B,cAAcC,YA9BV,UAiCfC,EACJ/B,EAAWF,QACXE,EAAWE,MAAM2B,cAAcC,WAC/BxC,EACAU,EACAM,GAtCmB,mBAgCf0B,kBAhCe,EAgCIC,aAhCJ,EAgCkBC,QAhClB,yBA2CjBlC,EAAWF,QAAQJ,SAASF,WAAWyB,eAC3CS,GA5CqB,eA0CnBS,EA1CmB,OA+CnBF,EAAgBE,EAUlB,GATA,CACEC,YACEV,EACApC,EAAae,UACbf,EAAae,UAEbL,EAAWE,MAAME,YAtDA,UA2DnBJ,EAAWF,QAAQuC,IAAIb,YAAY,CACvCc,SAAU,CACRhC,mBACAN,WAAYA,EAAWoB,GACvBJ,0BACAuB,MAAOjD,EAAae,UACpBqB,oBAEAtB,UAAWJ,EAAWE,MAAME,UAC5BoC,aAAcC,KAEhBR,aAAcA,EAAaS,OAAS,EAAIT,OAAeU,IAtEhC,4CAAH,wDA0EXxC,EAAmB,uCAAG,WACjCC,EACAwC,GAFiC,SAAAnD,EAAA,sEAIpBN,IAAYC,UAAUyD,mBACjC,CAACC,EAAOC,KAAK,eAAgB3C,EAAU4C,WAAYJ,EAAMI,YACzD9D,GAN+B,mFAAH,wDAUnB6B,EAA0B,uCAAG,WACxCX,GADwC,SAAAX,EAAA,sEAG3BN,IAAYC,UAAUyD,mBACjC,CAACC,EAAOC,KAAK,eAAgB3C,EAAU4C,WAAYF,EAAOC,KAAK,YAC/D7D,GALsC,mFAAH,sDASjC6C,EAAoB,uCAAG,WAC3BkB,EACAtB,EACArC,EACAU,EACAkD,GAL2B,mCAAAzD,EAAA,yDAgBtBO,EAhBsB,yCAiBlB,CACLgC,kBAAmB,GACnBC,aAAc,GACdC,QAAS,GACTiB,eAAgB,IArBO,UAwBrB9B,EAASrB,EAAWqB,OAEpBW,EAAoB,GACpBC,EAAe,GACfC,EAAU,GAEZiB,EAAiB,EAEhBnD,EAAWE,MAAMkD,aAhCK,iBAoCvBD,EAHG9B,GAAqB,IAAXM,EAGI0B,KAAKC,KAAK3B,EAAS4B,oBAFnBvD,EAAWE,MAAMiB,KAAKqC,gBAAgB1B,WAlChC,+BAuCnB2B,EAAoBtE,IAAYuE,QAAQC,WAC9CzB,EAAQ0B,KAAKH,GAcbxB,EAAa2B,KACXC,IAAMC,yBACJrB,IAEAzC,EAAWE,MAAMkD,aACjBK,EAAkBpD,UAClBf,EAAae,UACb,GAIA0D,aAAe/D,EAAWE,MAAMiB,KAAK6C,KAAKlC,aAI9CE,EAAkB4B,KAAK,CAErBtC,OAAQtB,EAAWE,MAAMkD,aACzBa,YAAY,EACZC,UAAU,IAzEa,KA2EzBlC,EA3EyB,UA6EfP,YAEJzB,EAAWE,MAAMkD,aACjB9D,EAAae,WAhFM,oBAkFrB,GAlFqB,MA4EvBiB,OA5EuB,KAmFvB2C,YAAY,EACZC,UAAU,GApFa,KA2EPN,KA3EO,gBAsFzB5B,EAAkB4B,KAAK,CACrBtC,OAAQmC,EAAkBpD,UAC1B4D,YAAY,EACZC,UAAU,IAEZlC,EAAkB4B,KAAK,CACrBtC,OAAQmB,IACRwB,YAAY,EACZC,UAAU,IA9Fa,YAkGvB7C,EAAOF,KAlGgB,kCAoGjBgD,YACJnE,EAAWE,MAAME,UADe,UAEhCiB,EAAOF,YAFyB,aAEhC,EAAaiD,KAtGQ,2CAmGlBC,EAnGkB,KAmGSC,EAnGT,eAyGPrB,EAAcvD,SAASF,WAAWyB,eAClDoD,GA1GuB,+CA6GvBpC,EA7GuB,UA8GfgB,EAAcsB,YAAYC,gBAAgBF,EAAS,CACvDhC,SAAU,CACR+B,4BACArE,WAAYA,EAAWoB,GACvBd,iBAAkB4C,EAClBX,MAAOjD,EAAae,UACpBoE,cAAetF,IAAYuF,cAAcC,UACzCC,KAAMzF,IAAY0F,oBAEpB3C,QAAS,KAvHU,yBA6GV0B,KA7GU,iDA6HpB,CACL5B,oBACAC,eACAC,UACAiB,mBAjIyB,4CAAH,8DAqIb2B,EAAa,uCAAG,WAC3BxF,EACAU,GAF2B,uBAAAP,EAAA,yDAItBO,EAJsB,iEASnByB,YAAczB,EAAWE,MAAME,UAAWd,EAAae,WATpC,UAQrBqB,EARqB,OAUzB,GAEI+B,EAAoBtE,IAAYuE,QAAQC,WAExCzB,EAAU,CAACuB,GACXxB,EAAe,CACnB4B,IAAMC,yBACJrB,IACAf,EACA+B,EAAkBpD,UAClBf,EAAae,UACb,GACA,IAIE2B,EAAoB,IAEtBhC,EAAWE,MAAMkD,aA5BM,wBA6BzBpB,EAAkB4B,KAAK,CACrBtC,OAAQtB,EAAWE,MAAMkD,aACzBa,YAAY,EACZC,UAAU,IAhCa,KAkCzBlC,EAlCyB,UAoCfP,YACJzB,EAAWE,MAAMkD,aACjB9D,EAAae,WAtCM,oBAwCrB,GAxCqB,MAmCvBiB,OAnCuB,KAyCvB2C,YAAY,EACZC,UAAU,GA1Ca,KAkCPN,KAlCO,+BA8C3BnD,QAAQC,IACN,MACAV,EAAWE,MAAMU,SAASmE,WAC1BzF,EAAae,UAAU0E,WACvBrD,EAAkBqD,YAlDO,UAoDrB/E,EAAWF,QAAQuC,IAAIyC,cAAc,CACzCxC,SAAU,CACRtC,WAAYA,EAAWoB,GACvBR,SAAUZ,EAAWE,MAAMU,SAC3BgC,MAAOtD,EAAae,UACpBqB,oBACA+B,kBAAmBA,EAAkBpD,UACrCD,UAAWJ,EAAWE,MAAME,UAC5BoC,aAAcC,IACdgC,cAAetF,IAAYuF,cAAcC,UACzCK,MAAO7F,IAAY8F,qBAGrBC,UAAW,CAAEC,aAAa,GAC1BnD,oBACAC,eACAC,YApEyB,4CAAH,wDAqFbkD,GAbQ,IAAIjG,IAAYC,UACnCiG,gDAGoB,IAAIlG,IAAYC,UACpCiG,gDAEoB,IAAIlG,IAAYC,UACpCiG,gDAEoB,IAAIlG,IAAYC,UACpCiG,gDAEyB,uCAAG,WAC5B1D,EACArC,EACAU,GAH4B,+BAAAP,EAAA,yDAKvBO,EALuB,wDASbA,EAAWqB,OAAOF,KATL,SAWWhB,EAErCH,EAAWE,MAAME,UACjBd,EAAae,WAda,0CAWrBC,EAXqB,KAWHC,EAXG,eAkBpBwB,EACJ/B,EAAWF,QACX6B,EACArC,EACAU,EACAM,GAvBwB,wBAiBpB0B,EAjBoB,EAiBpBA,kBAAmBC,EAjBC,EAiBDA,aAAcC,EAjBb,EAiBaA,QAASiB,EAjBtB,EAiBsBA,eAjBtB,UA2B1B1C,QAAQC,IAAI,SAAUyC,GA3BI,UA4BpBnD,EAAWF,QAAQuC,IAAI+C,eAC3B7E,EACA,IAAIpB,IAAUgE,GACd,CACEb,SAAU,CAERgD,UAAWtF,EAAWE,MAAMoF,UAC5BC,IAAKvF,EAAWE,MAAMqF,IACtBnF,UAAWJ,EAAWE,MAAME,UAC5BJ,WAAYA,EAAWoB,GAEvBR,SAAUZ,EAAWE,MAAMU,SAC3BgC,MAAOtD,EAAae,UACpBkC,MAAOjD,EAAae,UACpBoE,cAAetF,IAAYuF,cAAcC,UACzCC,KAAMzF,IAAY0F,mBAClBG,MAAO7F,IAAY8F,qBAGrBjD,oBACAE,UACAD,aAAcA,EAAaS,OAAS,EAAIT,OAAeU,IAjDjC,iEAqD1BlC,QAAQC,IAAR,MArD0B,gEAAH,6D,gPC7dd8E,EAAwB,IAAIrG,IAAYC,UACnD,+CAGIqG,EAA4B,IAAItG,IAAYC,UAChD,+CAsBWsG,EAAqC,uCAAG,WACnDC,EACAC,EACApG,GAHmD,iCAAAC,EAAA,4FAId,SACrCoG,EALmD,gCAO/CC,GAAO,EACPC,EAAoD,CACtDC,KAAM,EACNC,cAAe,EACfC,IAAK,MAEHC,EAAQ,EAbuC,SAcpC,IAAIC,QAAJ,uCAAY,WAAOC,EAASC,GAAhB,SAAA7G,EAAA,sDACzB8G,YAAW,WACLT,IAGJA,GAAO,EACPrF,QAAQC,IAAI,4BACZ4F,EAAO,CAAEV,SAAS,OACjBA,GARsB,UASjBE,IAAQD,EATS,uBAWvB,sBAAC,4BAAApG,EAAA,+EAEmCD,EAAWgH,qBAAqB,CAC9Db,IAHL,OAESc,EAFT,OAKGV,EAASU,GAAqBA,EAAkBC,MAAM,GACjDZ,IACEC,EAEMA,EAAOG,KAChBzF,QAAQC,IAAI,iBAAkBiF,EAAMI,GACpCD,GAAO,EACPQ,EAAOP,EAAOG,MACJH,EAAOE,eAGjBxF,QAAQC,IAAI,wBAAyBiF,EAAMI,GAC3CD,GAAO,EACPO,EAAQN,IAJRtF,QAAQC,IAAI,4BAA6BiF,EAAMI,GAN/CtF,QAAQC,IAAI,uBAAwBiF,EAAMI,IARjD,gDAsBQD,GACHrF,QAAQC,IAAI,8BAA+BiF,EAA3C,MAvBL,wDAAD,GAXuB,SAsCjBgB,EAAM,KAtCW,iEAAZ,yDAdoC,cAcnDZ,EAdmD,OAyD/CvG,EAAWoH,wBAAwBT,IACrC3G,EAAWqH,wBAAwBV,GAErCL,GAAO,EACPrF,QAAQC,IAAI,mBAAoBqF,GA7DmB,kBA8D5CA,GA9D4C,4CAAH,0DAiE/B3D,EAA0C,SAC3D0E,EACAvE,EACAwE,EACAC,GAEA,IAAMC,EAAO,CACX,CAAE3F,OAAQiB,EAAO2B,UAAU,EAAMD,YAAY,GAC7C,CAAE3C,OAAQwF,EAAwB5C,UAAU,EAAOD,YAAY,GAC/D,CAAE3C,OAAQyF,EAAe7C,UAAU,EAAOD,YAAY,GACtD,CAAE3C,OAAQ0F,EAAqB9C,UAAU,EAAOD,YAAY,GAC5D,CACE3C,OAAQnC,IAAYuF,cAAcC,UAClCT,UAAU,EACVD,YAAY,GAEd,CAAE3C,OAAQmB,IAAkByB,UAAU,EAAOD,YAAY,GACzD,CACE3C,OAAQnC,IAAY0F,mBACpBX,UAAU,EACVD,YAAY,IAGhB,OAAO,IAAI9E,IAAY+H,uBAAuB,CAC5CD,OACAtC,UAAWwC,IACXhG,KAAM2B,EAAOC,KAAK,OAITqE,EAAoB,uCAAG,WAClC9H,EACA+H,EACA7H,GAHkC,2BAAAC,EAAA,6DAK5BC,EAAW,IAAIP,IAAgBK,EAAYF,EAAc,CAC7DK,oBAAqB,WANW,SAShBR,IAAeS,SAAS4F,EAAuB9F,GAT/B,cAS5BG,EAT4B,OAW5BC,EAAU,IAAIX,IAAeU,EAAK2F,EAAuB9F,GAX7B,SAaTI,EAAQC,QAAQuH,aAAarH,MAAMoH,GAb1B,cAa5BnH,EAb4B,OAc5BqH,EAAiBrH,EAAMiB,KAAKoG,eAAezF,WAC3C0F,EAAgBtH,EAAMsH,cAAc1F,WACpC2F,EAAiBF,EAAiBC,EAhBN,kBAkB3B,CACLpG,GAAIiG,EACJvH,UACAI,MAAO,CACLqH,iBACAC,gBACAC,iBACAC,UAA8B,IAAnBD,EACXE,SAAUzH,EAAMiB,KAAKyG,WAAW9F,YAAa,IAAI+F,MAAOC,UAAY,IACpEF,WAAY1H,EAAMiB,KAAKyG,WACvBhH,SAAUV,EAAM6H,OAChB3H,UAAWF,EAAME,UACjB4H,OAAQ9H,EAAM8H,OACdC,MAAO/H,EAAMiB,KAAK8G,SA/BY,4CAAH,0DAoC3BC,EAAgB,uCAAG,WACvBC,GADuB,SAAA1I,EAAA,sEAIfN,IAAYC,UAAUyD,mBAC1B,CACEC,EAAOC,KAAK,YACZ0C,EAA0BzC,WAC1BmF,EAAKnF,WACLF,EAAOC,KAAK,YAEd0C,GAXmB,uCAarB,IAbqB,2CAAH,sDAgBhB2C,EAAW,uCAAG,WAClBD,GADkB,SAAA1I,EAAA,sEAIVN,IAAYC,UAAUyD,mBAC1B,CACEC,EAAOC,KAAK,YACZ0C,EAA0BzC,WAC1BmF,EAAKnF,YAEPyC,GAVc,uCAYhB,IAZgB,2CAAH,sDAeJ4C,EAAY,uCAAG,WAC1Bf,EACA/E,GAF0B,iCAAA9C,EAAA,6DAIpB0I,EAAOhJ,IAAYuE,QAAQC,WAJP,SAOlBlC,YAAc0G,EAAK9H,UAAWkC,GAPZ,cAMpB+F,EANoB,OAQxB,GARwB,SAWlB7G,YAAc6F,EAAapH,MAAME,UAAWmC,GAX1B,cAUpBgG,EAVoB,OAYxB,GAEIC,EAAsBlB,EAAalG,GAEnCY,EAAoB,GACpBE,EAAiC,CAACiG,GAjBd,KAmBxBhJ,IAAYuF,cAnBY,KAoBVnC,EApBU,KAqBJ4F,EAAK9H,UArBD,KAsBfoI,IAAWC,KAtBI,UAwBdpB,EAAaxH,QAAQJ,SAASF,WAAWmJ,kCAC7CF,IAAWC,MAzBO,gCA2BXjG,IA3BW,MAoBtBmG,WApBsB,KAqBtBC,iBArBsB,KAsBtBC,MAtBsB,KAuBtBC,SAvBsB,KA2BtBpE,UA3BsB,gBAmBEqE,cAnBF,qBA6BxBnF,IAAMoF,0BACJxG,IACA0F,EAAK9H,UACL,EACAkC,EACAA,GAlCsB,KAoCxBH,EACEkG,EACA/F,EACAA,EACA4F,EAAK9H,WAxCiB,MA0CxBwD,IAAMqF,wBACJzG,IACA0F,EAAK9H,UACLiI,EACA/F,EACA,GACA,GA9BEN,EAlBoB,uBAqDtBqF,EAAapH,MAAME,YACfqD,EAAoBtE,IAAYuE,QAAQC,WAE9CzB,EAAQ0B,KAAKH,GACbzB,EAAkB4B,KAAK,CACrBtC,OAAQiH,EACRtE,YAAY,EACZC,UAAU,IAEZlC,EAAkB4B,KAAK,CACrBtC,OAAQmC,EAAkBpD,UAC1B4D,YAAY,EACZC,UAAU,IAGZjC,EAAa2B,KACXC,IAAMC,yBACJrB,IACA8F,EACA9E,EAAkBpD,UAClBkC,EACA,GACA+E,EAAapH,MAAM+H,MAAMnG,cA3EL,UA+EIsG,EAAYD,EAAK9H,WA/ErB,eA+EpB8I,EA/EoB,iBAgFEjB,EAAiBC,EAAK9H,WAhFxB,eAgFpB+I,EAhFoB,aAkF1BnH,EAlF0B,UAmFlBqF,EAAaxH,QAAQyE,YAAY8E,QAAQ,CAC7C/G,SAAU,CACR0F,OAAQV,EAAapH,MAAM8H,OAC3BV,aAAckB,EACdjG,QACAwF,OAAQT,EAAapH,MAAMU,SAC3BuH,KAAMA,EAAK9H,UACXiJ,SAAUH,EACVC,gBACAG,cAAehH,EACfiH,gBAAiBjH,EACjBkH,qBAAsBhE,EACtBjD,aAAcC,IACdgC,cAAeC,gBAAcC,UAC7BC,KAAMzF,IAAY0F,mBAClBG,MAAO7F,IAAY8F,qBAErBjD,kBACEA,EAAkBU,OAAS,EAAIV,OAAoBW,IArG/B,kCAkFbiB,KAlFa,sCAqHhB8F,YACJpC,EAAaxH,QAAQJ,SAASF,WAC9B8H,EAAaxH,QAAQJ,SAASqI,OAC9B9F,EACAC,GAzHoB,wCA2HtByD,MA3HsB,oCA6HxBlF,QAAQC,IAAR,OA7HwB,iCA+HnB,KA/HmB,2DAAH,wDAsInBiG,EAAQ,SAACgD,GACb,OAAO,IAAIvD,SAAQ,SAAAC,GAAO,OAAIE,WAAWF,EAASsD,S,oUCtUvCC,EAAyB,IAAIzK,IAAYC,UACpD,gDAGWyK,EAAS,SAACnD,GACrB,GAAKA,EAIL,OAAO,IAAImB,KAAwB,IAAnBnB,EAAM5E,aAGlBgI,EAAiB,IAAIC,KAAKC,aAAa,QAAS,CACpDC,MAAO,UACPC,sBAAuB,EACvBC,sBAAuB,IAGZC,EAAe,CAC1BC,OAAQ,SAACC,GACP,OAAKA,EAIER,EAAeO,OAAOC,GAHpB,MAKXC,SAAU,SAACD,GACT,GAAKA,EAIL,OAAOA,EAAIxI,WAAayB,qBAIf4D,EACX,IAAIhI,IAAYC,UAAU,gDAEf+E,EAA4B,uCAAG,WAC1C/D,EACAgE,GAF0C,SAAA3E,EAAA,sEAI7BN,IAAYC,UAAUyD,mBACjC,CACEC,EAAOC,KAAK,eACZ3C,EAAU4C,WACVoB,EAAIoG,YAAY1H,EAAQ,KAAM,IAEhC8G,GAVwC,mFAAH,wDAc5BnI,EAAa,uCAAG,WAC3B0G,EACAvF,GAF2B,SAAAnD,EAAA,sEAIdN,IAAYC,UAAUyD,mBACjC,CAACD,EAAMI,WAAYP,IAAiBO,WAAYmF,EAAKnF,YACrDmE,GANyB,mFAAH,wDAoBnB,SAAS/E,EACd0E,EACAvE,EACAwE,EACAC,GAEA,IAAMC,EAAO,CACX,CACE3F,OAAQiB,EACR2B,UAAU,EACVD,YAAY,GAEd,CACE3C,OAAQwF,EACR5C,UAAU,EACVD,YAAY,GAEd,CACE3C,OAAQyF,EACR7C,UAAU,EACVD,YAAY,GAEd,CACE3C,OAAQ0F,EACR9C,UAAU,EACVD,YAAY,GAEd,CACE3C,OAAQoD,gBAAcC,UACtBT,UAAU,EACVD,YAAY,GAEd,CACE3C,OAAQmB,IACRyB,UAAU,EACVD,YAAY,GAEd,CACE3C,OAAQuD,qBACRX,UAAU,EACVD,YAAY,IAGhB,OAAO,IAAIiD,yBAAuB,CAChCD,OACAtC,UAAWwC,EACXhG,KAAM2B,EAAOC,KAAK,S,+FC1EV0H,E,yDAAAA,O,2BAAAA,I,uBAAAA,I,kCAAAA,M,KAoEL,IAkKMf,EAAwB,uCAAG,WACtClK,EACAuI,EACA9F,EACAC,GAJsC,+CAAAzC,EAAA,yDAKtCiL,EALsC,+BAKb,eACzBC,EANsC,gCAOtCC,EAPsC,uBAQtCC,EARsC,uBAUjC9C,EAAO1H,UAV0B,sBAUT,IAAIyK,0BAVK,UAYlCC,EAAc,IAAIC,cACtB/I,EAAagJ,SAAQ,SAAA1G,GAAW,OAAIwG,EAAYG,IAAI3G,MAbd,KAepCqG,EAfoC,uCAepBpL,EAAW2L,mBAAmBT,GAfV,+BActCK,EAAYK,gBAd0B,KAgBpCC,UAEEV,GACF,EAAAI,GAAYO,WAAZ,oBAA0BpJ,EAAQqJ,KAAI,SAAAC,GAAC,OAAIA,EAAEnL,gBAE7C,EAAA0K,GAAYO,WAAZ,SAEEvD,EAAO1H,WAFT,mBAGK6B,EAAQqJ,KAAI,SAAAC,GAAC,OAAIA,EAAEnL,gBAItB6B,EAAQQ,OAAS,IACnB,EAAAqI,GAAYU,YAAZ,oBAA2BvJ,IAExByI,EA/BiC,kCAgChB5C,EAAO2D,gBAAgBX,GAhCP,QAgCpCA,EAhCoC,sBAmClCF,GACFA,IApCoC,UAuCTc,EAAsB,CACjDnM,aACAoM,kBAAmBb,IAzCiB,wBAuC9BpF,EAvC8B,EAuC9BA,KAAMK,EAvCwB,EAuCxBA,KAvCwB,kBA4C/B,CAAEL,OAAMK,SA5CuB,4CAAH,4DA+CxB6F,EAAY,WACvB,OAAO,IAAIhE,MAAOC,UAAY,KAG1BgE,EAAkB,KAEjB,SAAeH,EAAtB,kC,4CAAO,qDAAAlM,EAAA,6DACLmM,EADK,EACLA,kBACApM,EAFK,EAELA,WAFK,IAGLoG,eAHK,MAGKkG,EAHL,EAYCC,EAAiBH,EAAkBI,YACnCC,EAAYJ,IACd7F,EAAO,EAdN,SAeoCxG,EAAW0M,mBAClDH,EACA,CACEI,eAAe,IAlBd,cAeCxG,EAfD,OAsBLlF,QAAQC,IAAI,oCAAqCiF,GAE7CG,GAAO,EACX,sBAAC,sBAAArG,EAAA,yDACSqG,KAAQ+F,IAAcI,EAAYrG,GAD3C,uBAEGpG,EAAW0M,mBAAmBH,EAAgB,CAC5CI,eAAe,IAHpB,SAKSxF,EAAM,KALf,gEAAD,GAzBK,oBAkCwBjB,EACzBC,EACAC,EACApG,EACA,UACA,GAvCC,WAkCG4M,EAlCH,8BA2CK,IAAIC,MAAM,kDA3Cf,YA6CCD,EAAalG,IA7Cd,uBA8CDzF,QAAQ6L,MAAMF,EAAalG,KACrB,IAAImG,MAAM,gDA/Cf,QAkDHrG,GAAmB,OAAZoG,QAAY,IAAZA,OAAA,EAAAA,EAAcpG,OAAQ,EAlD1B,sDAoDHvF,QAAQ6L,MAAM,uBAAd,OACI,KAAI1G,QArDL,uBAsDK,IAAIyG,MAAM,kDAtDf,eAwDCE,EAAsD,KAxDvD,oBA2DOC,EAAoBhN,EAAYoM,EAAmB,UA3D1D,QA0DDW,EA1DC,OA4DC7F,MA5DD,+DA8DC6F,IAAkBA,EAAerG,IA9DlC,qBA+DGqG,EAAeE,KA/DlB,iBAgEUC,EAAIH,EAAeE,KAAK/J,OAAS,EAhE3C,aAgE8CgK,GAAK,GAhEnD,sBAiESC,EAAOJ,EAAeE,KAAKC,IACxBE,WAAW,iBAlEvB,uBAmEW,IAAIP,MACR,uBAAyBM,EAAKE,MAAM,gBAAgBnK,SApE3D,UAgEwDgK,EAhExD,8BAyEK,IAAIL,MAAMS,KAAKC,UAAUR,EAAerG,MAzE7C,yBA6EHJ,GAAO,EA7EJ,4BAgFLrF,QAAQC,IAAI,UAAWiF,EAAMkG,IAAcI,GAhFtC,kBAiFE,CAAEtG,OAAMK,SAjFV,0E,+BAoFQwG,E,kFAAf,WACEhN,EACAuL,EACAL,GAHF,uBAAAjL,EAAA,sEAMsCD,EAAWwN,iBAE7CxN,EAAWyN,0BARf,cAMElC,EAAYK,gBANd,OAWQ8B,EAAWnC,EAAYoC,mBAEvBC,EAAkBrC,EAAYsC,WAAWH,GACzCI,EAAqBF,EAAgBG,SAAS,UAE9CC,EAAO,CAACF,EADM,CAAEG,SAAU,SAAU/C,eAf5C,UAmBoBlL,EAAWkO,YAAY,sBAAuBF,GAnBlE,aAmBQG,EAnBR,QAoBUrB,MApBV,uBAqBU,IAAID,MAAM,mCAAqCsB,EAAIrB,MAAMsB,SArBnE,iCAuBSD,EAAIE,QAvBb,6C,+BA0BenI,E,kFAAf,WACEC,EACAC,EACApG,GAHF,mCAAAC,EAAA,6DAIEiL,EAJF,+BAI2B,SACzB7E,EALF,gCAOMC,GAAO,EACPC,EAAwC,CAC1CC,KAAM,EACNC,cAAe,EACfC,IAAK,MAEHC,EAAQ,EAbd,SAciB,IAAIC,QAAJ,uCAAY,WAAOC,EAASC,GAAhB,SAAA7G,EAAA,sDACzB8G,YAAW,WACLT,IAGJA,GAAO,EACPrF,QAAQC,IAAI,4BACZ4F,EAAO,CAAEV,SAAS,OACjBA,GACH,IACEO,EAAQ3G,EAAWsO,YACjBnI,GACA,SAACkI,EAAQE,GACPjI,GAAO,EACPC,EAAS,CACPG,IAAK2H,EAAO3H,IACZF,KAAM+H,EAAQ/H,KACdC,cAAe,GAEb4H,EAAO3H,KACTzF,QAAQC,IAAI,yBAA0BmN,EAAO3H,KAC7CI,EAAOP,KAEPtF,QAAQC,IAAI,yBAA0BmN,GACtCxH,EAAQN,MAGZ2E,GAEF,MAAOsD,GACPlI,GAAO,EACPrF,QAAQ6L,MAAM,oBAAqB3G,EAAMqI,GA/BlB,UAiCjBlI,IAAQD,EAjCS,uBAmCvB,sBAAC,4BAAApG,EAAA,+EAEmCD,EAAWgH,qBAAqB,CAC9Db,IAHL,OAESc,EAFT,OAKGV,EAASU,GAAqBA,EAAkBC,MAAM,GACjDZ,IACEC,EAEMA,EAAOG,KAChBzF,QAAQC,IAAI,iBAAkBiF,EAAMI,GACpCD,GAAO,EACPQ,EAAOP,EAAOG,MACJH,EAAOE,eAGjBxF,QAAQC,IAAI,wBAAyBiF,EAAMI,GAC3CD,GAAO,EACPO,EAAQN,IAJRtF,QAAQC,IAAI,4BAA6BiF,EAAMI,GAN/CtF,QAAQC,IAAI,uBAAwBiF,EAAMI,IARjD,gDAsBQD,GACHrF,QAAQC,IAAI,8BAA+BiF,EAA3C,MAvBL,wDAAD,GAnCuB,SA8DjBgB,EAAM,KA9DW,iEAAZ,yDAdjB,cAcEZ,EAdF,OAiFMvG,EAAWoH,wBAAwBT,IACrC3G,EAAWqH,wBAAwBV,GACrCL,GAAO,EACPrF,QAAQC,IAAI,mBAAoBqF,GApFlC,kBAqFSA,GArFT,4C,wBAuFO,SAASY,EAAMgD,GACpB,OAAO,IAAIvD,SAAQ,SAAAC,GAAO,OAAIE,WAAWF,EAASsD,Q,0dCnT/CsE,E,uOC9NCC,EAAYC,aAAW,SAACC,GAAD,OAC3BC,YAAa,CACXC,KAAM,CACJC,QAAS,OACTC,QAASJ,EAAMK,QAAQ,GACvB,QAAS,CACPC,OAAQN,EAAMK,QAAQ,IACtBE,YAAa,EACbC,MAAOR,EAAMK,QAAQ,GACrBI,OAAQT,EAAMK,QAAQ,GACtBF,QAAS,OACTO,cAAe,SACfC,aAAc,SACdC,WAAY,SACZC,eAAgB,SAChBC,WAAY,UACZC,MAAO,QACPC,aAAc,EACdC,SAAU,KAGdvJ,KAAM,CACJyI,QAAS,OACTG,OAAQN,EAAMK,QAAQ,GACtBE,YAAa,EACbH,QAASJ,EAAMK,QAAQ,GACvBK,cAAe,SACfC,aAAc,SACdC,WAAY,SACZC,eAAgB,SAChBC,WAAY,UACZC,MAAO,QACPC,aAAc,EACdE,WAAY,OACZD,SAAU,IAEZE,KAAM,CACJD,WAAY,OACZD,SAAU,SAuBHG,EAAgD,SAAC,GAOvD,IANLC,EAMI,EANJA,KACA1J,EAKI,EALJA,OACAkE,EAII,EAJJA,MACAyF,EAGI,EAHJA,MACAC,EAEI,EAFJA,IACAC,EACI,EADJA,WAEMC,EAAU3B,IAEhB,EAA8B4B,sBAASJ,GAASC,GAAOF,IAAOC,EAAM5H,UAAYD,KAAKkI,MAAQ,GAA7F,mBAAOC,EAAP,KAEMC,GAFN,KAEwB,SAAC,GAAmE,IAAjEC,EAAgE,EAAhEA,KAAMC,EAA0D,EAA1DA,MAAOC,EAAmD,EAAnDA,QAASC,EAA0C,EAA1CA,QAE/C,OADAF,GAAgB,GAAPD,EADgF,EAAjCI,UAG/CvK,EAAS,sBAAMwK,UAAWV,EAAQ/J,KAAzB,SAAkCC,IAAiB,KAGjE,sBAAKwK,UAAWV,EAAQvB,KAAMrE,MAAOA,EAArC,UACG+F,GAAW,cAACQ,EAAA,EAAD,CAAOC,UAAW,EAAlB,SACV,sBAAMF,UAAWV,EAAQN,KAAzB,iBAIF,eAACiB,EAAA,EAAD,CAAOC,UAAW,EAAlB,UACE,sBAAMF,UAAWV,EAAQN,KAAzB,SACGY,EAAQ,GAAR,WAAiBA,GAAUA,IAE9B,0CAEF,eAACK,EAAA,EAAD,CAAOC,UAAW,EAAlB,UACE,sBAAMF,UAAWV,EAAQN,KAAzB,SACGa,EAAU,GAAV,WAAmBA,GAAYA,IAElC,2CAEF,eAACI,EAAA,EAAD,CAAOC,UAAW,EAAlB,UACE,sBAAMF,UAAWV,EAAQN,KAAzB,SACGc,EAAU,GAAV,WAAmBA,GAAYA,IAElC,gDAkBV,OAXIZ,GAAQC,GAASC,GACfK,GACD,IASDP,EAEA,cAAC,IAAD,CACEA,KAAMA,EACNG,WAAYA,EACZc,SAAUT,IAIP,M,0GDrFLU,EAAgBC,YAAOC,qBAAPD,CAAH,qOAWbE,EAAgBF,IAAOG,IAAV,0BAEbC,EAAaJ,YAAOK,IAAPL,CAAH,qOAWVM,EAAoB,SAAC9C,GAAD,OACxBC,YAAa,CACXC,KAAM,CACJI,OAAQ,EACRF,QAASJ,EAAMK,QAAQ,IAEzB0C,YAAa,CACXC,SAAU,WACVC,MAAOjD,EAAMK,QAAQ,GACrB6C,IAAKlD,EAAMK,QAAQ,GACnBU,MAAOf,EAAMmD,QAAQC,KAAK,SAI1BC,EAAcb,YAAOc,IAAPd,CAAe,CACjCzB,MAAO,UACPN,OAAQ,EACR,QAAS,CACPA,OAAQ,GAEV,qBAAsB,CACpB8C,OAAQ,OACR9C,OAAQ,GAEV,qBAAsB,CACpBA,OAAQ,GACRD,MAAO,GACPgD,WAAY,GACZ1C,WAAY,oDACZyC,OAAQ,yBACR,qDAAsD,CACpDE,UAAW,WAEb,WAAY,CACVtD,QAAS,SAGb,0BAA2B,CACzB,QAAS,CACPW,WAAY,qDAEd4C,WAAY,IACZzC,SAAU,GACVb,QAAS,EACTI,MAAO,GACPC,OAAQ,GACRkD,WAAY,KAIKnB,YAAOc,IAAPd,CAAe,CAClCzB,MAAO,UACPN,OAAQ,EACR,QAAS,CACPA,OAAQ,GAEV,qBAAsB,CACpB8C,OAAQ,OACR9C,OAAQ,GAEV,qBAAsB,CACpBA,OAAQ,GACRD,MAAO,GACPgD,WAAY,GACZ1C,WAAY,oDACZyC,OAAQ,yBACR,qDAAsD,CACpDE,UAAW,WAEb,WAAY,CACVtD,QAAS,SAGb,0BAA2B,CACzB,QAAS,CACPW,WAAY,qDAEd4C,WAAY,IACZzC,SAAU,GACVb,QAAS,EACTI,MAAO,GACPC,OAAQ,GACRkD,WAAY,KAGKnB,YAAOc,IAAPd,CAAe,CAClCzB,MAAO,UACPN,OAAQ,EACR,QAAS,CACPA,OAAQ,GAEV,qBAAsB,CACpB8C,OAAQ,OACR9C,OAAQ,GAEV,qBAAsB,CACpBA,OAAQ,GACRD,MAAO,GACPgD,WAAY,GACZ1C,WAAY,oDACZyC,OAAQ,yBACR,qDAAsD,CACpDE,UAAW,WAEb,WAAY,CACVtD,QAAS,SAGb,0BAA2B,CACzB,QAAS,CACPW,WAAY,qDAEd4C,WAAY,IACZzC,SAAU,GACVb,QAAS,EACTI,MAAO,GACPC,OAAQ,GACRkD,WAAY,KAGKnB,YAAOc,IAAPd,CAAe,CAClCzB,MAAO,UACPN,OAAQ,EACR,QAAS,CACPA,OAAQ,GAEV,qBAAsB,CACpB8C,OAAQ,OACR9C,OAAQ,GAEV,qBAAsB,CACpBA,OAAQ,GACRD,MAAO,GACPgD,WAAY,GACZ1C,WAAY,oDACZyC,OAAQ,yBACR,qDAAsD,CACpDE,UAAW,WAEb,WAAY,CACVtD,QAAS,SAGb,0BAA2B,CACzB,QAAS,CACPW,WAAY,qDAEd4C,WAAY,IACZzC,SAAU,GACVb,QAAS,EACTI,MAAO,GACPC,OAAQ,GACRkD,WAAY,M,SAGX9D,O,mBAAAA,I,mBAAAA,I,mBAAAA,I,qBAAAA,I,mBAAAA,I,mBAAAA,I,sBAAAA,M,KAUL,IAAM+D,EAAS,SAACC,GAMd,IAAQC,EAAkCD,EAAlCC,UAAWC,EAAuBF,EAAvBE,KAAM1C,EAAiBwC,EAAjBxC,KAAM1J,EAAWkM,EAAXlM,OAC/B,OACE,eAACqM,EAAA,EAAD,CAAMC,WAAS,EAACpD,eAAe,SAA/B,UACE,eAACmD,EAAA,EAAD,CAAME,GAAI,EAAGrD,eAAe,SAASsD,UAAU,SAA/C,UACE,cAACC,EAAA,EAAD,CAAYC,QAAQ,KAAKxI,MAAO,CAAEqF,WAAY,KAA9C,SACG4C,IAEH,cAACM,EAAA,EAAD,CAAYC,QAAQ,QAAQtD,MAAM,gBAAlC,SACGgD,OAGL,cAACC,EAAA,EAAD,CAAME,GAAI,EAAGD,WAAS,EAACpD,eAAe,WAAtC,SACE,cAAC,EAAD,CACEQ,KAAM5F,YAAO4F,GACbxF,MAAO,CAAEgF,eAAgB,YACzBlJ,OAAQA,GAAU,6EAMxB2M,GAAQ,EAwBZ,IAMMC,EAAW,SACf3S,EACA4S,GACa,IAAD,MACZ,GAAIA,EAAoB,EAAG,OAAO,EAClC,KACE,OAAC5S,QAAD,IAACA,OAAD,EAACA,EAAYuB,QAAQJ,SACrB,OAACnB,QAAD,IAACA,OAAD,EAACA,EAAYuB,QAAQJ,KAAKuB,WAC1B,OAAC1C,QAAD,IAACA,GAAD,UAACA,EAAYqB,OAAOF,YAApB,aAAC,EAAyBiD,QAC1B,OAACpE,QAAD,IAACA,OAAD,EAACA,EAAYE,MAAM2S,mBAEnB,OAAO,EAGT,IAAMC,EACJ9S,EAAWuB,QAAQJ,KApBrB,GAsBMkC,KAAK0P,OAAM,UAAA/S,EAAWqB,OAAOF,YAAlB,eAAwBiD,IAAItC,YAAa,IAGpDkR,EAAoB,GAAK,UAAAhT,EAAWqB,OAAOF,YAAlB,eAAwBiD,IAAItC,YAAa,EAElE6Q,EAAWG,EADJzP,KAAK4P,IAAI,EAAGD,GAEzB,OAAOL,EAAW,GA80BLO,GA30BF,SAACjB,GAAsB,IAAD,oEACjC,GAAkDnC,mBAAiB,GAAnE,qBAAO8C,GAAP,MAA0BO,GAA1B,MACA,GAA4CrD,mBAAwB,MAApE,qBAAuBsD,IAAvB,aAEA,GAAkCtD,oBAAS,GAA3C,qBAAOuD,GAAP,MAAkBC,GAAlB,MACA,GAAsCxD,mBAAS,GAA/C,qBAAOyD,GAAP,MAAoBC,GAApB,MACF,GAAwC1D,mBAAS,GAAjD,qBACA,IADA,YACwCA,mBAAS,IAAjD,qBACA,IADA,YACwCA,mBAAS,IAAjD,iCACAvJ,WAAU,sBAAC,sBAAA9G,EAAA,sDACLiT,IAEJc,GAAeC,IACjBf,GAAQ,GAJG,2CAMR,KACD,IAAM3K,GAAS2L,sBAETpU,GAAeqU,mBAAQ,WAC3B,GACG5L,IACAA,GAAO1H,WACP0H,GAAO6L,qBACP7L,GAAO2D,gBAKV,MAAO,CACLrL,UAAW0H,GAAO1H,UAClBuT,oBAAqB7L,GAAO6L,oBAC5BlI,gBAAiB3D,GAAO2D,mBAEzB,CAAC3D,KAEJ,GAAoC+H,mBAAqB,CACvD+D,MAAM,EACNjG,QAAS,GACTkG,cAAUnR,IAHZ,qBAAOoR,GAAP,MAAmBC,GAAnB,MAMA,GAAoClE,qBAApC,qBAAO9P,GAAP,MAAmBiU,GAAnB,MACA,GAAwCnE,qBAAxC,qBAAOxI,GAAP,MAAqB4M,GAArB,MACA,GAAkCpE,oBAAS,GAA3C,qBAAOqE,GAAP,MAAkBC,GAAlB,MACA,GAAsDtE,oBAAS,GAA/D,qBAAOuE,GAAP,MAA4BC,GAA5B,MACA,GAAkDxE,oBAAS,GAA3D,qBAAOyE,GAAP,MAA0BC,GAA1B,MAEMC,GAAM,uCAAG,kCAAAhV,EAAA,kEAEX6T,IAAa,KACTvL,GAAO2M,YAAP,OAAoBpN,SAApB,IAAoBA,QAApB,EAAoBA,GAAcxH,UAAWiI,GAAO1H,WAH7C,sBAKG,OAAVL,SAAU,IAAVA,IAAA,UAAAA,GAAYqB,OAAOF,YAAnB,eAAyBjB,MAAMyU,aAC/BhC,EAAS3S,GAAY4S,IANd,gCAQDgC,KARC,uBAWcvM,YAAaf,GAAcS,GAAO1H,WAXhD,cAWHwU,EAXG,iBAaYnP,YACnBmP,EACA5C,EAAM6C,UACN7C,EAAMzS,WACN,gBACA,GAlBO,SAqBL,QAREuG,EAbG,cAqBL,IAACA,OAAD,EAACA,EAAQG,KAOX8N,GAAc,CACZH,MAAM,EACNjG,QAAS,iCACTkG,SAAU,UATZE,GAAc,CACZH,MAAM,EACNjG,QAAS,mCACTkG,SAAU,YAzBL,0DAqCPlG,EAAU,KAAMmH,KAAO,oCACtB,KAAMA,IAUU,MAAf,KAAMC,MACRpH,EAAO,YACPqH,OAAOC,SAASC,UACQ,MAAf,KAAMH,OACfpH,EAAO,sCAbJ,KAAMA,QAEA,KAAMA,QAAQwH,QAAQ,WACtB,KAAMxH,QAAQwH,QAAQ,SAC/BxH,EAAO,YACE,KAAMA,QAAQwH,QAAQ,WAC/BxH,EAAO,yDALPA,EAAU,yCAgBdoG,GAAc,CACZH,MAAM,EACNjG,UACAkG,SAAU,UA3DD,yBA8DXR,IAAa,GA9DF,6EAAH,qDAkEZ+B,qBAAU,WACR,sBAAC,kCAAA5V,EAAA,yDACMH,GADN,0EAMyB2S,EAAMzS,WAAWmB,WACrCrB,GAAae,WAPlB,cAMSiV,EANT,OASGlC,GAAkBkC,GATrB,SAWuBjW,YAClBC,GACA2S,EAAM1S,aACN0S,EAAMzS,YAdX,UAWSU,EAXT,OAiBG+T,GAAc/T,GAjBjB,WAoBSA,EAAMA,MAAME,UApBrB,6BAsBe6R,EAAMzS,WAtBrB,UAwBmBiC,YACJvB,EAAMA,MAAME,UACZd,GAAae,WA1B5B,2BA4Ba,GA5Bb,eAsBgCkV,uBAtBhC,yBAqBa3C,EArBb,QA+B6BlM,OACpByM,GAAqBP,EAAkBlM,MAAM8O,UAAY,GAhClE,2DAoCK/U,QAAQC,IAAI,6CACZD,QAAQC,IAAR,MArCL,0DAyCGD,QAAQC,IAAI,qCACZD,QAAQC,IAAR,MA1CH,YA4CKuR,EAAM5K,eA5CX,4CA8CwBD,YACjB9H,GACA2S,EAAM5K,eACN4K,EAAMzS,YAjDb,QA8CWiW,EA9CX,OAmDKvB,GAAgBuB,GAnDrB,mDAqDKhV,QAAQC,IAAI,uCACZD,QAAQC,IAAR,MAtDL,gCAyDGD,QAAQC,IAAI,+CAzDf,yEAAD,KA4DC,CACDpB,GACA2S,EAAM5K,eACN4K,EAAMzS,WACNyS,EAAM1S,eAEO,UAAIsK,YAAM,OAAC7J,SAAD,IAACA,QAAD,EAACA,GAAYE,MAAMiB,KAAKuU,oBAAlC,OAAI,EAA4C5N,UAAjE,IACQ2L,GAAMrJ,IAAaG,SAAb,OAAsBvK,SAAtB,IAAsBA,QAAtB,EAAsBA,GAAYE,MAAMiB,KAAKqC,iBACnDmS,GAAMvL,IAAaG,SAAb,OAAsBvK,SAAtB,IAAsBA,QAAtB,EAAsBA,GAAYE,MAAMiB,KAAKwU,KACnDC,GAAMxL,IAAaG,SAAb,OAAsBvK,SAAtB,IAAsBA,QAAtB,EAAsBA,GAAYE,MAAMiB,KAAK0U,eACnDC,GAAO1L,IAAaG,SAAb,OAAsBvK,SAAtB,IAAsBA,QAAtB,EAAsBA,GAAYE,MAAMiB,KAAK4U,UACpDC,GAAS5L,IAAaG,SAAb,OAAsBvK,SAAtB,IAAsBA,QAAtB,EAAsBA,GAAYE,MAAM2B,oBAIfc,IAA1B,OAAV3C,SAAU,IAAVA,QAAA,EAAAA,GAAYE,MAAM+V,iBAEd7L,IAAaG,SAAb,OAAsBvK,SAAtB,IAAsBA,QAAtB,EAAsBA,GAAYE,MAAM+V,gBAKhD,IAAMC,GAAQ,CAGZ,CACExP,MAAO+M,IAAO,EACd0C,MAAM,GAAD,OAAM1C,GAAN,SAOP,CACE/M,MAAOkP,IAAO,EACdO,MAAM,GAAD,OAAKP,GAAL,UAEPQ,QAAO,SAAAC,GAAC,YAAU1T,IAAN0T,GAA+B,IAAZA,EAAE3P,SAE7B4P,GAAS,uCAAG,sBAAA7W,EAAA,yDACXH,GADW,wDAIhBmB,QAAQC,IAAI,WACZ4S,IAAa,GALG,kBAURlO,YAAemO,GAAajU,GAAcU,IAVlC,OAYdsT,IAAa,GACbU,GAAc,CACZH,MAAM,EACNjG,QAAQ,wBAAD,QACK,OAAV5N,SAAU,IAAVA,QAAA,EAAAA,GAAYqB,OAAOF,MAAO,UAAY,WADjC,KAGP2S,SAAU,YAlBE,kDAqBdrT,QAAQC,IAAR,MACA4S,IAAa,GACbU,GAAc,CACZH,MAAM,EACNjG,QAAS,wBACTkG,SAAU,UA1BE,0DAAH,qDA8BTyC,GAAW,uCAAG,sBAAA9W,EAAA,yDACbH,GADa,wDAKlBmB,QAAQC,IAAI,UALM,SAOhB4S,IAAa,GAPG,SAQVxO,YAAcxF,GAAcU,IARlB,OAShBsT,IAAa,GACbU,GAAc,CACZH,MAAM,EACNjG,QACE,+EACFkG,SAAU,YAdI,kDAiBhBrT,QAAQC,IAAR,MACA4S,IAAa,GACbU,GAAc,CACZH,MAAM,EACNjG,QAAS,wBACTkG,SAAU,UAtBI,0DAAH,qDA0BX0C,GAAc,uCAAG,sBAAA/W,EAAA,0FAAH,qDAIdmV,GAAa,uCAAG,sBAAAnV,EAAA,yDACfH,IAAiBU,IAAeA,GAAWqB,OAD5B,wDAKpBZ,QAAQC,IAAI,SACZ4S,IAAa,GANO,kBAQZ9R,YAAYlC,GAAcU,IARd,OASlBsT,IAAa,GACbU,GAAc,CACZH,MAAM,EACNjG,QAAS,mCACTkG,SAAU,YAbM,kDAgBlBrT,QAAQC,IAAR,MACA4S,IAAa,GACbU,GAAc,CACZH,MAAM,EACNjG,QAAS,wBACTkG,SAAU,UArBM,0DAAH,qDA0Bb2C,GAnWR,SACEzW,EACAsH,GACQ,IAAD,QASP,OARa,IAAIO,MAAOC,UAER,UAAG+B,YAAM,OAAC7J,QAAD,IAACA,OAAD,EAACA,EAAYE,MAAMiB,KAAKuV,sBAAjC,OAAG,EAA8C5O,UAC9C,UAAG+B,YAAM,OAAC7J,QAAD,IAACA,OAAD,EAACA,EAAYE,MAAMiB,KAAKuU,oBAAjC,OAAG,EAA4C5N,UACjD,UAAG+B,YAAM,OAAC7J,QAAD,IAACA,OAAD,EAACA,EAAYE,MAAMiB,KAAKwV,oBAAjC,OAAG,EAA4C7O,UACxC,UAAG+B,YAAM,OAACvC,QAAD,IAACA,OAAD,EAACA,EAAcpH,MAAM0H,mBAA9B,OAAG,EAAwCE,UAG5DmG,EAAM2I,OAuVCC,CAAS7W,GAAYsH,IAE7BwP,IACQ,OAAZxP,SAAY,IAAZA,QAAA,EAAAA,GAAcpH,MAAM0H,cAApB,OACA5H,SADA,IACAA,QADA,EACAA,GAAYE,MAAMiB,KAAKwV,eADvB,OAEArP,SAFA,IAEAA,QAFA,EAEAA,GAAcpH,MAAM0H,WAAWmP,GAA/B,OAAkC/W,SAAlC,IAAkCA,QAAlC,EAAkCA,GAAYE,MAAMiB,KAAKwV,cAK3D,OACE,eAACK,EAAA,EAAD,CAAW/M,MAAO,CAAE2H,UAAW,GAA/B,UACA,gCAAM+D,GAAN,2CACE,cAACqB,EAAA,EAAD,CAAWC,SAAS,KAAKhN,MAAO,CAAEmH,SAAU,YAA5C,SACE,cAACZ,EAAA,EAAD,CACEvG,MAAO,CAAEuE,QAAS,GAAI0I,gBAAiB,UAAW9H,aAAc,GADlE,SAGE,eAACgD,EAAA,EAAD,CAAMC,WAAS,EAACpD,eAAe,SAASsD,UAAU,SAAlD,UACGkE,KAAUxI,EAAMkJ,QACf,cAAC,EAAD,CACEjF,UAAW,UACXC,KAAM,qBACN1C,KAAI,OAAEzP,SAAF,IAAEA,QAAF,EAAEA,GAAYE,MAAMiB,KAAKuV,gBAGhCD,KAAUxI,EAAM2I,QACf,gCACA,cAAC,EAAD,CACE1E,UAAW,mBACXC,KAAM,2GACN1C,KAAI,OAAEzP,SAAF,IAAEA,QAAF,EAAEA,GAAYE,MAAMiB,KAAKuU,cAG/B,eAAClD,EAAA,EAAD,CAAYC,QAAQ,KAAKxI,MAAO,CAAEqF,WAAY,KAA9C,WAEiB,OAAVtP,SAAU,IAAVA,QAAA,EAAAA,GAAYE,MAAMoF,UAAUP,WAAW8H,MAAM,EAAG,IAC/C,OADD,OAEC7M,SAFD,IAECA,QAFD,EAECA,GAAYE,MAAMoF,UACfP,WACA8H,OACW,OAAV7M,SAAU,IAAVA,QAAA,EAAAA,GAAYE,MAAMoF,UAAUP,WAAWrC,QAAS,EAHpD,OAII1C,SAJJ,IAIIA,QAJJ,EAIIA,GAAYE,MAAMoF,UAAUP,WAAWrC,SACtC,IATb,sCAUqC,GAG7B0H,IAAaC,QAAiB,OAAVrK,SAAU,IAAVA,QAAA,EAAAA,GAAYY,UAAW2C,oBAbnD,iCAeQ6G,IAAaC,QAAiB,OAAVrK,SAAU,IAAVA,QAAA,EAAAA,GAAYE,MAAMkX,iBAAkB7T,oBAfhE,2CAoBDkT,KAAUxI,EAAMoJ,QACf,cAAC,EAAD,CACEnF,UAAW,uBACXC,KAAM,mEACN1C,KAAI,OAAEzP,SAAF,IAAEA,QAAF,EAAEA,GAAYE,MAAMiB,KAAKwV,cAIhCF,KAAUxI,EAAMqJ,SACf,cAAC,EAAD,CACEpF,UAAW,UACXC,KAAM,qBACN1C,KAAI,OAAEzP,SAAF,IAAEA,QAAF,EAAEA,GAAYE,MAAMiB,KAAKwV,YAAYzL,IAAnC,OACJlL,SADI,IACJA,QADI,EACJA,GAAYE,MAAMiB,KAAKoW,mBAK5Bd,KAAUxI,EAAMuJ,SAAWlQ,IAC1B,cAAC,EAAD,CACE4K,UAAW,UACXC,KAAM,mBACN1C,KAAI,OAAEzP,SAAF,IAAEA,QAAF,EAAEA,GAAYE,MAAMiB,KAAKwV,cAIhCF,KAAUxI,EAAMuJ,QAAUlQ,IACzB,cAAC,EAAD,CACE4K,UAAW,UACXC,KAAM,uBACN1C,KAAI,OAAEnI,SAAF,IAAEA,QAAF,EAAEA,GAAcpH,MAAM0H,aAI7B6O,KAAUxI,EAAMwJ,QACf,cAAC,EAAD,CACEvF,UACE4E,GAAiC,UAAY,UAE/C3E,KAAM,oDACN1C,KAAI,OAAEnI,SAAF,IAAEA,QAAF,EAAEA,GAAcpH,MAAM0H,WAC1B7B,OAAO,SAIV/F,IACC,qCACG,CACCiO,EAAM2I,OACN3I,EAAMoJ,OACNpJ,EAAMuJ,OACNvJ,EAAMqJ,SACNI,SAASjB,MALV,OAMCzW,SAND,IAMCA,IAND,UAMCA,GAAYqB,cANb,iBAMC,EAAoBF,YANrB,aAMC,EAA0BjB,MAAMyX,YAC9B,qBAAK1N,MAAO,CAAE2N,WAAY,QAA1B,SACE,cAACC,EAAA,EAAD,CAAO/D,SAAS,QAAhB,6EAML,CAAC7F,EAAM2I,OAAQ3I,EAAMoJ,QAAQK,SAASjB,KACrCzW,GAAWE,MAAM2B,gBADlB,OAEC7B,SAFD,IAECA,IAFD,UAECA,GAAYqB,cAFb,iBAEC,EAAoBF,YAFrB,aAEC,EAA0BQ,WAC1B,OAAC3B,SAAD,IAACA,IAAD,UAACA,GAAYqB,cAAb,iBAAC,EAAoBF,YAArB,aAAC,EAA0BjB,MAAMyX,YACjC3X,GAAWE,MAAM2B,cAAcD,GAA/B,OACE5B,SADF,IACEA,IADF,UACEA,GAAYqB,cADd,iBACE,EAAoBF,YADtB,aACE,EAA0BQ,SAE1B,qBAAKsI,MAAO,CAAE2N,WAAY,QAA1B,SACE,cAACC,EAAA,EAAD,CAAO/D,SAAS,UAAhB,+FAML,CAAC7F,EAAMuJ,OAAQvJ,EAAMqJ,SAASI,SAASjB,KACtCzW,GAAWE,MAAM2B,gBADlB,OAEC7B,SAFD,IAECA,IAFD,UAECA,GAAYqB,cAFb,iBAEC,EAAoBF,YAFrB,aAEC,EAA0BQ,WAC1B,OAAC3B,SAAD,IAACA,IAAD,UAACA,GAAYqB,cAAb,iBAAC,EAAoBF,YAArB,aAAC,EAA0BjB,MAAMyX,YACjC3X,GAAWE,MAAM2B,cAAcD,GAA/B,OACE5B,SADF,IACEA,IADF,UACEA,GAAYqB,cADd,iBACE,EAAoBF,YADtB,aACE,EAA0BQ,SAE1B,qBAAKsI,MAAO,CAAE2N,WAAY,QAA1B,SACE,eAACC,EAAA,EAAD,CAAO/D,SAAS,QAAhB,6FAE4B,0CAF5B,kIAjIC,KAkJV,CAAC7F,EAAM2I,OAAQ3I,EAAMoJ,QAAQK,SAASjB,KAErC,mCACE,cAACrE,EAAA,EAAD,CAAMnI,MAAO,CAAE2H,UAAW,GAAIkG,aAAc,IAA5C,SACE,cAACrG,EAAD,CACEgC,IAAKA,GACLyC,MAAOA,GACPN,IAAKA,GACLE,KAAMA,GACNpP,MAAO6M,GACPwE,SAAU,SAACC,EAAI1N,GAAL,OAAakJ,GAAelJ,IACtC2N,kBAAkB,OAClBhO,MAAO,CACL2E,MAAO,oBACPmD,WAAY,GACZlD,OAAQ,UAOhB9G,GAAO2M,UAMP,gCACG,CAACzG,EAAM2I,OAAQ3I,EAAMoJ,QAAQK,SAASjB,KACrC,mCACE,cAACzF,EAAD,CACEkH,QAAS5B,GACT7D,QAAQ,YACR0F,UACE,EAJJ,SAOG9E,GACC,cAAC+E,EAAA,EAAD,KACE,OAACpY,SAAD,IAACA,QAAD,EAACA,GAAYqB,OAAOF,MAGtB,yBAFA,gBAUP,CAAC8M,EAAMuJ,QAAQE,SAASjB,KACvB,qCACG9D,EAAS3S,GAAY4S,KACpB,cAAC5B,EAAD,CACEkH,QAAStD,GACTnC,QAAQ,YACR0F,cAC6CxV,KAAjC,OAAV3C,SAAU,IAAVA,IAAA,UAAAA,GAAYqB,OAAOF,YAAnB,eAAyBjB,MAAMmY,SAJnC,SAOGhF,GAAY,cAAC+E,EAAA,EAAD,IAAuB,kBAItCzF,EAAS3S,GAAY4S,KACrB,cAAC5B,EAAD,CACEkH,QAAS1B,GACT/D,QAAQ,YACR0F,SACE9E,SAC4B1Q,KAAlB,OAAV3C,SAAU,IAAVA,QAAA,EAAAA,GAAYqB,OAAOF,YAC0BwB,KAAnC,OAAV3C,SAAU,IAAVA,IAAA,UAAAA,GAAYqB,OAAOF,YAAnB,eAAyBjB,MAAMyX,WANnC,SASGtE,GAAY,cAAC+E,EAAA,EAAD,IAAuB,gBAM3C3B,KAAUxI,EAAMwJ,QACf,uCACKzX,IACD2S,EAAS3S,GAAY4S,MACrB,cAAC9B,EAAD,UACE,cAACE,EAAD,CACEmH,UACc,OAAZ7Q,SAAY,IAAZA,QAAA,EAAAA,GAAcpH,MAAMwH,YACpB2L,MACA,OAAC/L,SAAD,IAACA,QAAD,EAACA,GAAcpH,MAAMyH,YACV,OAAV3H,SAAU,IAAVA,IAAA,UAAAA,GAAYqB,cAAZ,mBAAoBF,YAApB,eAA0BjB,MAAMmY,UACT,IAAtBzF,GAEJsF,QAASzD,GACThC,QAAQ,YATV,UAWa,OAAVzS,SAAU,IAAVA,IAAA,WAAAA,GAAYqB,cAAZ,sBAAoBF,YAApB,iBAA0BjB,MAAMmY,UACX,IAAtBzF,GACE,UACc,OAAZtL,SAAY,IAAZA,QAAA,EAAAA,GAAcpH,MAAMwH,WACtB,WACE2L,GACF,cAAC+E,EAAA,EAAD,IAEA,YAMNzF,EAAS3S,GAAY4S,KACrB,cAAC5B,EAAD,CACEkH,QAAS1B,GACT/D,QAAQ,YACR0F,SACE9E,SAC4B1Q,KAAlB,OAAV3C,SAAU,IAAVA,QAAA,EAAAA,GAAYqB,OAAOF,YAC0BwB,KAAnC,OAAV3C,SAAU,IAAVA,IAAA,WAAAA,GAAYqB,OAAOF,YAAnB,iBAAyBjB,MAAMyX,WANnC,SASGtE,GAAY,cAAC+E,EAAA,EAAD,IAAuB,mBAlG9C,eAACzH,EAAD,qBACU,IACP,CAAC1C,EAAM2I,QAAQc,SAASjB,IAAS,SAAW,mBAwGjD,cAACrE,EAAA,EAAD,CACEC,WAAS,EACTpD,eAAe,gBACfE,MAAM,gBAHR,SAKE,cAACmJ,EAAA,EAAD,CACEC,UAAU,SACV9F,QAAQ,QACRtD,MAAM,gBACNqJ,MAAM,OACNN,QAAS,WACP9D,IAAa,IANjB,2BAaF,cAACqE,EAAA,EAAD,CACE5E,KAAMQ,GACNqE,QAAS,kBAAMpE,IAAuB,IACtCqE,WAAY,CACV1O,MAAO,CAAEiN,gBAAiB,UAAW9H,aAAc,IAJvD,SAOE,cAAC,IAAD,CAAkBnF,MAAO,CAAEuE,QAAS,IAApC,0KAMF,cAACiK,EAAA,EAAD,CACE5E,KAAMU,GACNmE,QAAS,WACPlE,IAAqB,IAEvBmE,WAAY,CACV1O,MAAO,CAAEiN,gBAAiB,UAAW9H,aAAc,IANvD,SASE,eAAC,IAAD,CAAkBnF,MAAO,CAAEuE,QAAS,IAApC,YACG,OAACxO,SAAD,IAACA,QAAD,EAACA,GAAYE,MAAMiB,KAAKyX,iBACvB,+EAES,OAAV5Y,SAAU,IAAVA,QAAA,EAAAA,GAAYE,MAAMiB,KAAKyX,iBACtB5Y,GAAWE,MAAMiB,KAAKyX,eAAeC,kBACnC,gCACE,iDACA,qIAIA,8CANF,2BAO2B,IACxB7Y,GAAWE,MAAMiB,KAAKyX,eAAeE,UAAY,IARpD,YAQ6D,KAC/C,OAAV9Y,SAAU,IAAVA,QAAA,EAAAA,GAAYY,UACZZ,GAAWE,MAAMiB,KAAKyX,eAAeE,WACjB,IAAnBvV,oBAXL,0DAY0D,IACvDvD,GAAWE,MAAMiB,KAAKyX,eAAeG,iBAAiBjX,WAAY,IAbrE,qBAcqB,IAClB9B,GAAWE,MAAMiB,KAAK6X,eAAelX,WAfxC,sBAiBE,6CACe,IACZ9B,GAAWE,MAAMiB,KAAKyX,eAAeG,iBAAiBjX,WAAY,IAFrE,oBAGoB,IAHpB,WAIG+H,YACC7J,GAAWE,MAAMiB,KAAKyX,eAAeC,yBALzC,cAIG,GAEEI,qBAAsB,IAN3B,KAOK,IAPL,WAQGpP,YACC7J,GAAWE,MAAMiB,KAAKyX,eAAeC,yBATzC,cAQG,GAEEK,qBAVL,gDAWgD,IAC7ClZ,GAAWE,MAAMiB,KAAKyX,eAAeE,UAAY,IAZpD,mCAeW,OAAV9Y,SAAU,IAAVA,IAAA,WAAAA,GAAYqB,cAAZ,iBAAoBF,SACnB,OAACnB,SAAD,IAACA,IAAD,WAACA,GAAYqB,cAAb,cAAC,GAAoBF,KAAKjB,MAAMyX,YAC9B,cAAC3G,EAAD,CACEkH,QAAS3B,GACT9D,QAAQ,YACR0F,UACKnY,GAAWqB,OAAOF,OACpBnB,GAAWqB,OAAOF,KAAKjB,MAAMmY,SAC9BxQ,KAAKkI,MAAQ,IACX/P,GAAWE,MAAMiB,KAAKyX,eAAeC,iBAAiB/W,WAP5D,SAUGuR,GACC,cAAC+E,EAAA,EAAD,IACEvQ,KAAKkI,MAAQ,IACf/P,GAAWE,MAAMiB,KAAKyX,eAAeC,iBAAiB/W,WACtD,gDAEE,cAAC,IAAD,CACE2N,KAAM5F,YACJ7J,GAAWE,MAAMiB,KAAKyX,eACnBC,uBAKT,WAKR,qBAAK5O,MAAO,CAAEkP,UAAW,SAAUvH,UAAW,QAA9C,UACa,OAAV5R,SAAU,IAAVA,IAAA,WAAAA,GAAYqB,cAAZ,iBAAoBF,SACnB,OAACnB,SAAD,IAACA,IAAD,WAACA,GAAYqB,cAAb,mBAAC,GAAoBF,YAArB,cAAC,GAA0BjB,MAAMmY,UAC/B,kIAUhB,eAACI,EAAA,EAAD,CACE5E,KAAMM,GACNuE,QAAS,kBAAMtE,IAAa,IAC5BuE,WAAY,CACV1O,MAAO,CAAEiN,gBAAiB,UAAW9H,aAAc,IAJvD,UAOE,eAAC,IAAD,CACEgK,mBAAiB,EACjBnP,MAAO,CACLsE,QAAS,OACTS,WAAY,SACZC,eAAgB,iBALpB,UAQE,cAACqJ,EAAA,EAAD,CACEC,UAAU,SACV9F,QAAQ,KACRtD,MAAM,gBACN+I,QAAS,WACP9D,IAAa,IALjB,0BAUA,cAACiF,EAAA,EAAD,CACE,aAAW,QACX9I,UAAWW,EAAaC,YACxB+G,QAAS,kBAAM9D,IAAa,IAH9B,SAKE,cAAC,IAAD,SAGJ,eAAC,IAAD,WACE,cAAC5B,EAAA,EAAD,CAAYC,QAAQ,KAApB,iCAGA,cAACD,EAAA,EAAD,CAAY8G,cAAY,EAACnK,MAAM,gBAA/B,kIAGA,cAACqD,EAAA,EAAD,CAAYC,QAAQ,KAApB,kCACA,cAACD,EAAA,EAAD,CAAY8G,cAAY,EAACnK,MAAM,gBAA/B,iIAGf,cAACqD,EAAA,EAAD,CAAYC,QAAQ,KAApB,iBACe,cAACD,EAAA,EAAD,CAAY8G,cAAY,EAACnK,MAAM,gBAA/B,qGAGE,cAACqD,EAAA,EAAD,CAAY8G,cAAY,EAACnK,MAAM,gBAA/B,iHAmBXnP,IACC,cAACgX,EAAA,EAAD,CACEC,SAAS,KACThN,MAAO,CAAEmH,SAAU,WAAYQ,UAAW,IAF5C,SAIE,qBAAK3H,MAAO,CAAEyE,OAAQ,IAAtB,SACE,eAAC0D,EAAA,EAAD,CAAMC,WAAS,EAACE,UAAU,MAAMgH,KAAK,SAArC,UACE,eAACnH,EAAA,EAAD,CAAMC,WAAS,EAACmH,GAAI,EAAGjH,UAAU,SAAjC,UACE,cAACC,EAAA,EAAD,CAAYC,QAAQ,QAAQtD,MAAM,gBAAlC,kBAGA,cAACqD,EAAA,EAAD,CACEC,QAAQ,KACRtD,MAAM,cACNlF,MAAO,CAAEqF,WAAY,QAHvB,UAKa,OAAVtP,SAAU,IAAVA,QAAA,EAAAA,GAAYE,MAAMuZ,kBAAkB3X,aAAc,OAGvD,eAACsQ,EAAA,EAAD,CAAMC,WAAS,EAACmH,GAAI,EAAGjH,UAAU,SAAjC,UACE,cAACC,EAAA,EAAD,CAAYC,QAAQ,QAAQtD,MAAM,gBAAlC,wBAGA,eAACqD,EAAA,EAAD,CACEC,QAAQ,KACRtD,MAAM,cACNlF,MAAO,CAAEqF,WAAY,QAHvB,oBAKKlF,IAAaC,OAAO2L,UAG3B,eAAC5D,EAAA,EAAD,CAAMC,WAAS,EAACmH,GAAI,EAAGjH,UAAU,SAAjC,UACE,cAACC,EAAA,EAAD,CAAYC,QAAQ,QAAQtD,MAAM,gBAAlC,0BAGA,eAACqD,EAAA,EAAD,CACEC,QAAQ,KACRtD,MAAM,cACNlF,MAAO,CAAEqF,WAAY,QAHvB,mBAKI,IACDlF,IAAaC,SACD,OAAVrK,SAAU,IAAVA,QAAA,EAAAA,GAAYY,WAAY,GAAK2C,iCAQ5C,cAACmW,EAAA,EAAD,CACE7F,KAAME,GAAWF,KACjB8F,iBAAkB,IAClBjB,QAAS,kBAAM1E,GAAc,2BAAKD,IAAN,IAAkBF,MAAM,MAHtD,SAKE,cAACgE,EAAA,EAAD,CACEa,QAAS,kBAAM1E,GAAc,2BAAKD,IAAN,IAAkBF,MAAM,MACpDC,SAAUC,GAAWD,SAFvB,SAIGC,GAAWnG,gB,iDEvnChBgM,GAAkBC,IAAMC,cAA2C,MAE5DC,GAAmB,SAAC,GAAgC,IAAD,IAA7BC,gBAA6B,MAAlB,KAAkB,EACxDC,EAAYC,mBACZC,EAAcD,mBAEdE,EAAezG,mBACnB,kBAAM,WAC2C,IAAD,EAA1CwG,EAAYE,SAAWJ,EAAUI,UACnCJ,EAAUI,QAAQpQ,MAAMqQ,WAAa,UACrC,UAAAH,EACGE,QAAQ,CACPE,cAAe,IACfC,OAAQ,IACRC,OAAQ,CAAEC,EAAG,aAJjB,SAMIC,SAAQ,WACJV,EAAUI,UACZJ,EAAUI,QAAQpQ,MAAMqQ,WAAa,iBAK/C,IAGFjF,qBAAU,WACJ4E,EAAUI,UAAYF,EAAYE,UACpCJ,EAAUI,QAAQpQ,MAAMqQ,WAAa,SACrCH,EAAYE,QAAUO,KAASC,OAAOZ,EAAUI,QAAS,CACvDS,QAAQ,EACRC,WAAW,OAGd,IAWH,OACE,eAACnB,GAAgBoB,SAAjB,CAA0BtU,MAAO,CAAE0T,gBAAnC,UACE,wBAAQa,IAAKhB,EAAkBhQ,MAXM,CACvC2E,MAAO,QACPC,OAAQ,QACRuC,SAAU,WACV8J,OAAQ,EACR5J,IAAK,EACL6J,KAAM,KAMHnB,MChCD5L,GAAQgN,aAAY,CACxB7J,QAAS,CACP8J,KAAM,UAIJhU,QAEF1E,EAEEpD,GAAe,IAAIJ,KAAYC,UACnCiG,gDAGIiW,GAAgB,IAAInc,KAAYC,UACpCiG,gDAEIkW,GAAgB,IAAIpc,KAAYC,UACpCiG,gDAEImW,GAAgB,IAAIrc,KAAYC,UACpCiG,gDAKI7F,GAAa,IAAIL,KAAYsc,WADnBpW,sFAGVqW,GAAgBC,SAAStW,2lBAAYuW,2BAA6B,IAElE9G,GAAY,IAiFH+G,GA/EH,WACV,IAAMC,EAAWnI,mBAAQ,kBAAMoI,wBAVjB1W,kBAUyC,IAEjD2W,EAAUrI,mBACd,iBAAM,CAACsI,8BAAoBC,+BAAqBC,gCAChD,IAGF,OACE,eAACC,GAAA,EAAD,CAAehO,MAAOA,GAAtB,UACA,2MACE,cAAC,qBAAD,CAAoB0N,SAAUA,EAA9B,SACE,cAAC,iBAAD,CAAgBE,QAASA,EAASK,aAAW,EAA7C,SACE,eAAC,uBAAD,WACE,sBACE9L,UAAU,gBACVtG,MAAO,CAAEyE,OAAQ,EAAGM,WAAY,UAFlC,UAIE,sBAAK/E,MAAO,CAAEsE,QAAS,UAAvB,UACE,qBAAKtE,MAAO,CAAEkP,UAAW,UAAzB,oBACA,cAAC,GAAD,UACE,cAAC,GAAD,CACE9R,eAAgBA,GAChB9H,aAAcA,GACdC,WAAYA,GACZ8c,UAAWZ,GACX5G,UAAWA,UAIjB,sBAAK7K,MAAO,CAAEsE,QAAS,UAAvB,UACE,qBAAKtE,MAAO,CAAEkP,UAAW,UAAzB,oBACA,cAAC,GAAD,UACE,cAAC,GAAD,CACE9R,eAAgBA,GAChB9H,aAAc+b,GACd9b,WAAYA,GACZ8c,UAAWZ,GACX5G,UAAWA,aAKnB,sBACEvE,UAAU,gBACVtG,MAAO,CAAEyE,OAAQ,EAAGM,WAAY,UAFlC,UAIE,sBAAK/E,MAAO,CAAEsE,QAAS,UAAvB,UACE,qBAAKtE,MAAO,CAAEkP,UAAW,UAAzB,oBACA,cAAC,GAAD,UACE,cAAC,GAAD,CACE9R,eAAgBA,GAChB9H,aAAcgc,GACd/b,WAAYA,GACZ8c,UAAWZ,GACX5G,UAAWA,UAIjB,sBAAK7K,MAAO,CAAEsE,QAAS,UAAvB,UACE,qBAAKtE,MAAO,CAAEkP,UAAW,UAAzB,oBACA,cAAC,GAAD,UACE,cAAC,GAAD,CACE9R,eAAgBA,GAChB9H,aAAcic,GACdhc,WAAYA,GACZ8c,UAAWZ,GACX5G,UAAWA,wBC5GhByH,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCHdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,SAM1Bb,O","file":"static/js/main.3921cad3.chunk.js","sourcesContent":["import * as anchor from '@project-serum/anchor';\n\nimport { TOKEN_PROGRAM_ID, Token } from '@solana/spl-token';\nimport { LAMPORTS_PER_SOL, TransactionInstruction } from '@solana/web3.js';\nimport {\n  createAssociatedTokenAccountInstruction,\n  getAtaForMint,\n  getFairLaunchTicketSeqLookup,\n} from './utils';\n\nexport const FAIR_LAUNCH_PROGRAM = new anchor.web3.PublicKey(\n  'GUes4PH9UcoMuhATVaT1FH5QAQja1uHep8YnPE1oxPSY',\n);\n\nexport interface FairLaunchAccount {\n  id: anchor.web3.PublicKey;\n  program: anchor.Program;\n  state: FairLaunchState;\n\n  ticket: {\n    pubkey: anchor.web3.PublicKey;\n    bump: number;\n    data?: FairLaunchTicket;\n  };\n  lottery: {\n    pubkey: anchor.web3.PublicKey;\n    data?: Uint8Array;\n  };\n  treasury: number;\n}\n\nexport interface FairLaunchTicket {\n  fairLaunch: anchor.web3.PublicKey;\n  buyer: anchor.web3.PublicKey;\n  amount: anchor.BN;\n  state: {\n    punched?: {};\n    unpunched?: {};\n    withdrawn?: {};\n    no_sequence_struct: {};\n  };\n  bump: number;\n  seq: anchor.BN;\n}\n\nexport interface AntiRugSetting {\n  reserveBp: number;\n  tokenRequirement: anchor.BN;\n  selfDestructDate: anchor.BN;\n}\nexport interface FairLaunchState {\n  authority: anchor.web3.PublicKey;\n  dev: anchor.web3.PublicKey;\n  bump: number;\n\n  currentMedian: anchor.BN;\n  currentEligibleHolders: anchor.BN;\n  data: {\n    antiRugSetting?: AntiRugSetting;\n    fee: anchor.BN;\n    numberOfTokens: anchor.BN;\n    phaseOneEnd: anchor.BN;\n    phaseOneStart: anchor.BN;\n    phaseTwoEnd: anchor.BN;\n    priceRangeEnd: anchor.BN;\n    priceRangeStart: anchor.BN;\n    lotteryDuration: anchor.BN;\n    tickSize: anchor.BN;\n    uuid: string;\n  };\n  numberTicketsDropped: anchor.BN;\n  numberTicketsPunched: anchor.BN;\n  numberTicketsSold: anchor.BN;\n  numberTicketsUnSeqed: anchor.BN;\n  numberTokensBurnedForRefunds: anchor.BN;\n  numberTokensPreminted: anchor.BN;\n  phaseThreeStarted: boolean;\n  tokenMint: anchor.web3.PublicKey;\n  tokenMintBump: number;\n  treasury: anchor.web3.PublicKey;\n  treasuryBump: number;\n  treasuryMint: anchor.web3.PublicKey; // only for SPL tokens\n  treasurySnapshot: null;\n}\n\nexport enum LotteryState {\n  Brewing = 'Brewing',\n  Finished = 'Finished',\n  PastDue = 'Past Due',\n}\n\nexport const getLotteryState = (\n  phaseThree: boolean | undefined,\n  lottery: Uint8Array | null,\n  lotteryDuration: anchor.BN,\n  phaseTwoEnd: anchor.BN,\n): LotteryState => {\n  if (\n    !phaseThree &&\n    (!lottery || lottery.length === 0) &&\n    phaseTwoEnd.add(lotteryDuration).lt(new anchor.BN(Date.now() / 1000))\n  ) {\n    return LotteryState.PastDue;\n  } else if (phaseThree) {\n    return LotteryState.Finished;\n  } else {\n    return LotteryState.Brewing;\n  }\n};\n\nexport const getFairLaunchState = async (\n  anchorWallet: anchor.Wallet,\n  fairLaunchId: anchor.web3.PublicKey,\n  connection: anchor.web3.Connection,\n): Promise<FairLaunchAccount> => {\n  const provider = new anchor.Provider(connection, anchorWallet, {\n    preflightCommitment: 'recent',\n  });\n\n  const idl = await anchor.Program.fetchIdl(FAIR_LAUNCH_PROGRAM, provider);\n\n  const program = new anchor.Program(idl, FAIR_LAUNCH_PROGRAM, provider);\n  const state: any = await program.account.fairLaunch.fetch(fairLaunchId);\n\n  const [fairLaunchTicket, bump] = await getFairLaunchTicket(\n    //@ts-ignore\n    state.tokenMint,\n    anchorWallet.publicKey,\n  );\n\n  let fairLaunchData: any;\n\n  try {\n    fairLaunchData = await program.account.fairLaunchTicket.fetch(\n      fairLaunchTicket,\n    );\n  } catch {\n    console.log('No ticket');\n  }\n\n  const treasury = await program.provider.connection.getBalance(state.treasury);\n\n  let lotteryData: Uint8Array = new Uint8Array([]);\n  let fairLaunchLotteryBitmap = (\n    await getFairLaunchLotteryBitmap(\n      //@ts-ignore\n      state.tokenMint,\n    )\n  )[0];\n\n  try {\n    const fairLaunchLotteryBitmapObj =\n      await program.provider.connection.getAccountInfo(fairLaunchLotteryBitmap);\n\n    lotteryData = new Uint8Array(fairLaunchLotteryBitmapObj?.data || []);\n  } catch (e) {\n    console.log('Could not find fair launch lottery.');\n    console.log(e);\n  }\n\n  return {\n    id: fairLaunchId,\n    state,\n    program,\n    ticket: {\n      pubkey: fairLaunchTicket,\n      bump,\n      data: fairLaunchData,\n    },\n    lottery: {\n      pubkey: fairLaunchLotteryBitmap,\n      data: lotteryData,\n    },\n    treasury,\n  };\n};\n\nexport const punchTicket = async (\n  anchorWallet: anchor.Wallet,\n  fairLaunch: FairLaunchAccount,\n) => {\n  const fairLaunchTicket = (\n    await getFairLaunchTicket(\n      //@ts-ignore\n      fairLaunch.state.tokenMint,\n      anchorWallet.publicKey,\n    )\n  )[0];\n\n  const ticket = fairLaunch.ticket.data;\n\n  const fairLaunchLotteryBitmap = ( //@ts-ignore\n    await getFairLaunchLotteryBitmap(fairLaunch.state.tokenMint)\n  )[0];\n\n  const buyerTokenAccount = (\n    await getAtaForMint(\n      //@ts-ignore\n      fairLaunch.state.tokenMint,\n      anchorWallet.publicKey,\n    )\n  )[0];\n\n  if (ticket?.amount.gt(fairLaunch.state.currentMedian)) {\n    console.log(\n      'Adjusting down...',\n      ticket?.amount.toNumber(),\n      fairLaunch.state.currentMedian.toNumber(),\n    );\n    const { remainingAccounts, instructions, signers } =\n      await getSetupForTicketing(\n        fairLaunch.program,\n        fairLaunch.state.currentMedian.toNumber(),\n        anchorWallet,\n        fairLaunch,\n        fairLaunchTicket,\n      );\n  }\n\n  const accountExists =\n    await fairLaunch.program.provider.connection.getAccountInfo(\n      buyerTokenAccount,\n    );\n\n  const instructions = !accountExists\n    ? [\n        createAssociatedTokenAccountInstruction(\n          buyerTokenAccount,\n          anchorWallet.publicKey,\n          anchorWallet.publicKey,\n          //@ts-ignore\n          fairLaunch.state.tokenMint,\n        ),\n      ]\n    : [];\n\n  await fairLaunch.program.rpc.punchTicket({\n    accounts: {\n      fairLaunchTicket,\n      fairLaunch: fairLaunch.id,\n      fairLaunchLotteryBitmap,\n      payer: anchorWallet.publicKey,\n      buyerTokenAccount,\n      //@ts-ignore\n      tokenMint: fairLaunch.state.tokenMint,\n      tokenProgram: TOKEN_PROGRAM_ID,\n    },\n    instructions: instructions.length > 0 ? instructions : undefined,\n  });\n};\n\nexport const getFairLaunchTicket = async (\n  tokenMint: anchor.web3.PublicKey,\n  buyer: anchor.web3.PublicKey,\n): Promise<[anchor.web3.PublicKey, number]> => {\n  return await anchor.web3.PublicKey.findProgramAddress(\n    [Buffer.from('fair_launch'), tokenMint.toBuffer(), buyer.toBuffer()],\n    FAIR_LAUNCH_PROGRAM,\n  );\n};\n\nexport const getFairLaunchLotteryBitmap = async (\n  tokenMint: anchor.web3.PublicKey,\n): Promise<[anchor.web3.PublicKey, number]> => {\n  return await anchor.web3.PublicKey.findProgramAddress(\n    [Buffer.from('fair_launch'), tokenMint.toBuffer(), Buffer.from('lottery')],\n    FAIR_LAUNCH_PROGRAM,\n  );\n};\n\nconst getSetupForTicketing = async (\n  anchorProgram: anchor.Program,\n  amount: number,\n  anchorWallet: anchor.Wallet,\n  fairLaunch: FairLaunchAccount | undefined,\n  ticketKey: anchor.web3.PublicKey,\n): Promise<{\n  remainingAccounts: {\n    pubkey: anchor.web3.PublicKey | null;\n    isWritable: boolean;\n    isSigner: boolean;\n  }[];\n  instructions: TransactionInstruction[];\n  signers: anchor.web3.Keypair[];\n  amountLamports: number;\n}> => {\n  if (!fairLaunch) {\n    return {\n      remainingAccounts: [],\n      instructions: [],\n      signers: [],\n      amountLamports: 0,\n    };\n  }\n  const ticket = fairLaunch.ticket;\n\n  const remainingAccounts = [];\n  const instructions = [];\n  const signers = [];\n\n  let amountLamports = 0;\n  //@ts-ignore\n  if (!fairLaunch.state.treasuryMint) {\n    if (!ticket && amount === 0) {\n      amountLamports = fairLaunch.state.data.priceRangeStart.toNumber();\n    } else {\n      amountLamports = Math.ceil(amount * LAMPORTS_PER_SOL);\n    }\n  } else {\n    const transferAuthority = anchor.web3.Keypair.generate();\n    signers.push(transferAuthority);\n    // NOTE this token impl will not work till you get decimal mantissa and multiply...\n    /// ex from cli wont work since you dont have a Signer, but an anchor.Wallet\n    /*\n    const token = new Token(\n        anchorProgram.provider.connection,\n        //@ts-ignore\n        fairLaunchObj.treasuryMint,\n        TOKEN_PROGRAM_ID,\n        walletKeyPair,\n      );\n      const mintInfo = await token.getMintInfo();\n      amountNumber = Math.ceil(amountNumber * 10 ** mintInfo.decimals);\n    */\n    instructions.push(\n      Token.createApproveInstruction(\n        TOKEN_PROGRAM_ID,\n        //@ts-ignore\n        fairLaunch.state.treasuryMint,\n        transferAuthority.publicKey,\n        anchorWallet.publicKey,\n        [],\n        //@ts-ignore\n\n        // TODO: get mint decimals\n        amountNumber + fairLaunch.state.data.fees.toNumber(),\n      ),\n    );\n\n    remainingAccounts.push({\n      //@ts-ignore\n      pubkey: fairLaunch.state.treasuryMint,\n      isWritable: true,\n      isSigner: false,\n    });\n    remainingAccounts.push({\n      pubkey: (\n        await getAtaForMint(\n          //@ts-ignore\n          fairLaunch.state.treasuryMint,\n          anchorWallet.publicKey,\n        )\n      )[0],\n      isWritable: true,\n      isSigner: false,\n    });\n    remainingAccounts.push({\n      pubkey: transferAuthority.publicKey,\n      isWritable: false,\n      isSigner: true,\n    });\n    remainingAccounts.push({\n      pubkey: TOKEN_PROGRAM_ID,\n      isWritable: false,\n      isSigner: false,\n    });\n  }\n\n  if (ticket.data) {\n    const [fairLaunchTicketSeqLookup, seqBump] =\n      await getFairLaunchTicketSeqLookup(\n        fairLaunch.state.tokenMint,\n        ticket.data?.seq,\n      );\n\n    const seq = await anchorProgram.provider.connection.getAccountInfo(\n      fairLaunchTicketSeqLookup,\n    );\n    if (!seq) {\n      instructions.push(\n        await anchorProgram.instruction.createTicketSeq(seqBump, {\n          accounts: {\n            fairLaunchTicketSeqLookup,\n            fairLaunch: fairLaunch.id,\n            fairLaunchTicket: ticketKey,\n            payer: anchorWallet.publicKey,\n            systemProgram: anchor.web3.SystemProgram.programId,\n            rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n          },\n          signers: [],\n        }),\n      );\n    }\n  }\n\n  return {\n    remainingAccounts,\n    instructions,\n    signers,\n    amountLamports,\n  };\n};\n\nexport const receiveRefund = async (\n  anchorWallet: anchor.Wallet,\n  fairLaunch: FairLaunchAccount | undefined,\n) => {\n  if (!fairLaunch) {\n    return;\n  }\n\n  const buyerTokenAccount = (\n    await getAtaForMint(fairLaunch.state.tokenMint, anchorWallet.publicKey)\n  )[0];\n\n  const transferAuthority = anchor.web3.Keypair.generate();\n\n  const signers = [transferAuthority];\n  const instructions = [\n    Token.createApproveInstruction(\n      TOKEN_PROGRAM_ID,\n      buyerTokenAccount,\n      transferAuthority.publicKey,\n      anchorWallet.publicKey,\n      [],\n      1,\n    ),\n  ];\n\n  const remainingAccounts = [];\n\n  if (fairLaunch.state.treasuryMint) {\n    remainingAccounts.push({\n      pubkey: fairLaunch.state.treasuryMint,\n      isWritable: true,\n      isSigner: false,\n    });\n    remainingAccounts.push({\n      pubkey: (\n        await getAtaForMint(\n          fairLaunch.state.treasuryMint,\n          anchorWallet.publicKey,\n        )\n      )[0],\n      isWritable: true,\n      isSigner: false,\n    });\n  }\n\n  console.log(\n    'tfr',\n    fairLaunch.state.treasury.toBase58(),\n    anchorWallet.publicKey.toBase58(),\n    buyerTokenAccount.toBase58(),\n  );\n  await fairLaunch.program.rpc.receiveRefund({\n    accounts: {\n      fairLaunch: fairLaunch.id,\n      treasury: fairLaunch.state.treasury,\n      buyer: anchorWallet.publicKey,\n      buyerTokenAccount,\n      transferAuthority: transferAuthority.publicKey,\n      tokenMint: fairLaunch.state.tokenMint,\n      tokenProgram: TOKEN_PROGRAM_ID,\n      systemProgram: anchor.web3.SystemProgram.programId,\n      clock: anchor.web3.SYSVAR_CLOCK_PUBKEY,\n    },\n\n    __private: { logAccounts: true },\n    remainingAccounts,\n    instructions,\n    signers,\n  });\n};\n\nconst fairLaunchId = new anchor.web3.PublicKey(\n  process.env.REACT_APP_FAIR_LAUNCH_ID!,\n);\n\nconst fairLaunchId2 = new anchor.web3.PublicKey(\n  process.env.REACT_APP_FAIR_LAUNCH_ID2!,\n);\nconst fairLaunchId3 = new anchor.web3.PublicKey(\n  process.env.REACT_APP_FAIR_LAUNCH_ID3!,\n);\nconst fairLaunchId4 = new anchor.web3.PublicKey(\n  process.env.REACT_APP_FAIR_LAUNCH_ID4!,\n);\nexport const purchaseTicket = async (\n  amount: number,\n  anchorWallet: anchor.Wallet,\n  fairLaunch: FairLaunchAccount | undefined,\n) => {\n  if (!fairLaunch) {\n    return;\n  }\n\n  const ticket = fairLaunch.ticket.data;\n\n  const [fairLaunchTicket, bump] = await getFairLaunchTicket(\n    //@ts-ignore\n    fairLaunch.state.tokenMint,\n    anchorWallet.publicKey,\n  );\n\n  const { remainingAccounts, instructions, signers, amountLamports } =\n    await getSetupForTicketing(\n      fairLaunch.program,\n      amount,\n      anchorWallet,\n      fairLaunch,\n      fairLaunchTicket,\n    );\n\n  try {\n    console.log('Amount', amountLamports);\n    await fairLaunch.program.rpc.purchaseTicket(\n      bump,\n      new anchor.BN(amountLamports),\n      {\n        accounts: {\n\n          authority: fairLaunch.state.authority,\n          dev: fairLaunch.state.dev,\n          tokenMint: fairLaunch.state.tokenMint,\n          fairLaunch: fairLaunch.id,\n          //@ts-ignore\n          treasury: fairLaunch.state.treasury,\n          buyer: anchorWallet.publicKey,\n          payer: anchorWallet.publicKey,\n          systemProgram: anchor.web3.SystemProgram.programId,\n          rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n          clock: anchor.web3.SYSVAR_CLOCK_PUBKEY,\n        },\n        //__private: { logAccounts: true },\n        remainingAccounts,\n        signers,\n        instructions: instructions.length > 0 ? instructions : undefined,\n      },\n    );\n  } catch (e) {\n    console.log(e);\n    throw e;\n  }\n};\n\nexport const withdrawFunds = async (\n  anchorWallet: anchor.Wallet,\n  fairLaunch: FairLaunchAccount | undefined,\n) => {\n  if (!fairLaunch) {\n    return;\n  }\n\n  // TODO: create sequence ticket\n\n  const remainingAccounts = [];\n\n  //@ts-ignore\n  if (fairLaunch.state.treasuryMint) {\n    remainingAccounts.push({\n      //@ts-ignore\n      pubkey: fairLaunch.state.treasuryMint,\n      isWritable: true,\n      isSigner: false,\n    });\n    remainingAccounts.push({\n      pubkey: (\n        await getAtaForMint(\n          //@ts-ignore\n          fairLaunch.state.treasuryMint,\n          anchorWallet.publicKey,\n        )\n      )[0],\n      isWritable: true,\n      isSigner: false,\n    });\n    remainingAccounts.push({\n      pubkey: TOKEN_PROGRAM_ID,\n      isWritable: false,\n      isSigner: false,\n    });\n  }\n\n  await fairLaunch.program.rpc.withdrawFunds({\n    accounts: {\n      fairLaunch: fairLaunch.id,\n      // @ts-ignore\n      treasury: fairLaunch.state.treasury,\n      authority: anchorWallet.publicKey,\n      // @ts-ignore\n      tokenMint: fairLaunch.state.tokenMint,\n      systemProgram: anchor.web3.SystemProgram.programId,\n    },\n    remainingAccounts,\n  });\n};\n","import * as anchor from '@project-serum/anchor';\n\nimport { MintLayout, TOKEN_PROGRAM_ID, Token } from '@solana/spl-token';\nimport { SystemProgram } from '@solana/web3.js';\nimport { sendTransactionWithRetry } from './connection';\n\nimport {\n  getAtaForMint,\n  SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n} from './utils';\n\nexport const CANDY_MACHINE_PROGRAM = new anchor.web3.PublicKey(\n  'cndyAnrLdpjq1Ssp1z8xxDsB8dxe7u4HL5Nxi2K5WXZ',\n);\n\nconst TOKEN_METADATA_PROGRAM_ID = new anchor.web3.PublicKey(\n  'metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s',\n);\n\ninterface CandyMachineState {\n  itemsAvailable: number;\n  itemsRedeemed: number;\n  itemsRemaining: number;\n  config: anchor.web3.PublicKey;\n  treasury: anchor.web3.PublicKey;\n  tokenMint: anchor.web3.PublicKey;\n  isSoldOut: boolean;\n  isActive: boolean;\n  goLiveDate: anchor.BN;\n  price: anchor.BN;\n}\n\nexport interface CandyMachineAccount {\n  id: anchor.web3.PublicKey;\n  program: anchor.Program;\n  state: CandyMachineState;\n}\n\nexport const awaitTransactionSignatureConfirmation = async (\n  txid: anchor.web3.TransactionSignature,\n  timeout: number,\n  connection: anchor.web3.Connection,\n  commitment: anchor.web3.Commitment = 'recent',\n  queryStatus = false,\n): Promise<anchor.web3.SignatureStatus | null | void> => {\n  let done = false;\n  let status: anchor.web3.SignatureStatus | null | void = {\n    slot: 0,\n    confirmations: 0,\n    err: null,\n  };\n  let subId = 0;\n  status = await new Promise(async (resolve, reject) => {\n    setTimeout(() => {\n      if (done) {\n        return;\n      }\n      done = true;\n      console.log('Rejecting for timeout...');\n      reject({ timeout: true });\n    }, timeout);\n    while (!done && queryStatus) {\n      // eslint-disable-next-line no-loop-func\n      (async () => {\n        try {\n          const signatureStatuses = await connection.getSignatureStatuses([\n            txid,\n          ]);\n          status = signatureStatuses && signatureStatuses.value[0];\n          if (!done) {\n            if (!status) {\n              console.log('REST null result for', txid, status);\n            } else if (status.err) {\n              console.log('REST error for', txid, status);\n              done = true;\n              reject(status.err);\n            } else if (!status.confirmations) {\n              console.log('REST no confirmations for', txid, status);\n            } else {\n              console.log('REST confirmation for', txid, status);\n              done = true;\n              resolve(status);\n            }\n          }\n        } catch (e) {\n          if (!done) {\n            console.log('REST connection error: txid', txid, e);\n          }\n        }\n      })();\n      await sleep(2000);\n    }\n  });\n\n  //@ts-ignore\n  if (connection._signatureSubscriptions[subId]) {\n    connection.removeSignatureListener(subId);\n  }\n  done = true;\n  console.log('Returning status', status);\n  return status;\n};\n\n/* export */ const createAssociatedTokenAccountInstruction = (\n  associatedTokenAddress: anchor.web3.PublicKey,\n  payer: anchor.web3.PublicKey,\n  walletAddress: anchor.web3.PublicKey,\n  splTokenMintAddress: anchor.web3.PublicKey,\n) => {\n  const keys = [\n    { pubkey: payer, isSigner: true, isWritable: true },\n    { pubkey: associatedTokenAddress, isSigner: false, isWritable: true },\n    { pubkey: walletAddress, isSigner: false, isWritable: false },\n    { pubkey: splTokenMintAddress, isSigner: false, isWritable: false },\n    {\n      pubkey: anchor.web3.SystemProgram.programId,\n      isSigner: false,\n      isWritable: false,\n    },\n    { pubkey: TOKEN_PROGRAM_ID, isSigner: false, isWritable: false },\n    {\n      pubkey: anchor.web3.SYSVAR_RENT_PUBKEY,\n      isSigner: false,\n      isWritable: false,\n    },\n  ];\n  return new anchor.web3.TransactionInstruction({\n    keys,\n    programId: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n    data: Buffer.from([]),\n  });\n};\n\nexport const getCandyMachineState = async (\n  anchorWallet: anchor.Wallet,\n  candyMachineId: anchor.web3.PublicKey,\n  connection: anchor.web3.Connection,\n): Promise<CandyMachineAccount> => {\n  const provider = new anchor.Provider(connection, anchorWallet, {\n    preflightCommitment: 'recent',\n  });\n\n  const idl = await anchor.Program.fetchIdl(CANDY_MACHINE_PROGRAM, provider);\n\n  const program = new anchor.Program(idl, CANDY_MACHINE_PROGRAM, provider);\n\n  const state: any = await program.account.candyMachine.fetch(candyMachineId);\n  const itemsAvailable = state.data.itemsAvailable.toNumber();\n  const itemsRedeemed = state.itemsRedeemed.toNumber();\n  const itemsRemaining = itemsAvailable - itemsRedeemed;\n\n  return {\n    id: candyMachineId,\n    program,\n    state: {\n      itemsAvailable,\n      itemsRedeemed,\n      itemsRemaining,\n      isSoldOut: itemsRemaining === 0,\n      isActive: state.data.goLiveDate.toNumber() < new Date().getTime() / 1000,\n      goLiveDate: state.data.goLiveDate,\n      treasury: state.wallet,\n      tokenMint: state.tokenMint,\n      config: state.config,\n      price: state.data.price,\n    },\n  };\n};\n\nconst getMasterEdition = async (\n  mint: anchor.web3.PublicKey,\n): Promise<anchor.web3.PublicKey> => {\n  return (\n    await anchor.web3.PublicKey.findProgramAddress(\n      [\n        Buffer.from('metadata'),\n        TOKEN_METADATA_PROGRAM_ID.toBuffer(),\n        mint.toBuffer(),\n        Buffer.from('edition'),\n      ],\n      TOKEN_METADATA_PROGRAM_ID,\n    )\n  )[0];\n};\n\nconst getMetadata = async (\n  mint: anchor.web3.PublicKey,\n): Promise<anchor.web3.PublicKey> => {\n  return (\n    await anchor.web3.PublicKey.findProgramAddress(\n      [\n        Buffer.from('metadata'),\n        TOKEN_METADATA_PROGRAM_ID.toBuffer(),\n        mint.toBuffer(),\n      ],\n      TOKEN_METADATA_PROGRAM_ID,\n    )\n  )[0];\n};\n\nexport const mintOneToken = async (\n  candyMachine: CandyMachineAccount,\n  payer: anchor.web3.PublicKey,\n): Promise<string> => {\n  const mint = anchor.web3.Keypair.generate();\n\n  const userTokenAccountAddress = (\n    await getAtaForMint(mint.publicKey, payer)\n  )[0];\n\n  const userPayingAccountAddress = (\n    await getAtaForMint(candyMachine.state.tokenMint, payer)\n  )[0];\n\n  const candyMachineAddress = candyMachine.id;\n\n  const remainingAccounts = [];\n  const signers: anchor.web3.Keypair[] = [mint];\n  const instructions = [\n    anchor.web3.SystemProgram.createAccount({\n      fromPubkey: payer,\n      newAccountPubkey: mint.publicKey,\n      space: MintLayout.span,\n      lamports:\n        await candyMachine.program.provider.connection.getMinimumBalanceForRentExemption(\n          MintLayout.span,\n        ),\n      programId: TOKEN_PROGRAM_ID,\n    }),\n    Token.createInitMintInstruction(\n      TOKEN_PROGRAM_ID,\n      mint.publicKey,\n      0,\n      payer,\n      payer,\n    ),\n    createAssociatedTokenAccountInstruction(\n      userTokenAccountAddress,\n      payer,\n      payer,\n      mint.publicKey,\n    ),\n    Token.createMintToInstruction(\n      TOKEN_PROGRAM_ID,\n      mint.publicKey,\n      userTokenAccountAddress,\n      payer,\n      [],\n      1,\n    ),\n  ];\n\n  let tokenAccount;\n  if (candyMachine.state.tokenMint) {\n    const transferAuthority = anchor.web3.Keypair.generate();\n\n    signers.push(transferAuthority);\n    remainingAccounts.push({\n      pubkey: userPayingAccountAddress,\n      isWritable: true,\n      isSigner: false,\n    });\n    remainingAccounts.push({\n      pubkey: transferAuthority.publicKey,\n      isWritable: false,\n      isSigner: true,\n    });\n\n    instructions.push(\n      Token.createApproveInstruction(\n        TOKEN_PROGRAM_ID,\n        userPayingAccountAddress,\n        transferAuthority.publicKey,\n        payer,\n        [],\n        candyMachine.state.price.toNumber(),\n      ),\n    );\n  }\n  const metadataAddress = await getMetadata(mint.publicKey);\n  const masterEdition = await getMasterEdition(mint.publicKey);\n\n  instructions.push(\n    await candyMachine.program.instruction.mintNft({\n      accounts: {\n        config: candyMachine.state.config,\n        candyMachine: candyMachineAddress,\n        payer,\n        wallet: candyMachine.state.treasury,\n        mint: mint.publicKey,\n        metadata: metadataAddress,\n        masterEdition,\n        mintAuthority: payer,\n        updateAuthority: payer,\n        tokenMetadataProgram: TOKEN_METADATA_PROGRAM_ID,\n        tokenProgram: TOKEN_PROGRAM_ID,\n        systemProgram: SystemProgram.programId,\n        rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n        clock: anchor.web3.SYSVAR_CLOCK_PUBKEY,\n      },\n      remainingAccounts:\n        remainingAccounts.length > 0 ? remainingAccounts : undefined,\n    }),\n  );\n\n  if (tokenAccount) {\n    instructions.push(\n      Token.createRevokeInstruction(\n        TOKEN_PROGRAM_ID,\n        userPayingAccountAddress,\n        payer,\n        [],\n      ),\n    );\n  }\n  try {\n    return (\n      await sendTransactionWithRetry(\n        candyMachine.program.provider.connection,\n        candyMachine.program.provider.wallet,\n        instructions,\n        signers,\n      )\n    ).txid;\n  } catch (e) {\n    console.log(e);\n  }\n  return 'j';\n};\n\nexport const shortenAddress = (address: string, chars = 4): string => {\n  return `${address.slice(0, chars)}...${address.slice(-chars)}`;\n};\n\nconst sleep = (ms: number): Promise<void> => {\n  return new Promise(resolve => setTimeout(resolve, ms));\n};\n","import * as anchor from '@project-serum/anchor';\nimport { TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { SystemProgram } from '@solana/web3.js';\nimport {\n  LAMPORTS_PER_SOL,\n  SYSVAR_RENT_PUBKEY,\n  TransactionInstruction,\n} from '@solana/web3.js';\n\nexport const FAIR_LAUNCH_PROGRAM_ID = new anchor.web3.PublicKey(\n  'GUes4PH9UcoMuhATVaT1FH5QAQja1uHep8YnPE1oxPSY',\n);\n\nexport const toDate = (value?: anchor.BN) => {\n  if (!value) {\n    return;\n  }\n\n  return new Date(value.toNumber() * 1000);\n};\n\nconst numberFormater = new Intl.NumberFormat('en-US', {\n  style: 'decimal',\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 2,\n});\n\nexport const formatNumber = {\n  format: (val?: number) => {\n    if (!val) {\n      return '--';\n    }\n\n    return numberFormater.format(val);\n  },\n  asNumber: (val?: anchor.BN) => {\n    if (!val) {\n      return undefined;\n    }\n\n    return val.toNumber() / LAMPORTS_PER_SOL;\n  },\n};\n\nexport const SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID =\n  new anchor.web3.PublicKey('ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL');\n\nexport const getFairLaunchTicketSeqLookup = async (\n  tokenMint: anchor.web3.PublicKey,\n  seq: anchor.BN,\n): Promise<[anchor.web3.PublicKey, number]> => {\n  return await anchor.web3.PublicKey.findProgramAddress(\n    [\n      Buffer.from('fair_launch'),\n      tokenMint.toBuffer(),\n      seq.toArrayLike(Buffer, 'le', 8),\n    ],\n    FAIR_LAUNCH_PROGRAM_ID,\n  );\n};\n\nexport const getAtaForMint = async (\n  mint: anchor.web3.PublicKey,\n  buyer: anchor.web3.PublicKey,\n): Promise<[anchor.web3.PublicKey, number]> => {\n  return await anchor.web3.PublicKey.findProgramAddress(\n    [buyer.toBuffer(), TOKEN_PROGRAM_ID.toBuffer(), mint.toBuffer()],\n    SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n  );\n};\n\nexport const getFairLaunchTicket = async (\n  tokenMint: anchor.web3.PublicKey,\n  buyer: anchor.web3.PublicKey,\n): Promise<[anchor.web3.PublicKey, number]> => {\n  return await anchor.web3.PublicKey.findProgramAddress(\n    [Buffer.from('fair_launch'), tokenMint.toBuffer(), buyer.toBuffer()],\n    FAIR_LAUNCH_PROGRAM_ID,\n  );\n};\n\nexport function createAssociatedTokenAccountInstruction(\n  associatedTokenAddress: anchor.web3.PublicKey,\n  payer: anchor.web3.PublicKey,\n  walletAddress: anchor.web3.PublicKey,\n  splTokenMintAddress: anchor.web3.PublicKey,\n) {\n  const keys = [\n    {\n      pubkey: payer,\n      isSigner: true,\n      isWritable: true,\n    },\n    {\n      pubkey: associatedTokenAddress,\n      isSigner: false,\n      isWritable: true,\n    },\n    {\n      pubkey: walletAddress,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: splTokenMintAddress,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: SystemProgram.programId,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: TOKEN_PROGRAM_ID,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: SYSVAR_RENT_PUBKEY,\n      isSigner: false,\n      isWritable: false,\n    },\n  ];\n  return new TransactionInstruction({\n    keys,\n    programId: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n    data: Buffer.from([]),\n  });\n}\n","import {\n  Keypair,\n  Commitment,\n  Connection,\n  RpcResponseAndContext,\n  SignatureStatus,\n  SimulatedTransactionResponse,\n  Transaction,\n  TransactionInstruction,\n  TransactionSignature,\n  Blockhash,\n  FeeCalculator,\n} from '@solana/web3.js';\n\nimport {\n  WalletNotConnectedError,\n} from '@solana/wallet-adapter-base';\n\ninterface BlockhashAndFeeCalculator {\n  blockhash: Blockhash;\n  feeCalculator: FeeCalculator;\n}\n\nexport const getErrorForTransaction = async (\n  connection: Connection,\n  txid: string,\n) => {\n  // wait for all confirmation before geting transaction\n  await connection.confirmTransaction(txid, 'max');\n\n  const tx = await connection.getParsedConfirmedTransaction(txid);\n\n  const errors: string[] = [];\n  if (tx?.meta && tx.meta.logMessages) {\n    tx.meta.logMessages.forEach(log => {\n      const regex = /Error: (.*)/gm;\n      let m;\n      while ((m = regex.exec(log)) !== null) {\n        // This is necessary to avoid infinite loops with zero-width matches\n        if (m.index === regex.lastIndex) {\n          regex.lastIndex++;\n        }\n\n        if (m.length > 1) {\n          errors.push(m[1]);\n        }\n      }\n    });\n  }\n\n  return errors;\n};\n\nexport enum SequenceType {\n  Sequential,\n  Parallel,\n  StopOnFailure,\n}\n\nexport async function sendTransactionsWithManualRetry(\n  connection: Connection,\n  wallet: any,\n  instructions: TransactionInstruction[][],\n  signers: Keypair[][],\n) {\n  let stopPoint = 0;\n  let tries = 0;\n  let lastInstructionsLength = null;\n  let toRemoveSigners: Record<number, boolean> = {};\n  instructions = instructions.filter((instr, i) => {\n    if (instr.length > 0) {\n      return true;\n    } else {\n      toRemoveSigners[i] = true;\n      return false;\n    }\n  });\n  let filteredSigners = signers.filter((_, i) => !toRemoveSigners[i]);\n\n  while (stopPoint < instructions.length && tries < 3) {\n    instructions = instructions.slice(stopPoint, instructions.length);\n    filteredSigners = filteredSigners.slice(stopPoint, filteredSigners.length);\n\n    if (instructions.length === lastInstructionsLength) tries = tries + 1;\n    else tries = 0;\n\n    try {\n      if (instructions.length === 1) {\n        await sendTransactionWithRetry(\n          connection,\n          wallet,\n          instructions[0],\n          filteredSigners[0],\n          'single',\n        );\n        stopPoint = 1;\n      } else {\n        stopPoint = await sendTransactions(\n          connection,\n          wallet,\n          instructions,\n          filteredSigners,\n          SequenceType.StopOnFailure,\n          'single',\n        );\n      }\n    } catch (e) {\n      console.error(e);\n    }\n    console.log(\n      'Died on ',\n      stopPoint,\n      'retrying from instruction',\n      instructions[stopPoint],\n      'instructions length is',\n      instructions.length,\n    );\n    lastInstructionsLength = instructions.length;\n  }\n}\n\nexport const sendTransactions = async (\n  connection: Connection,\n  wallet: any,\n  instructionSet: TransactionInstruction[][],\n  signersSet: Keypair[][],\n  sequenceType: SequenceType = SequenceType.Parallel,\n  commitment: Commitment = 'singleGossip',\n  successCallback: (txid: string, ind: number) => void = (txid, ind) => {},\n  failCallback: (reason: string, ind: number) => boolean = (txid, ind) => false,\n  block?: BlockhashAndFeeCalculator,\n): Promise<number> => {\n  if (!wallet.publicKey) throw new WalletNotConnectedError();\n\n  const unsignedTxns: Transaction[] = [];\n\n  if (!block) {\n    block = await connection.getRecentBlockhash(commitment);\n  }\n\n  for (let i = 0; i < instructionSet.length; i++) {\n    const instructions = instructionSet[i];\n    const signers = signersSet[i];\n\n    if (instructions.length === 0) {\n      continue;\n    }\n\n    let transaction = new Transaction();\n    instructions.forEach(instruction => transaction.add(instruction));\n    transaction.recentBlockhash = block.blockhash;\n    transaction.setSigners(\n      // fee payed by the wallet owner\n      wallet.publicKey,\n      ...signers.map(s => s.publicKey),\n    );\n\n    if (signers.length > 0) {\n      transaction.partialSign(...signers);\n    }\n\n    unsignedTxns.push(transaction);\n  }\n\n  const signedTxns = await wallet.signAllTransactions(unsignedTxns);\n\n  const pendingTxns: Promise<{ txid: string; slot: number }>[] = [];\n\n  let breakEarlyObject = { breakEarly: false, i: 0 };\n  console.log(\n    'Signed txns length',\n    signedTxns.length,\n    'vs handed in length',\n    instructionSet.length,\n  );\n  for (let i = 0; i < signedTxns.length; i++) {\n    const signedTxnPromise = sendSignedTransaction({\n      connection,\n      signedTransaction: signedTxns[i],\n    });\n\n    signedTxnPromise\n      .then(({ txid, slot }) => {\n        successCallback(txid, i);\n      })\n      .catch(reason => {\n        // @ts-ignore\n        failCallback(signedTxns[i], i);\n        if (sequenceType === SequenceType.StopOnFailure) {\n          breakEarlyObject.breakEarly = true;\n          breakEarlyObject.i = i;\n        }\n      });\n\n    if (sequenceType !== SequenceType.Parallel) {\n      try {\n        await signedTxnPromise;\n      } catch (e) {\n        console.log('Caught failure', e);\n        if (breakEarlyObject.breakEarly) {\n          console.log('Died on ', breakEarlyObject.i);\n          return breakEarlyObject.i; // Return the txn we failed on by index\n        }\n      }\n    } else {\n      pendingTxns.push(signedTxnPromise);\n    }\n  }\n\n  if (sequenceType !== SequenceType.Parallel) {\n    await Promise.all(pendingTxns);\n  }\n\n  return signedTxns.length;\n};\n\nexport const sendTransaction = async (\n  connection: Connection,\n  wallet: any,\n  instructions: TransactionInstruction[],\n  signers: Keypair[],\n  awaitConfirmation = true,\n  commitment: Commitment = 'singleGossip',\n  includesFeePayer: boolean = false,\n  block?: BlockhashAndFeeCalculator,\n) => {\n  if (!wallet.publicKey) throw new WalletNotConnectedError();\n\n  let transaction = new Transaction();\n  instructions.forEach(instruction => transaction.add(instruction));\n  transaction.recentBlockhash = (\n    block || (await connection.getRecentBlockhash(commitment))\n  ).blockhash;\n\n  if (includesFeePayer) {\n    transaction.setSigners(...signers.map(s => s.publicKey));\n  } else {\n    transaction.setSigners(\n      // fee payed by the wallet owner\n      wallet.publicKey,\n      ...signers.map(s => s.publicKey),\n    );\n  }\n\n  if (signers.length > 0) {\n    transaction.partialSign(...signers);\n  }\n  if (!includesFeePayer) {\n    transaction = await wallet.signTransaction(transaction);\n  }\n\n  const rawTransaction = transaction.serialize();\n  let options = {\n    skipPreflight: true,\n    commitment,\n  };\n\n  const txid = await connection.sendRawTransaction(rawTransaction, options);\n  let slot = 0;\n\n  if (awaitConfirmation) {\n    const confirmation = await awaitTransactionSignatureConfirmation(\n      txid,\n      DEFAULT_TIMEOUT,\n      connection,\n      commitment,\n    );\n\n    if (!confirmation)\n      throw new Error('Timed out awaiting confirmation on transaction');\n    slot = confirmation?.slot || 0;\n\n    if (confirmation?.err) {\n      const errors = await getErrorForTransaction(connection, txid);\n\n      console.log(errors);\n      throw new Error(`Raw transaction ${txid} failed`);\n    }\n  }\n\n  return { txid, slot };\n};\n\nexport const sendTransactionWithRetry = async (\n  connection: Connection,\n  wallet: any,\n  instructions: TransactionInstruction[],\n  signers: Keypair[],\n  commitment: Commitment = 'singleGossip',\n  includesFeePayer: boolean = false,\n  block?: BlockhashAndFeeCalculator,\n  beforeSend?: () => void,\n) => {\n  if (!wallet.publicKey) throw new WalletNotConnectedError();\n\n  let transaction = new Transaction();\n  instructions.forEach(instruction => transaction.add(instruction));\n  transaction.recentBlockhash = (\n    block || (await connection.getRecentBlockhash(commitment))\n  ).blockhash;\n\n  if (includesFeePayer) {\n    transaction.setSigners(...signers.map(s => s.publicKey));\n  } else {\n    transaction.setSigners(\n      // fee payed by the wallet owner\n      wallet.publicKey,\n      ...signers.map(s => s.publicKey),\n    );\n  }\n\n  if (signers.length > 0) {\n    transaction.partialSign(...signers);\n  }\n  if (!includesFeePayer) {\n    transaction = await wallet.signTransaction(transaction);\n  }\n\n  if (beforeSend) {\n    beforeSend();\n  }\n\n  const { txid, slot } = await sendSignedTransaction({\n    connection,\n    signedTransaction: transaction,\n  });\n\n  return { txid, slot };\n};\n\nexport const getUnixTs = () => {\n  return new Date().getTime() / 1000;\n};\n\nconst DEFAULT_TIMEOUT = 15000;\n\nexport async function sendSignedTransaction({\n  signedTransaction,\n  connection,\n  timeout = DEFAULT_TIMEOUT,\n}: {\n  signedTransaction: Transaction;\n  connection: Connection;\n  sendingMessage?: string;\n  sentMessage?: string;\n  successMessage?: string;\n  timeout?: number;\n}): Promise<{ txid: string; slot: number }> {\n  const rawTransaction = signedTransaction.serialize();\n  const startTime = getUnixTs();\n  let slot = 0;\n  const txid: TransactionSignature = await connection.sendRawTransaction(\n    rawTransaction,\n    {\n      skipPreflight: true,\n    },\n  );\n\n  console.log('Started awaiting confirmation for', txid);\n\n  let done = false;\n  (async () => {\n    while (!done && getUnixTs() - startTime < timeout) {\n      connection.sendRawTransaction(rawTransaction, {\n        skipPreflight: true,\n      });\n      await sleep(500);\n    }\n  })();\n  try {\n    const confirmation = await awaitTransactionSignatureConfirmation(\n      txid,\n      timeout,\n      connection,\n      'recent',\n      true,\n    );\n\n    if (!confirmation)\n      throw new Error('Timed out awaiting confirmation on transaction');\n\n    if (confirmation.err) {\n      console.error(confirmation.err);\n      throw new Error('Transaction failed: Custom instruction error');\n    }\n\n    slot = confirmation?.slot || 0;\n  } catch (err: any) {\n    console.error('Timeout Error caught', err);\n    if (err.timeout) {\n      throw new Error('Timed out awaiting confirmation on transaction');\n    }\n    let simulateResult: SimulatedTransactionResponse | null = null;\n    try {\n      simulateResult = (\n        await simulateTransaction(connection, signedTransaction, 'single')\n      ).value;\n    } catch (e) {}\n    if (simulateResult && simulateResult.err) {\n      if (simulateResult.logs) {\n        for (let i = simulateResult.logs.length - 1; i >= 0; --i) {\n          const line = simulateResult.logs[i];\n          if (line.startsWith('Program log: ')) {\n            throw new Error(\n              'Transaction failed: ' + line.slice('Program log: '.length),\n            );\n          }\n        }\n      }\n      throw new Error(JSON.stringify(simulateResult.err));\n    }\n    // throw new Error('Transaction failed');\n  } finally {\n    done = true;\n  }\n\n  console.log('Latency', txid, getUnixTs() - startTime);\n  return { txid, slot };\n}\n\nasync function simulateTransaction(\n  connection: Connection,\n  transaction: Transaction,\n  commitment: Commitment,\n): Promise<RpcResponseAndContext<SimulatedTransactionResponse>> {\n  // @ts-ignore\n  transaction.recentBlockhash = await connection._recentBlockhash(\n    // @ts-ignore\n    connection._disableBlockhashCaching,\n  );\n\n  const signData = transaction.serializeMessage();\n  // @ts-ignore\n  const wireTransaction = transaction._serialize(signData);\n  const encodedTransaction = wireTransaction.toString('base64');\n  const config: any = { encoding: 'base64', commitment };\n  const args = [encodedTransaction, config];\n\n  // @ts-ignore\n  const res = await connection._rpcRequest('simulateTransaction', args);\n  if (res.error) {\n    throw new Error('failed to simulate transaction: ' + res.error.message);\n  }\n  return res.result;\n}\n\nasync function awaitTransactionSignatureConfirmation(\n  txid: TransactionSignature,\n  timeout: number,\n  connection: Connection,\n  commitment: Commitment = 'recent',\n  queryStatus = false,\n): Promise<SignatureStatus | null | void> {\n  let done = false;\n  let status: SignatureStatus | null | void = {\n    slot: 0,\n    confirmations: 0,\n    err: null,\n  };\n  let subId = 0;\n  status = await new Promise(async (resolve, reject) => {\n    setTimeout(() => {\n      if (done) {\n        return;\n      }\n      done = true;\n      console.log('Rejecting for timeout...');\n      reject({ timeout: true });\n    }, timeout);\n    try {\n      subId = connection.onSignature(\n        txid,\n        (result, context) => {\n          done = true;\n          status = {\n            err: result.err,\n            slot: context.slot,\n            confirmations: 0,\n          };\n          if (result.err) {\n            console.log('Rejected via websocket', result.err);\n            reject(status);\n          } else {\n            console.log('Resolved via websocket', result);\n            resolve(status);\n          }\n        },\n        commitment,\n      );\n    } catch (e) {\n      done = true;\n      console.error('WS error in setup', txid, e);\n    }\n    while (!done && queryStatus) {\n      // eslint-disable-next-line no-loop-func\n      (async () => {\n        try {\n          const signatureStatuses = await connection.getSignatureStatuses([\n            txid,\n          ]);\n          status = signatureStatuses && signatureStatuses.value[0];\n          if (!done) {\n            if (!status) {\n              console.log('REST null result for', txid, status);\n            } else if (status.err) {\n              console.log('REST error for', txid, status);\n              done = true;\n              reject(status.err);\n            } else if (!status.confirmations) {\n              console.log('REST no confirmations for', txid, status);\n            } else {\n              console.log('REST confirmation for', txid, status);\n              done = true;\n              resolve(status);\n            }\n          }\n        } catch (e) {\n          if (!done) {\n            console.log('REST connection error: txid', txid, e);\n          }\n        }\n      })();\n      await sleep(2000);\n    }\n  });\n\n  //@ts-ignore\n  if (connection._signatureSubscriptions[subId])\n    connection.removeSignatureListener(subId);\n  done = true;\n  console.log('Returning status', status);\n  return status;\n}\nexport function sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n","import { useEffect, useMemo, useState } from 'react';\nimport styled from 'styled-components';\nimport {\n  CircularProgress,\n  Container,\n  IconButton,\n  Link,\n  Slider,\n  Snackbar,\n} from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport { createStyles, Theme } from '@material-ui/core/styles';\nimport { PhaseCountdown } from './countdown';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport Alert from '@material-ui/lab/Alert';\n\nimport * as anchor from '@project-serum/anchor';\n\nimport { LAMPORTS_PER_SOL } from '@solana/web3.js';\n\nimport { useWallet } from '@solana/wallet-adapter-react';\nimport { WalletDialogButton } from '@solana/wallet-adapter-material-ui';\n\nimport {\n  awaitTransactionSignatureConfirmation,\n  CandyMachineAccount,\n  getCandyMachineState,\n  mintOneToken,\n} from './candy-machine';\n\nimport {\n  FairLaunchAccount,\n  getFairLaunchState,\n  punchTicket,\n  purchaseTicket,\n  receiveRefund,\n} from './fair-launch';\n\nimport { formatNumber, getAtaForMint, toDate } from './utils';\nimport Countdown from 'react-countdown';\n\nconst ConnectButton = styled(WalletDialogButton)`\n  width: 100%;\n  height: 60px;\n  margin-top: 2px;\n  margin-bottom: 1px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n`;\n\nconst MintContainer = styled.div``; // add your styles here\n\nconst MintButton = styled(Button)`\n  width: 100%;\n  height: 60px;\n  margin-top: 2px;\n  margin-bottom: 1px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n`; // add your styles here\n\nconst dialogStyles: any = (theme: Theme) =>\n  createStyles({\n    root: {\n      margin: 0,\n      padding: theme.spacing(2),\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500],\n    },\n  });\n\nconst ValueSlider = styled(Slider)({\n  color: '#C0D5FE',\n  height: 8,\n  '& > *': {\n    height: 4,\n  },\n  '& .MuiSlider-track': {\n    border: 'none',\n    height: 4,\n  },\n  '& .MuiSlider-thumb': {\n    height: 24,\n    width: 24,\n    marginTop: -10,\n    background: 'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)',\n    border: '2px solid currentColor',\n    '&:focus, &:hover, &.Mui-active, &.Mui-focusVisible': {\n      boxShadow: 'inherit',\n    },\n    '&:before': {\n      display: 'none',\n    },\n  },\n  '& .MuiSlider-valueLabel': {\n    '& > *': {\n      background: 'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)',\n    },\n    lineHeight: 1.2,\n    fontSize: 12,\n    padding: 0,\n    width: 32,\n    height: 32,\n    marginLeft: 9,\n  },\n});\n\nconst ValueSlider2 = styled(Slider)({\n  color: '#C0D5FE',\n  height: 8,\n  '& > *': {\n    height: 4,\n  },\n  '& .MuiSlider-track': {\n    border: 'none',\n    height: 4,\n  },\n  '& .MuiSlider-thumb': {\n    height: 24,\n    width: 24,\n    marginTop: -10,\n    background: 'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)',\n    border: '2px solid currentColor',\n    '&:focus, &:hover, &.Mui-active, &.Mui-focusVisible': {\n      boxShadow: 'inherit',\n    },\n    '&:before': {\n      display: 'none',\n    },\n  },\n  '& .MuiSlider-valueLabel': {\n    '& > *': {\n      background: 'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)',\n    },\n    lineHeight: 1.2,\n    fontSize: 12,\n    padding: 0,\n    width: 32,\n    height: 32,\n    marginLeft: 9,\n  },\n});\nconst ValueSlider3 = styled(Slider)({\n  color: '#C0D5FE',\n  height: 8,\n  '& > *': {\n    height: 4,\n  },\n  '& .MuiSlider-track': {\n    border: 'none',\n    height: 4,\n  },\n  '& .MuiSlider-thumb': {\n    height: 24,\n    width: 24,\n    marginTop: -10,\n    background: 'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)',\n    border: '2px solid currentColor',\n    '&:focus, &:hover, &.Mui-active, &.Mui-focusVisible': {\n      boxShadow: 'inherit',\n    },\n    '&:before': {\n      display: 'none',\n    },\n  },\n  '& .MuiSlider-valueLabel': {\n    '& > *': {\n      background: 'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)',\n    },\n    lineHeight: 1.2,\n    fontSize: 12,\n    padding: 0,\n    width: 32,\n    height: 32,\n    marginLeft: 9,\n  },\n});\nconst ValueSlider4 = styled(Slider)({\n  color: '#C0D5FE',\n  height: 8,\n  '& > *': {\n    height: 4,\n  },\n  '& .MuiSlider-track': {\n    border: 'none',\n    height: 4,\n  },\n  '& .MuiSlider-thumb': {\n    height: 24,\n    width: 24,\n    marginTop: -10,\n    background: 'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)',\n    border: '2px solid currentColor',\n    '&:focus, &:hover, &.Mui-active, &.Mui-focusVisible': {\n      boxShadow: 'inherit',\n    },\n    '&:before': {\n      display: 'none',\n    },\n  },\n  '& .MuiSlider-valueLabel': {\n    '& > *': {\n      background: 'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)',\n    },\n    lineHeight: 1.2,\n    fontSize: 12,\n    padding: 0,\n    width: 32,\n    height: 32,\n    marginLeft: 9,\n  },\n});\nenum Phase {\n  Phase0,\n  Phase1,\n  Phase2,\n  Lottery,\n  Phase3,\n  Phase4,\n  Unknown,\n}\n\nconst Header = (props: {\n  phaseName: string;\n  desc: string;\n  date: anchor.BN | undefined;\n  status?: string;\n}) => {\n  const { phaseName, desc, date, status } = props;\n  return (\n    <Grid container justifyContent=\"center\">\n      <Grid xs={6} justifyContent=\"center\" direction=\"column\">\n        <Typography variant=\"h5\" style={{ fontWeight: 600 }}>\n          {phaseName}\n        </Typography>\n        <Typography variant=\"body1\" color=\"textSecondary\">\n          {desc}\n        </Typography>\n      </Grid>\n      <Grid xs={6} container justifyContent=\"flex-end\">\n        <PhaseCountdown\n          date={toDate(date)}\n          style={{ justifyContent: 'flex-end' }}\n          status={status || 'Any bid you set will be reset to 0, and you only pay network fees.'}\n        />\n      </Grid>\n    </Grid>\n  );\n};\nlet first = true;\nfunction getPhase(\n  fairLaunch: FairLaunchAccount | undefined,\n  candyMachine: CandyMachineAccount | undefined,\n): Phase {\n  const curr = new Date().getTime();\n\n    const phaseOne = toDate(fairLaunch?.state.data.phaseOneStart)?.getTime();\n    const phaseOneEnd = toDate(fairLaunch?.state.data.phaseOneEnd)?.getTime();\n  const phaseTwoEnd = toDate(fairLaunch?.state.data.phaseTwoEnd)?.getTime();\n  const candyMachineGoLive = toDate(candyMachine?.state.goLiveDate)?.getTime();\n\n\n  return Phase.Phase1;\n}\n\nexport interface HomeProps {\n  candyMachineId?: anchor.web3.PublicKey;\n  fairLaunchId: anchor.web3.PublicKey;\n  connection: anchor.web3.Connection;\n  startDate: number;\n  txTimeout: number;\n}\n\nconst FAIR_LAUNCH_LOTTERY_SIZE =\n  8 + // discriminator\n  32 + // fair launch\n  1 + // bump\n  8; // size of bitmask ones\n\nconst isWinner = (\n  fairLaunch: FairLaunchAccount | undefined,\n  fairLaunchBalance: number,\n): boolean => {\n  if (fairLaunchBalance > 0) return true;\n  if (\n    !fairLaunch?.lottery.data ||\n    !fairLaunch?.lottery.data.length ||\n    !fairLaunch?.ticket.data?.seq ||\n    !fairLaunch?.state.phaseThreeStarted\n  ) {\n    return false;\n  }\n\n  const myByte =\n    fairLaunch.lottery.data[\n      FAIR_LAUNCH_LOTTERY_SIZE +\n        Math.floor(fairLaunch.ticket.data?.seq.toNumber() / 8)\n    ];\n\n  const positionFromRight = 7 - (fairLaunch.ticket.data?.seq.toNumber() % 8);\n  const mask = Math.pow(2, positionFromRight);\n  const isWinner = myByte & mask;\n  return isWinner > 0;\n};\n\nconst Home = (props: HomeProps) => {\n  const [fairLaunchBalance, setFairLaunchBalance] = useState<number>(0);\n  const [yourSOLBalance, setYourSOLBalance] = useState<number | null>(null);\n\n  const [isMinting, setIsMinting] = useState(false); // true when user got to press MINT\n  const [contributed, setContributed] = useState(0);\nconst [contributed2, setContributed2] = useState(0);\nconst [contributed3, setContributed3] = useState(0);\nconst [contributed4, setContributed4] = useState(0);\nsetTimeout(async function(){\n  if (first){\n    // @ts-ignore \n  setContributed(min)\nfirst = false\n}\n}, 5000)\n  const wallet = useWallet();\n\n  const anchorWallet = useMemo(() => {\n    if (\n      !wallet ||\n      !wallet.publicKey ||\n      !wallet.signAllTransactions ||\n      !wallet.signTransaction\n    ) {\n      return;\n    }\n\n    return {\n      publicKey: wallet.publicKey,\n      signAllTransactions: wallet.signAllTransactions,\n      signTransaction: wallet.signTransaction,\n    } as anchor.Wallet;\n  }, [wallet]);\n\n  const [alertState, setAlertState] = useState<AlertState>({\n    open: false,\n    message: '',\n    severity: undefined,\n  });\n\n  const [fairLaunch, setFairLaunch] = useState<FairLaunchAccount>();\n  const [candyMachine, setCandyMachine] = useState<CandyMachineAccount>();\n  const [howToOpen, setHowToOpen] = useState(false);\n  const [refundExplainerOpen, setRefundExplainerOpen] = useState(false);\n  const [antiRugPolicyOpen, setAnitRugPolicyOpen] = useState(false);\n\n  const onMint = async () => {\n    try {\n      setIsMinting(true);\n      if (wallet.connected && candyMachine?.program && wallet.publicKey) {\n        if (\n          fairLaunch?.ticket.data?.state.unpunched &&\n          isWinner(fairLaunch, fairLaunchBalance)\n        ) {\n          await onPunchTicket();\n        }\n\n        const mintTxId = await mintOneToken(candyMachine, wallet.publicKey);\n\n        const status = await awaitTransactionSignatureConfirmation(\n          mintTxId,\n          props.txTimeout,\n          props.connection,\n          'singleGossip',\n          false,\n        );\n\n        if (!status?.err) {\n          setAlertState({\n            open: true,\n            message: 'Congratulations! Mint succeeded!',\n            severity: 'success',\n          });\n        } else {\n          setAlertState({\n            open: true,\n            message: 'Mint failed! Please try again!',\n            severity: 'error',\n          });\n        }\n      }\n    } catch (error: any) {\n      // TODO: blech:\n      let message = error.msg || 'Minting failed! Please try again!';\n      if (!error.msg) {\n        if (!error.message) {\n          message = 'Transaction Timeout! Please try again.';\n        } else if (error.message.indexOf('0x138')) {\n        } else if (error.message.indexOf('0x137')) {\n          message = `SOLD OUT!`;\n        } else if (error.message.indexOf('0x135')) {\n          message = `Insufficient funds to mint. Please fund your wallet.`;\n        }\n      } else {\n        if (error.code === 311) {\n          message = `SOLD OUT!`;\n          window.location.reload();\n        } else if (error.code === 312) {\n          message = `Minting period hasn't started yet.`;\n        }\n      }\n\n      setAlertState({\n        open: true,\n        message,\n        severity: 'error',\n      });\n    } finally {\n      setIsMinting(false);\n    }\n  };\n\n  useEffect(() => {\n    (async () => {\n      if (!anchorWallet) {\n        return;\n      }\n\n      try {\n        const balance = await props.connection.getBalance(\n          anchorWallet.publicKey,\n        );\n        setYourSOLBalance(balance);\n\n        const state = await getFairLaunchState(\n          anchorWallet,\n          props.fairLaunchId,\n          props.connection,\n        );\n\n        setFairLaunch(state);\n\n        try {\n          if (state.state.tokenMint) {\n            const fairLaunchBalance =\n              await props.connection.getTokenAccountBalance(\n                (\n                  await getAtaForMint(\n                    state.state.tokenMint,\n                    anchorWallet.publicKey,\n                  )\n                )[0],\n              );\n\n            if (fairLaunchBalance.value) {\n              setFairLaunchBalance(fairLaunchBalance.value.uiAmount || 0);\n            }\n          }\n        } catch (e) {\n          console.log('Problem getting fair launch token balance');\n          console.log(e);\n        }\n\n      } catch (e) {\n        console.log('Problem getting fair launch state');\n        console.log(e);\n      }\n      if (props.candyMachineId) {\n        try {\n          const cndy = await getCandyMachineState(\n            anchorWallet,\n            props.candyMachineId,\n            props.connection,\n          );\n          setCandyMachine(cndy);\n        } catch (e) {\n          console.log('Problem getting candy machine state');\n          console.log(e);\n        }\n      } else {\n        console.log('No candy machine detected in configuration.');\n      }\n    })();\n  }, [\n    anchorWallet,\n    props.candyMachineId,\n    props.connection,\n    props.fairLaunchId,\n  ]);\nconst phaseOneEnd =  toDate(fairLaunch?.state.data.phaseOneEnd)?.getTime();\n  const min = formatNumber.asNumber(fairLaunch?.state.data.priceRangeStart);\n  const fee = formatNumber.asNumber(fairLaunch?.state.data.fee);\n  const max = formatNumber.asNumber(fairLaunch?.state.data.priceRangeEnd);\n  const step = formatNumber.asNumber(fairLaunch?.state.data.tickSize);\n  const median = formatNumber.asNumber(fairLaunch?.state.currentMedian);\n\nlet highest\n// @ts-ignore\n  if (fairLaunch?.state.currentHighest != undefined){\n// @ts-ignore\nhighest = formatNumber.asNumber(fairLaunch?.state.currentHighest);\n  }\n  else {\n    highest = 1000000000\n  } \n  const marks = [\n   \n    // TODO:L\n    {\n      value: min || 0,\n      label:  `${min} SOL`,\n    },\n    // display user comitted value\n    // {\n    //   value: 37,\n    //   label: '37C',\n    // },\n    {\n      value: max || 0,\n      label: `${max} SOL`,\n    },\n  ].filter(_ => _ !== undefined && _.value !== 0) as any;\n\n  const onDeposit = async () => {\n    if (!anchorWallet) {\n      return;\n    }\n    console.log('deposit');\n    setIsMinting(true);\n    try {\n\n    \n  \n      await purchaseTicket(contributed, anchorWallet, fairLaunch);\n    \n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: `Congratulations! Bid ${\n          fairLaunch?.ticket.data ? 'updated' : 'inserted'\n        }!`,\n        severity: 'success',\n      });\n    } catch (e) {\n      console.log(e);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: 'Something went wrong.',\n        severity: 'error',\n      });\n    }\n  };\n  const onRugRefund = async () => {\n    if (!anchorWallet) {\n      return;\n    }\n\n    console.log('refund');\n    try {\n      setIsMinting(true);\n      await receiveRefund(anchorWallet, fairLaunch);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message:\n          'Congratulations! You have received a refund. This is an irreversible action.',\n        severity: 'success',\n      });\n    } catch (e) {\n      console.log(e);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: 'Something went wrong.',\n        severity: 'error',\n      });\n    }\n  };\n  const onRefundTicket = async () => {\n\n  };\n\n  const onPunchTicket = async () => {\n    if (!anchorWallet || !fairLaunch || !fairLaunch.ticket) {\n      return;\n    }\n\n    console.log('punch');\n    setIsMinting(true);\n    try {\n      await punchTicket(anchorWallet, fairLaunch);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: 'Congratulations! Ticket punched!',\n        severity: 'success',\n      });\n    } catch (e) {\n      console.log(e);\n      setIsMinting(false);\n      setAlertState({\n        open: true,\n        message: 'Something went wrong.',\n        severity: 'error',\n      });\n    }\n  };\n\n  const phase = getPhase(fairLaunch, candyMachine);\n\n  const candyMachinePredatesFairLaunch =\n    candyMachine?.state.goLiveDate &&\n    fairLaunch?.state.data.phaseTwoEnd &&\n    candyMachine?.state.goLiveDate.lt(fairLaunch?.state.data.phaseTwoEnd);\n\n  const notEnoughSOL = false;\n  // @ts-ignore\n   \n  return (\n    <Container style={{ marginTop: 0 }}>\n    <div>{fee} SOL flat per bid and 10% of the bid.</div>\n      <Container maxWidth=\"xs\" style={{ position: 'relative' }}>\n        <Paper\n          style={{ padding: 24, backgroundColor: '#151A1F', borderRadius: 6 }}\n        >\n          <Grid container justifyContent=\"center\" direction=\"column\">\n            {phase === Phase.Phase0 && (\n              <Header\n                phaseName={'Phase 0'}\n                desc={'Anticipation Phase'}\n                date={fairLaunch?.state.data.phaseOneStart}\n              />\n            )}\n            {phase === Phase.Phase1 && (\n              <div>\n              <Header\n                phaseName={'This is NOT FLP!'}\n                desc={'Btw you need to move your slider to bid. You may lose all your $. Risk only what you can afford to lose.'}\n                date={fairLaunch?.state.data.phaseOneEnd}\n              />\n\n              <Typography variant=\"h5\" style={{ fontWeight: 900 }}>\n                    \n                    {fairLaunch?.state.authority.toBase58().slice(0, 3) +\n                      '...' +\n                      fairLaunch?.state.authority\n                        .toBase58()\n                        .slice(\n                          fairLaunch?.state.authority.toBase58().length - 3,\n                          fairLaunch?.state.authority.toBase58().length,\n                        )}{' '}\n                    is Going to Win 1st Prize of {''}\n\n                    { // @ts-ignore\n                      formatNumber.format(fairLaunch?.treasury / LAMPORTS_PER_SOL)}! If nobody outbids 'em _soon_ \n                     { // @ts-ignore\n                      formatNumber.format(fairLaunch?.state.current_highest / LAMPORTS_PER_SOL)}! This be the current winning bid.\n                  </Typography>\n                  </div>  \n            )}\n\n            {phase === Phase.Phase2 && (\n              <Header\n                phaseName={'Hey press the mint $'}\n                desc={'It\\'ll pay the winner, you pay sol fees, then restart this game:)'}\n                date={fairLaunch?.state.data.phaseTwoEnd}\n              />\n            )}\n\n            {phase === Phase.Lottery && (\n              <Header\n                phaseName={'Phase 3'}\n                desc={'Raffle in progress'}\n                date={fairLaunch?.state.data.phaseTwoEnd.add(\n                  fairLaunch?.state.data.lotteryDuration,\n                )}\n              />\n            )}\n\n            {phase === Phase.Phase3 && !candyMachine && (\n              <Header\n                phaseName={'Phase 3'}\n                desc={'Raffle finished!'}\n                date={fairLaunch?.state.data.phaseTwoEnd}\n              />\n            )}\n\n            {phase === Phase.Phase3 && candyMachine && (\n              <Header\n                phaseName={'Phase 3'}\n                desc={'Minting starts in...'}\n                date={candyMachine?.state.goLiveDate}\n              />\n            )}\n\n            {phase === Phase.Phase4 && (\n              <Header\n                phaseName={\n                  candyMachinePredatesFairLaunch ? 'Phase 3' : 'Phase 4'\n                }\n                desc={'Candy Time   '}\n                date={candyMachine?.state.goLiveDate}\n                status=\"LIVE\"\n              />\n            )}\n\n            {fairLaunch && (\n              <>\n                {[\n                  Phase.Phase1,\n                  Phase.Phase2,\n                  Phase.Phase3,\n                  Phase.Lottery,\n                ].includes(phase) &&\n                  fairLaunch?.ticket?.data?.state.withdrawn && (\n                    <div style={{ paddingTop: '15px' }}>\n                      <Alert severity=\"error\">\n                        Your bid was withdrawn and cannot be adjusted or\n                        re-inserted.\n                      </Alert>\n                    </div>\n                  )}\n                {[Phase.Phase1, Phase.Phase2].includes(phase) &&\n                  fairLaunch.state.currentMedian &&\n                  fairLaunch?.ticket?.data?.amount &&\n                  !fairLaunch?.ticket?.data?.state.withdrawn &&\n                  fairLaunch.state.currentMedian.gt(\n                    fairLaunch?.ticket?.data?.amount,\n                  ) && (\n                    <div style={{ paddingTop: '15px' }}>\n                      <Alert severity=\"warning\">\n                        Your bid is currently below the median and will not be\n                        eligible for the raffle.\n                      </Alert>\n                    </div>\n                  )}\n                {[Phase.Phase3, Phase.Lottery].includes(phase) &&\n                  fairLaunch.state.currentMedian &&\n                  fairLaunch?.ticket?.data?.amount &&\n                  !fairLaunch?.ticket?.data?.state.withdrawn &&\n                  fairLaunch.state.currentMedian.gt(\n                    fairLaunch?.ticket?.data?.amount,\n                  ) && (\n                    <div style={{ paddingTop: '15px' }}>\n                      <Alert severity=\"error\">\n                        Your bid was below the median and was not included in\n                        the raffle. You may click <em>Withdraw</em> when the\n                        raffle ends or you will be automatically issued one when\n                        the Fair Launch authority withdraws from the treasury.\n                      </Alert>\n                    </div>\n                  )}\n                {notEnoughSOL && (\n                  <Alert severity=\"error\">\n                    You do not have enough SOL in your account to place this\n                    bid.\n                  </Alert>\n                )}\n              </>\n            )}\n\n            {[Phase.Phase1, Phase.Phase2].includes(phase) && (\n              \n              <>\n                <Grid style={{ marginTop: 40, marginBottom: 20 }}>\n                  <ValueSlider\n                    min={min}\n                    marks={marks}\n                    max={max}\n                    step={step}\n                    value={contributed}\n                    onChange={(ev, val) => setContributed(val as any)}\n                    valueLabelDisplay=\"auto\"\n                    style={{\n                      width: 'calc(100% - 40px)',\n                      marginLeft: 20,\n                      height: 30,\n                    }}\n                  />\n                </Grid>\n              </>\n            )}\n\n            {!wallet.connected ? (\n              <ConnectButton>\n                Connect{' '}\n                {[Phase.Phase1].includes(phase) ? 'to bid' : 'to see status'}\n              </ConnectButton>\n            ) : ( \n              <div>\n                {[Phase.Phase1, Phase.Phase2].includes(phase) && (\n                  <>\n                    <MintButton\n                      onClick={onDeposit}\n                      variant=\"contained\"\n                      disabled={\n                        false \n                      }\n                    >\n                      {isMinting ? (\n                        <CircularProgress />\n                      ) : !fairLaunch?.ticket.data ? (\n                        'Place bid'\n                      ) : (\n                        'New Bids != adjusting.'\n                      )}\n                      {}\n                    </MintButton>\n                  </>\n                )}\n                 \n\n                {[Phase.Phase3].includes(phase) && (\n                  <>\n                    {isWinner(fairLaunch, fairLaunchBalance) && (\n                      <MintButton\n                        onClick={onPunchTicket}\n                        variant=\"contained\"\n                        disabled={\n                          fairLaunch?.ticket.data?.state.punched !== undefined\n                        }\n                      >\n                        {isMinting ? <CircularProgress /> : 'Punch Ticket'}\n                      </MintButton>\n                    )}\n\n                    {!isWinner(fairLaunch, fairLaunchBalance) && (\n                      <MintButton\n                        onClick={onRefundTicket}\n                        variant=\"contained\"\n                        disabled={\n                          isMinting ||\n                          fairLaunch?.ticket.data === undefined ||\n                          fairLaunch?.ticket.data?.state.withdrawn !== undefined\n                        }\n                      >\n                        {isMinting ? <CircularProgress /> : 'Withdraw'}\n                      </MintButton>\n                    )}\n                  </>\n                )}\n\n                {phase === Phase.Phase4 && (\n                  <>\n                    {(!fairLaunch ||\n                      isWinner(fairLaunch, fairLaunchBalance)) && (\n                      <MintContainer>\n                        <MintButton\n                          disabled={\n                            candyMachine?.state.isSoldOut ||\n                            isMinting ||\n                            !candyMachine?.state.isActive ||\n                            (fairLaunch?.ticket?.data?.state.punched &&\n                              fairLaunchBalance === 0)\n                          }\n                          onClick={onMint}\n                          variant=\"contained\"\n                        >\n                          {fairLaunch?.ticket?.data?.state.punched &&\n                          fairLaunchBalance === 0 ? (\n                            'MINTED'\n                          ) : candyMachine?.state.isSoldOut ? (\n                            'SOLD OUT'\n                          ) : isMinting ? (\n                            <CircularProgress />\n                          ) : (\n                            'MINT'\n                          )}\n                        </MintButton>\n                      </MintContainer>\n                    )}\n\n                    {!isWinner(fairLaunch, fairLaunchBalance) && (\n                      <MintButton\n                        onClick={onRefundTicket}\n                        variant=\"contained\"\n                        disabled={\n                          isMinting ||\n                          fairLaunch?.ticket.data === undefined ||\n                          fairLaunch?.ticket.data?.state.withdrawn !== undefined\n                        }\n                      >\n                        {isMinting ? <CircularProgress /> : 'Withdraw'}\n                      </MintButton>\n                    )}\n                  </>\n                )}\n              </div>\n            )}\n\n            <Grid\n              container\n              justifyContent=\"space-between\"\n              color=\"textSecondary\"\n            >\n              <Link\n                component=\"button\"\n                variant=\"body2\"\n                color=\"textSecondary\"\n                align=\"left\"\n                onClick={() => {\n                  setHowToOpen(true);\n                }}\n              >\n                Wat is this\n              </Link>\n\n            </Grid>\n            <Dialog\n              open={refundExplainerOpen}\n              onClose={() => setRefundExplainerOpen(false)}\n              PaperProps={{\n                style: { backgroundColor: '#222933', borderRadius: 6 },\n              }}\n            >\n              <MuiDialogContent style={{ padding: 24 }}>\n                During raffle phases, or if you are a winner, or if this website\n                is not configured to be a fair launch but simply a candy\n                machine, refunds are disallowed.\n              </MuiDialogContent>\n            </Dialog>\n            <Dialog\n              open={antiRugPolicyOpen}\n              onClose={() => {\n                setAnitRugPolicyOpen(false);\n              }}\n              PaperProps={{\n                style: { backgroundColor: '#222933', borderRadius: 6 },\n              }}\n            >\n              <MuiDialogContent style={{ padding: 24 }}>\n                {!fairLaunch?.state.data.antiRugSetting && (\n                  <span>This Fair Launch has no anti-rug settings.</span>\n                )}\n                {fairLaunch?.state.data.antiRugSetting &&\n                  fairLaunch.state.data.antiRugSetting.selfDestructDate && (\n                    <div>\n                      <h3>Anti-Rug Policy</h3>\n                      <p>\n                        This raffle is governed by a smart contract to prevent\n                        the artist from running away with your money.\n                      </p>\n                      <p>How it works:</p>\n                      This project will retain{' '}\n                      {fairLaunch.state.data.antiRugSetting.reserveBp / 100}% ({' '}\n                      {(fairLaunch?.treasury *\n                        fairLaunch.state.data.antiRugSetting.reserveBp) /\n                        (LAMPORTS_PER_SOL * 10000)}\n                      ) of the pledged amount in a locked state until all but{' '}\n                      {fairLaunch.state.data.antiRugSetting.tokenRequirement.toNumber()}{' '}\n                      NFTs (out of up to{' '}\n                      {fairLaunch.state.data.numberOfTokens.toNumber()}) have\n                      been minted.\n                      <p>\n                        If more than{' '}\n                        {fairLaunch.state.data.antiRugSetting.tokenRequirement.toNumber()}{' '}\n                        NFTs remain as of{' '}\n                        {toDate(\n                          fairLaunch.state.data.antiRugSetting.selfDestructDate,\n                        )?.toLocaleDateString()}{' '}\n                        at{' '}\n                        {toDate(\n                          fairLaunch.state.data.antiRugSetting.selfDestructDate,\n                        )?.toLocaleTimeString()}\n                        , you will have the option to get a refund of{' '}\n                        {fairLaunch.state.data.antiRugSetting.reserveBp / 100}%\n                        of the cost of your token.\n                      </p>\n                      {fairLaunch?.ticket?.data &&\n                        !fairLaunch?.ticket?.data.state.withdrawn && (\n                          <MintButton\n                            onClick={onRugRefund}\n                            variant=\"contained\"\n                            disabled={\n                              !!!fairLaunch.ticket.data ||\n                              !fairLaunch.ticket.data.state.punched ||\n                              Date.now() / 1000 <\n                                fairLaunch.state.data.antiRugSetting.selfDestructDate.toNumber()\n                            }\n                          >\n                            {isMinting ? (\n                              <CircularProgress />\n                            ) : Date.now() / 1000 <\n                              fairLaunch.state.data.antiRugSetting.selfDestructDate.toNumber() ? (\n                              <span>\n                                Refund in...\n                                <Countdown\n                                  date={toDate(\n                                    fairLaunch.state.data.antiRugSetting\n                                      .selfDestructDate,\n                                  )}\n                                />\n                              </span>\n                            ) : (\n                              'Refund'\n                            )}\n                            {}\n                          </MintButton>\n                        )}\n                      <div style={{ textAlign: 'center', marginTop: '-5px' }}>\n                        {fairLaunch?.ticket?.data &&\n                          !fairLaunch?.ticket?.data?.state.punched && (\n                            <small>\n                              You currently have a ticket but it has not been\n                              punched yet, so cannot be refunded.\n                            </small>\n                          )}\n                      </div>\n                    </div>\n                  )}\n              </MuiDialogContent>\n            </Dialog>\n            <Dialog\n              open={howToOpen}\n              onClose={() => setHowToOpen(false)}\n              PaperProps={{\n                style: { backgroundColor: '#222933', borderRadius: 6 },\n              }}\n            >\n              <MuiDialogTitle\n                disableTypography\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'space-between',\n                }}\n              >\n                <Link\n                  component=\"button\"\n                  variant=\"h6\"\n                  color=\"textSecondary\"\n                  onClick={() => {\n                    setHowToOpen(true);\n                  }}\n                >\n                  How it works\n                </Link>\n                <IconButton\n                  aria-label=\"close\"\n                  className={dialogStyles.closeButton}\n                  onClick={() => setHowToOpen(false)}\n                >\n                  <CloseIcon />\n                </IconButton>\n              </MuiDialogTitle>\n              <MuiDialogContent>\n                <Typography variant=\"h6\">\n                  There is one phase.\n                </Typography>\n                <Typography gutterBottom color=\"textSecondary\">\n                  You contribute. When you do for a particular game the ranges increase and the entry into all games is reduced a bit.\n                </Typography>\n                <Typography variant=\"h6\">Phase 2 - Not Really</Typography>\n                <Typography gutterBottom color=\"textSecondary\">\n                 Anyone can press the magic button, release winnings to our lucky frien, 10% stays behind to seed the next game tho.\n                </Typography>\n <Typography variant=\"h6\">Btw</Typography>\n                <Typography gutterBottom color=\"textSecondary\">\n                Any bid of any amount will let you win, if nobody bids before the timer runs out. Glhf.\n                </Typography>\n                  <Typography gutterBottom color=\"textSecondary\">\n                Nothng I should ever do or say is not financial advice of any kind, I'm not qualified. \n                </Typography>\n              </MuiDialogContent>\n            </Dialog>\n\n            {/* {wallet.connected && (\n              <p>\n                Address: {shortenAddress(wallet.publicKey?.toBase58() || '')}\n              </p>\n            )}\n\n            {wallet.connected && (\n              <p>Balance: {(balance || 0).toLocaleString()} SOL</p>\n            )} */}\n          </Grid>\n        </Paper>\n      </Container>\n\n      {fairLaunch && (\n        <Container\n          maxWidth=\"xs\"\n          style={{ position: 'relative', marginTop: 10 }}\n        >\n          <div style={{ margin: 20 }}>\n            <Grid container direction=\"row\" wrap=\"nowrap\">\n              <Grid container md={4} direction=\"column\">\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  Bids\n                </Typography>\n                <Typography\n                  variant=\"h6\"\n                  color=\"textPrimary\"\n                  style={{ fontWeight: 'bold' }}\n                >\n                  {fairLaunch?.state.numberTicketsSold.toNumber() || 0}\n                </Typography>\n              </Grid>\n              <Grid container md={4} direction=\"column\">\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  Median bid\n                </Typography>\n                <Typography\n                  variant=\"h6\"\n                  color=\"textPrimary\"\n                  style={{ fontWeight: 'bold' }}\n                >\n                   {formatNumber.format(median)}\n                </Typography>\n              </Grid>\n              <Grid container md={4} direction=\"column\">\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  Total raised\n                </Typography>\n                <Typography\n                  variant=\"h6\"\n                  color=\"textPrimary\"\n                  style={{ fontWeight: 'bold' }}\n                >\n                  {' '}\n                  {formatNumber.format(\n                    (fairLaunch?.treasury || 0) / LAMPORTS_PER_SOL,\n                  )}\n                </Typography>\n              </Grid>\n            </Grid>\n          </div>\n        </Container>\n      )}\n      <Snackbar\n        open={alertState.open}\n        autoHideDuration={6000}\n        onClose={() => setAlertState({ ...alertState, open: false })}\n      >\n        <Alert\n          onClose={() => setAlertState({ ...alertState, open: false })}\n          severity={alertState.severity}\n        >\n          {alertState.message}\n        </Alert>\n      </Snackbar>\n    </Container>\n  );\n};\n\ninterface AlertState {\n  open: boolean;\n  message: string;\n  severity: 'success' | 'info' | 'warning' | 'error' | undefined;\n}\n\nexport default Home;\n","import { Paper } from '@material-ui/core';\nimport Countdown from 'react-countdown';\nimport { Theme, createStyles, makeStyles } from '@material-ui/core/styles';\nimport { useState } from 'react';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      padding: theme.spacing(0),\n      '& > *': {\n        margin: theme.spacing(0.5),\n        marginRight: 0,\n        width: theme.spacing(6),\n        height: theme.spacing(6),\n        display: 'flex',\n        flexDirection: 'column',\n        alignContent: 'center',\n        alignItems: 'center',\n        justifyContent: 'center',\n        background: '#384457',\n        color: 'white',\n        borderRadius: 5,\n        fontSize: 10,\n      },\n    },\n    done: {\n      display: 'flex',\n      margin: theme.spacing(1),\n      marginRight: 0,\n      padding: theme.spacing(1),\n      flexDirection: 'column',\n      alignContent: 'center',\n      alignItems: 'center',\n      justifyContent: 'center',\n      background: '#384457',\n      color: 'white',\n      borderRadius: 5,\n      fontWeight: 'bold',\n      fontSize: 18,\n    },\n    item: {\n      fontWeight: 'bold',\n      fontSize: 18,\n    }\n  }),\n);\n\n\ninterface PhaseCountdownProps {\n  date: Date | undefined;\n  style?: React.CSSProperties;\n  status?: string;\n  onComplete?: () => void;\n  start?: Date;\n  end?: Date;\n}\n\ninterface CountdownRender {\n  days: number;\n  hours: number;\n  minutes: number;\n  seconds: number;\n  completed: boolean;\n}\n\nexport const PhaseCountdown: React.FC<PhaseCountdownProps> = ({\n  date,\n  status,\n  style,\n  start,\n  end,\n  onComplete,\n}) => {\n  const classes = useStyles();\n\n  const [isFixed, setIsFixed] = useState(start && end && date ? start.getTime() - Date.now() < 0 : false);\n\n  const renderCountdown = ({ days, hours, minutes, seconds, completed }: CountdownRender) => {\n    hours += days * 24\n    if (completed) {\n      return status ? <span className={classes.done}  >{status}</span> : null;\n    } else {\n      return (\n        <div className={classes.root} style={style} >\n          {isFixed && <Paper elevation={0}>\n            <span className={classes.item}>\n              +\n            </span>\n          </Paper>}\n          <Paper elevation={0}>\n            <span className={classes.item}>\n              {hours < 10 ? `0${hours}` : hours}\n            </span>\n            <span>hrs</span>\n          </Paper>\n          <Paper elevation={0}>\n            <span className={classes.item}>\n              {minutes < 10 ? `0${minutes}` : minutes}\n            </span>\n            <span>mins</span>\n          </Paper>\n          <Paper elevation={0}>\n            <span className={classes.item}>\n              {seconds < 10 ? `0${seconds}` : seconds}\n            </span>\n            <span>secs</span>\n          </Paper>\n        </div>\n      )\n    }\n  }\n\n  if (date && start && end) {\n    if (isFixed) {\n      <Countdown\n        date={start}\n        now={() => end.getTime()}\n        onComplete={() => setIsFixed(false)}\n        renderer={renderCountdown}\n      />\n    }\n  }\n\n  if (date) {\n    return (\n      <Countdown\n        date={date}\n        onComplete={onComplete}\n        renderer={renderCountdown}\n      />\n    )\n  } else {\n    return null\n  }\n}\n","import React, { useContext, useEffect, useMemo, useRef } from 'react';\nimport confetti from 'canvas-confetti';\n\nexport interface ConfettiContextState {\n  dropConfetti: () => void;\n}\n\nconst ConfettiContext = React.createContext<ConfettiContextState | null>(null);\n\nexport const ConfettiProvider = ({ children = null as any }) => {\n  const canvasRef = useRef<HTMLCanvasElement>();\n  const confettiRef = useRef<confetti.CreateTypes>();\n\n  const dropConfetti = useMemo(\n    () => () => {\n      if (confettiRef.current && canvasRef.current) {\n        canvasRef.current.style.visibility = 'visible';\n        confettiRef\n          .current({\n            particleCount: 400,\n            spread: 160,\n            origin: { y: 0.3 },\n          })\n          ?.finally(() => {\n            if (canvasRef.current) {\n              canvasRef.current.style.visibility = 'hidden';\n            }\n          });\n      }\n    },\n    [],\n  );\n\n  useEffect(() => {\n    if (canvasRef.current && !confettiRef.current) {\n      canvasRef.current.style.visibility = 'hidden';\n      confettiRef.current = confetti.create(canvasRef.current, {\n        resize: true,\n        useWorker: true,\n      });\n    }\n  }, []);\n\n  const canvasStyle: React.CSSProperties = {\n    width: '100vw',\n    height: '100vh',\n    position: 'absolute',\n    zIndex: 1,\n    top: 0,\n    left: 0,\n  };\n\n  return (\n    <ConfettiContext.Provider value={{ dropConfetti }}>\n      <canvas ref={canvasRef as any} style={canvasStyle} />\n      {children}\n    </ConfettiContext.Provider>\n  );\n};\n\nexport const Confetti = () => {\n  const { dropConfetti } = useConfetti();\n\n  useEffect(() => {\n    dropConfetti();\n  }, [dropConfetti]);\n\n  return <></>;\n};\n\nexport const useConfetti = () => {\n  const context = useContext(ConfettiContext);\n  return context as ConfettiContextState;\n};\n","import './App.css';\nimport { useMemo } from 'react';\n\nimport Home from './Home';\n\nimport * as anchor from '@project-serum/anchor';\nimport { clusterApiUrl } from '@solana/web3.js';\nimport { WalletAdapterNetwork } from '@solana/wallet-adapter-base';\nimport {\n  getPhantomWallet,\n  getSolflareWallet,\n  getSolletWallet,\n} from '@solana/wallet-adapter-wallets';\n\nimport {\n  ConnectionProvider,\n  WalletProvider,\n} from '@solana/wallet-adapter-react';\n\nimport { WalletDialogProvider } from '@solana/wallet-adapter-material-ui';\nimport { ThemeProvider, createTheme } from '@material-ui/core';\nimport { ConfettiProvider } from './confetti';\n\nconst theme = createTheme({\n  palette: {\n    type: 'dark',\n  },\n});\n\nconst candyMachineId = process.env.REACT_APP_CANDY_MACHINE_ID\n  ? new anchor.web3.PublicKey(process.env.REACT_APP_CANDY_MACHINE_ID)\n  : undefined;\n\nconst fairLaunchId = new anchor.web3.PublicKey(\n  process.env.REACT_APP_FAIR_LAUNCH_ID!,\n);\n\nconst fairLaunchId2 = new anchor.web3.PublicKey(\n  process.env.REACT_APP_FAIR_LAUNCH_ID2!,\n);\nconst fairLaunchId3 = new anchor.web3.PublicKey(\n  process.env.REACT_APP_FAIR_LAUNCH_ID3!,\n);\nconst fairLaunchId4 = new anchor.web3.PublicKey(\n  process.env.REACT_APP_FAIR_LAUNCH_ID4!,\n);\nconst network = process.env.REACT_APP_SOLANA_NETWORK as WalletAdapterNetwork;\n\nconst rpcHost = process.env.REACT_APP_SOLANA_RPC_HOST!;\nconst connection = new anchor.web3.Connection(rpcHost);\n\nconst startDateSeed = parseInt(process.env.REACT_APP_CANDY_START_DATE!, 10);\n\nconst txTimeout = 30000; // milliseconds (confirm this works for your project)\n\nconst App = () => {\n  const endpoint = useMemo(() => clusterApiUrl(network), []);\n\n  const wallets = useMemo(\n    () => [getPhantomWallet(), getSolflareWallet(), getSolletWallet()],\n    [],\n  );\n\n  return (\n    <ThemeProvider theme={theme}>\n    <div>whoever bids any bid in the range last wins. the timer resets anyone bids, and the range mins and maxes increase. These all reset back to og. values when a game is won.</div>\n      <ConnectionProvider endpoint={endpoint}>\n        <WalletProvider wallets={wallets} autoConnect>\n          <WalletDialogProvider>\n            <div\n              className=\"container-div\"\n              style={{ margin: 0, alignItems: 'center' }}\n            >\n              <div style={{ display: 'inline' }}>\n                <div style={{ textAlign: 'center' }}>Team 1</div>\n                <ConfettiProvider>\n                  <Home\n                    candyMachineId={candyMachineId}\n                    fairLaunchId={fairLaunchId}\n                    connection={connection}\n                    startDate={startDateSeed}\n                    txTimeout={txTimeout}\n                  />\n                </ConfettiProvider>\n              </div>\n              <div style={{ display: 'inline' }}>\n                <div style={{ textAlign: 'center' }}>Team 2</div>\n                <ConfettiProvider>\n                  <Home\n                    candyMachineId={candyMachineId}\n                    fairLaunchId={fairLaunchId2}\n                    connection={connection}\n                    startDate={startDateSeed}\n                    txTimeout={txTimeout}\n                  />\n                </ConfettiProvider>\n              </div>\n            </div>\n            <div\n              className=\"container-div\"\n              style={{ margin: 0, alignItems: 'center' }}\n            >\n              <div style={{ display: 'inline' }}>\n                <div style={{ textAlign: 'center' }}>Team 3</div>\n                <ConfettiProvider>\n                  <Home\n                    candyMachineId={candyMachineId}\n                    fairLaunchId={fairLaunchId3}\n                    connection={connection}\n                    startDate={startDateSeed}\n                    txTimeout={txTimeout}\n                  />\n                </ConfettiProvider>\n              </div>\n              <div style={{ display: 'inline' }}>\n                <div style={{ textAlign: 'center' }}>Team 4</div>\n                <ConfettiProvider>\n                  <Home\n                    candyMachineId={candyMachineId}\n                    fairLaunchId={fairLaunchId4}\n                    connection={connection}\n                    startDate={startDateSeed}\n                    txTimeout={txTimeout}\n                  />\n                </ConfettiProvider>\n              </div>\n            </div>\n          </WalletDialogProvider>\n        </WalletProvider>\n      </ConnectionProvider>\n    </ThemeProvider>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}