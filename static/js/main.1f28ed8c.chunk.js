(this["webpackJsonpcandy-machine-mint"]=this["webpackJsonpcandy-machine-mint"]||[]).push([[0],{109:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y})),n.d(t,"f",(function(){return x})),n.d(t,"g",(function(){return M})),n.d(t,"e",(function(){return T})),n.d(t,"b",(function(){return P})),n.d(t,"d",(function(){return E})),n.d(t,"c",(function(){return K}));var a,r=n(19),i=n(10),s=n(233),o=n(1),c=n.n(o),u=n(20),l=n(3),d=n(28),m=(n(489),n.t(489,1)),p=n(46),h=n(50),b=n(37),f=["data"],g=new d.e.PublicKey("EHNbEKdx5qimYUBQdUXq2KmdZeikbnpiEzpKnydBUEwB");!function(e){e.Brewing="Brewing",e.Finished="Finished",e.PastDue="Past Due"}(a||(a={}));var y=function(){var e=Object(l.a)(c.a.mark((function e(t,n,a){var r,i,s,o,l,p,h,b,f,y,v,k,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new d.c(a,t,{preflightCommitment:"recent"}),i=m,console.log(i),(new Map).set(i),console.log(i.default),s=new d.b(i.default,g,r),e.next=9,s.account.fairLaunch.fetch(n);case 9:return o=e.sent,console.log("afuck"),console.log(o.treasury.toBase58()),e.next=14,L(o.tokenMint,t.publicKey);case 14:return l=e.sent,p=Object(u.a)(l,2),h=p[0],b=p[1],e.prev=18,e.next=21,s.account.fairLaunchTicket.fetch(h);case 21:f=e.sent,e.next=27;break;case 24:e.prev=24,e.t0=e.catch(18),console.log("No ticket");case 27:return e.next=29,s.provider.connection.getBalance(o.treasury);case 29:return y=e.sent,v=new Uint8Array([]),e.next=33,A(o.tokenMint);case 33:return k=e.sent[0],e.prev=34,e.next=37,s.provider.connection.getAccountInfo(k);case 37:j=e.sent,v=new Uint8Array((null===j||void 0===j?void 0:j.data)||[]),e.next=45;break;case 41:e.prev=41,e.t1=e.catch(34),console.log("Could not find fair launch lottery."),console.log(e.t1);case 45:return e.abrupt("return",{id:n,state:o,program:s,ticket:{pubkey:h,bump:b,data:f},lottery:{pubkey:k,data:v},treasury:y});case 46:case"end":return e.stop()}}),e,null,[[18,24],[34,41]])})));return function(t,n,a){return e.apply(this,arguments)}}(),v=function(){var t=Object(l.a)(c.a.mark((function t(n,a,r){var o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(j(a,99).map((function(e){return k(n,e,r)})));case 2:return o=t.sent,u=o.map((function(t){return t.array.map((function(t){if(t){var n=t.data,a=Object(s.a)(t,f);return Object(i.a)(Object(i.a)({},a),{},{data:e.from(n[0],"base64")})}}))})).flat(),t.abrupt("return",{keys:a,array:u});case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(c.a.mark((function e(t,n,a){var r,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._buildArgs([n],a,"base64"),e.next=3,t._rpcRequest("getMultipleAccounts",r);case 3:if(!(i=e.sent).error){e.next=6;break}throw new Error("failed to get info about account "+i.error.message);case 6:if(!i.result.value){e.next=9;break}return s=i.result.value,e.abrupt("return",{keys:n,array:s});case 9:throw new Error;case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function j(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,a){return e.slice(a*t,(a+1)*t)}))}var x=function(){var e=Object(l.a)(c.a.mark((function e(t,n){var a,r,i,s,o,u,m,p,h,f,g,y,k,x,O,S,w;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,A(n.state.tokenMint);case 4:return r=e.sent[0],e.next=7,n.program.provider.connection.getAccountInfo(r);case 7:return i=e.sent,e.next=10,n.program.account.fairLaunchLotteryBitmap.fetch(r);case 10:s=e.sent,o=[],u=0;case 13:if(!(u<n.state.numberTicketsSold)){e.next=22;break}return e.t0=o,e.next=17,Object(b.e)(n.state.tokenMint,new d.a(u));case 17:e.t1=e.sent[0],e.t0.push.call(e.t0,e.t1);case 19:u++,e.next=13;break;case 22:return e.next=24,Promise.all(j(Array.from(Array(o.length).keys()),1).map(function(){var e=Object(l.a)(c.a.mark((function e(t){var a,r,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],r=0;case 2:if(!(r<t.length)){e.next=12;break}return i=t.slice(r,r+1).map((function(e){return o[e]})),e.next=6,v(n.program.provider.connection,i.map((function(e){return e.toBase58()})),"recent");case 6:return s=e.sent,a=a.concat(s.array.map((function(e){return{buyer:new d.e.PublicKey(new Uint8Array(e.data.slice(40,72))),seq:new d.a(e.data.slice(72,80),void 0,"le")}}))),e.abrupt("return",a);case 9:r+=1,e.next=2;break;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 24:for(m=e.sent,p=m.flat().sort((function(e,t){return e.seq.toNumber()-t.seq.toNumber()})),h=0;h<p.length;h++)f=p[h],g=i.data[49+Math.floor(f.seq.toNumber()/8)],y=7-f.seq.toNumber()%8,k=Math.pow(2,y),x=(g&k)>0?" won!":" lost :(",a.push("Ticket #"+f.seq.toString()+" owned by: "+f.buyer.toBase58()+x);for(a.push("Bit Map ones: "+s.bitmapOnes.toNumber().toString()),console.log(a),O=[],S="",console.log(a),w=0;w<a.length;w++)-1!=a[w].indexOf(": ")&&a[w].length>4?(S.length>1&&O.push(S),S=a[w]):S=S+" "+a[w];if(!(O.length<1)){e.next=35;break}return e.abrupt("return",["No lottery run yet: heck back later!"]);case 35:return e.abrupt("return",O);case 38:return e.prev=38,e.t2=e.catch(1),console.log(e.t2),e.abrupt("return",["No lottery run yet: heck back later!"]);case 42:case"end":return e.stop()}}),e,null,[[1,38]])})));return function(t,n){return e.apply(this,arguments)}}();function O(e){return S.apply(this,arguments)}function S(){return(S=Object(l.a)(c.a.mark((function e(t){var n,a,r,i,s,o,u,l,m,h,f,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.buyer,a=t.payer,r=t.anchorProgram,i=t.fairLaunchTicket,s=t.fairLaunch,o=t.fairLaunchObj,u=t.fairLaunchTicketObj,!o.participationMint||u.seq.toNumber()%o.participationModulo!=0){e.next=63;break}return console.log(n.toBase58(),"gets participation token."),l=d.e.Keypair.generate(),m=[l],e.next=7,getParticipationToken(o.authority,o.data.uuid);case 7:return h=e.sent[0],e.next=10,Object(b.d)(l.publicKey,n);case 10:return f=e.sent[0],e.t0=d.e.SystemProgram,e.t1=a.publicKey,e.t2=l.publicKey,e.t3=MintLayout.span,e.next=17,r.provider.connection.getMinimumBalanceForRentExemption(MintLayout.span);case 17:return e.t4=e.sent,e.t5=p.b,e.t6={fromPubkey:e.t1,newAccountPubkey:e.t2,space:e.t3,lamports:e.t4,programId:e.t5},e.t7=e.t0.createAccount.call(e.t0,e.t6),e.t8=p.c.createInitMintInstruction(p.b,l.publicKey,0,a.publicKey,a.publicKey),e.t9=Object(b.b)(f,a.publicKey,n,l.publicKey),e.t10=p.c.createMintToInstruction(p.b,l.publicKey,f,a.publicKey,[],1),g=[e.t7,e.t8,e.t9,e.t10],e.t11=r.rpc,e.t12=s,e.t13=i,e.t14=a.publicKey,e.t15=o.participationMint,e.t16=h,e.t17=n,e.t18=f,e.next=35,getMetadata(l.publicKey);case 35:return e.t19=e.sent,e.next=38,getMasterEdition(l.publicKey);case 38:return e.t20=e.sent,e.t21=l.publicKey,e.t22=a.publicKey,e.next=43,getMetadata(o.participationMint);case 43:return e.t23=e.sent,e.next=46,getMasterEdition(o.participationMint);case 46:return e.t24=e.sent,e.next=49,getEditionMarkPda(o.participationMint,u.seq.toNumber());case 49:return e.t25=e.sent,e.t26=TOKEN_METADATA_PROGRAM_ID,e.t27=p.b,e.t28=d.e.SystemProgram.programId,e.t29=d.e.SYSVAR_RENT_PUBKEY,e.t30={fairLaunch:e.t12,fairLaunchTicket:e.t13,payer:e.t14,participationMint:e.t15,participationTokenAccount:e.t16,buyer:e.t17,buyerNftTokenAccount:e.t18,newMetadata:e.t19,newEdition:e.t20,newMint:e.t21,newMintAuthority:e.t22,metadata:e.t23,masterEdition:e.t24,editionMarkPda:e.t25,tokenMetadataProgram:e.t26,tokenProgram:e.t27,systemProgram:e.t28,rent:e.t29},e.t31=g,e.t32=m,e.t33={accounts:e.t30,instructions:e.t31,signers:e.t32},e.next=60,e.t11.mintParticipationNft.call(e.t11,e.t33);case 60:return e.abrupt("return",f);case 63:return console.log(n.toBase58(),"doesnt get participation token."),e.abrupt("return",null);case 65:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return new Promise((function(t){return setTimeout(t,e)}))}var M=function(){var e=Object(l.a)(c.a.mark((function e(t,n){var a,r,i,s,o,u,m,h,f,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.program,n.publicKey,r=n.state,e.next=5,A(r.tokenMint);case 5:return i=e.sent[0],e.next=8,a.provider.connection.getAccountInfo(i);case 8:s=e.sent,o=[],u=0;case 11:if(!(u<r.numberTicketsSold)){e.next=20;break}return e.t0=o,e.next=15,Object(b.e)(r.tokenMint,new d.a(u));case 15:e.t1=e.sent[0],e.t0.push.call(e.t0,e.t1);case 17:u++,e.next=11;break;case 20:return e.next=22,Promise.all(j(Array.from(Array(o.length).keys()),2).map(function(){var e=Object(l.a)(c.a.mark((function e(t){var n,r,i,s,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=0;case 2:if(!(r<t.length)){e.next=29;break}console.log("Pulling ticket seqs for slice",t[r],t[r+1]),i=t.slice(r,r+1).map((function(e){return o[e]})),s=void 0,u=0,l=!1;case 8:if(!(u<3)||l){e.next=25;break}return e.prev=9,e.next=12,v(a.provider.connection,i.map((function(e){return e.toBase58()})),"recent");case 12:s=e.sent,l=!0,e.next=23;break;case 16:return e.prev=16,e.t0=e.catch(9),console.log(e.t0),console.log("Failed, retrying after 10s sleep"),e.next=22,w(1e4);case 22:u+=1;case 23:e.next=8;break;case 25:n=n.concat(s.array.map((function(e){return new d.e.PublicKey(new Uint8Array(e.data.slice(8,40)))})));case 26:r+=1,e.next=2;break;case 29:return e.abrupt("return",n);case 30:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}()));case 22:return m=e.sent,h=m.flat(),e.next=26,Promise.all(j(Array.from(Array(h.length).keys()),2).map(function(){var e=Object(l.a)(c.a.mark((function e(t){var n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=c.a.mark((function e(r){var i,s,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Pulling accounts for slice",t[r],t[r+1]),i=t.slice(r,r+1).map((function(e){return h[e]})),s=void 0,o=0,u=!1;case 5:if(!(o<3)||u){e.next=22;break}return e.prev=6,e.next=9,v(a.provider.connection,i.map((function(e){return e.toBase58()})),"recent");case 9:s=e.sent,u=!0,e.next=20;break;case 13:return e.prev=13,e.t0=e.catch(6),console.log(e.t0),console.log("Failed, retrying after 10s sleep"),e.next=19,w(1e4);case 19:o+=1;case 20:e.next=5;break;case 22:n=n.concat(s.array.map((function(e,t){return{key:new d.e.PublicKey(s.keys[t]),model:a.coder.accounts.decode("FairLaunchTicket",e.data)}})));case 23:case"end":return e.stop()}}),e,null,[[6,13]])})),i=0;case 3:if(!(i<t.length)){e.next=8;break}return e.delegateYield(r(i),"t0",5);case 5:i+=1,e.next=3;break;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 26:return f=e.sent,g=f.flat(),e.next=30,Promise.all(j(Array.from(Array(g.length).keys()),2).map(function(){var e=Object(l.a)(c.a.mark((function e(o){var u,l,m,h,f,y,v,k,j,x,S,M,T,P,L;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=0;case 1:if(!(u<o.length)){e.next=76;break}if((l=g[o[u]]).model.gottenParticipation){e.next=30;break}m=0,h=!1;case 6:if(!(m<3)||h){e.next=28;break}return e.prev=7,e.next=10,O({payer:t.publicKey,buyer:l.model.buyer,anchorProgram:a,fairLaunchTicket:l.key,fairLaunch:n,fairLaunchObj:r,fairLaunchTicketObj:l.model});case 10:f=e.sent,h=!0,f&&console.log("Got participation nft and placed token in new account ".concat(f.toBase58(),".")),e.next=26;break;case 15:if(e.prev=15,e.t0=e.catch(7),!(m>3)){e.next=21;break}throw e.t0;case 21:m++;case 22:return console.log(e.t0),console.log("Ticket failed to get participation nft, trying one more time"),e.next=26,w(1e3);case 26:e.next=6;break;case 28:e.next=31;break;case 30:console.log("Ticket",l.model.buyer.toBase58(),"already received participation");case 31:if(!l.model.state.unpunched){e.next=72;break}if(y=s.data[49+Math.floor(l.model.seq.toNumber()/8)],v=7-l.model.seq.toNumber()%8,k=Math.pow(2,v),!((y&k)>0)){e.next=70;break}console.log("Punching ticket for buyer",o[u],l.model.buyer.toBase58()),l.model.amount.toNumber()-r.currentMedian.toNumber(),j=0,x=!1;case 41:if(!(j<3)||x){e.next=70;break}return e.prev=42,S=l.model.buyer,e.next=46,Object(b.d)(n.state.tokenMint,S);case 46:return M=e.sent[0],e.next=49,a.provider.connection.getAccountInfo(M);case 49:return T=e.sent,P=T?[]:[Object(b.b)(M,t.publicKey,S,n.state.tokenMint)],e.next=53,a.rpc.punchTicket({accounts:{fairLaunchTicket:l.key,fairLaunch:n.id,fairLaunchLotteryBitmap:i,payer:t.publicKey,buyerTokenAccount:M,tokenMint:n.state.tokenMint,tokenProgram:p.b,treasury:n.state.treasury,systemProgram:d.e.SystemProgram.programId,dev:n.state.dev,buyer:S},instructions:P.length>0?P:void 0});case 53:x=!0,console.log("Punched ticket and placed token in new account ".concat(M.toBase58(),".")),e.next=68;break;case 57:if(e.prev=57,e.t1=e.catch(42),!(j>3)){e.next=63;break}throw e.t1;case 63:j++;case 64:return console.log(e.t1),console.log("Ticket failed to punch, trying one more time"),e.next=68,w(1e3);case 68:e.next=41;break;case 70:e.next=73;break;case 72:l.model.state.withdrawn?console.log("Buyer",o[u],l.model.buyer.toBase58(),"withdrawn already"):l.model.state.punched&&console.log("Buyer",o[u],l.model.buyer.toBase58(),"punched already");case 73:u++,e.next=1;break;case 76:if(L=[],!r.treasuryMint){e.next=86;break}return L.push({pubkey:r.treasuryMint,isWritable:!0,isSigner:!1}),e.t2=L,e.next=82,Object(b.d)(r.treasuryMint,t.publicKey);case 82:e.t3=e.sent[0],e.t4={pubkey:e.t3,isWritable:!0,isSigner:!1},e.t2.push.call(e.t2,e.t4),L.push({pubkey:p.b,isWritable:!1,isSigner:!1});case 86:return e.next=88,a.rpc.withdrawFunds({accounts:{fairLaunch:n.id,treasury:r.treasury,authority:t.publicKey,tokenMint:r.tokenMint,systemProgram:d.e.SystemProgram.programId},remainingAccounts:L});case 88:case"end":return e.stop()}}),e,null,[[7,15],[42,57]])})));return function(t){return e.apply(this,arguments)}}()));case 30:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(c.a.mark((function e(t,n){var a,r,i,s,o,u,l,d,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],r=0,e.prev=2,!n.state.treasuryMint){e.next=10;break}return e.next=6,n.program.provider.connection.getTokenAccountBalance(n.treasury);case 6:u=e.sent,r=u.value.uiAmount,e.next=13;break;case 10:return e.next=12,n.program.provider.connection.getBalance(n.state.treasury);case 12:r=e.sent;case 13:for(a.push("Token Mint: "+n.state.tokenMint.toBase58()),a.push("Treasury: "+n.state.treasury.toBase58()),a.push("Treasury Mint: "+(null===(i=n.state.treasuryMint)||void 0===i?void 0:i.toBase58())),a.push("Participation Mint: "+(null===(s=n.state.participationMint)||void 0===s?void 0:s.toBase58())),a.push("Authority: "+n.state.authority.toBase58()),a.push("Bump: "+n.state.bump.toString()),a.push("Treasury Bump: "+n.state.treasuryBump.toString()),a.push("Token Mint Bump: "+n.state.tokenMintBump.toString()),a.push("Participation Modulo: "+n.state.participationModulo.toString()),a.push("Price Range Start: "+n.state.data.priceRangeStart.toNumber().toString()),a.push("Price Range End: "+n.state.data.priceRangeEnd.toNumber().toString()),a.push("Tick Size: "+n.state.data.tickSize.toNumber().toString()),a.push("Fees: "+n.state.data.fee.toNumber().toString()),a.push("Current Treasury Holdings: "+r.toString()),a.push("Treasury Snapshot At Peak: "+(null===(o=n.state.treasurySnapshot)||void 0===o?void 0:o.toNumber().toString())),a.push("Phase One Start: "+new Date(1e3*n.state.data.phaseOneStart.toNumber()).toString()),a.push("Phase One End: "+new Date(1e3*n.state.data.phaseOneEnd.toNumber()).toString()),a.push("Phase Two End: "+new Date(1e3*n.state.data.phaseTwoEnd.toNumber()).toString()),a.push("Lottery Period End: "+new Date(1e3*(n.state.data.phaseTwoEnd.toNumber()+n.state.data.lotteryDuration.toNumber())).toString()),a.push("Number of Tokens: "+n.state.data.numberOfTokens.toNumber().toString()),a.push("Number of Tickets Un-Sequenced: "+n.state.numberTicketsUnSeqed.toNumber().toString()),a.push("Number of Tickets Sold: "+n.state.numberTicketsSold.toNumber().toString()),a.push("Number of Tickets Dropped: "+n.state.numberTicketsDropped.toNumber().toString()),a.push("Number of Tickets Punched: "+n.state.numberTicketsPunched.toNumber().toString()),a.push("Number of Tickets Dropped + Punched: "+n.state.numberTicketsDropped.toNumber().toString()+n.state.numberTicketsPunched.toNumber().toString()),a.push("Number of Tokens Refunded: "+n.state.numberTokensBurnedForRefunds.toNumber().toString()),a.push("Number of Tokens Preminted: "+n.state.numberTokensPreminted.toNumber().toString()),a.push("Phase Three Started: "+n.state.phaseThreeStarted.toString()),a.push("Current Eligible Holders: "+n.state.currentEligibleHolders.toNumber().toString()),a.push("Current Median: "+n.state.currentMedian.toNumber().toString()),a.push("Counts at Each Tick: "),n.state.countsAtEachTick.forEach((function(e,t){return a.push(n.state.data.priceRangeStart.toNumber().toString()+t*n.state.data.tickSize.toNumber().toString()+": "+e.toNumber().toString())})),l=[],d="",console.log(a),m=0;m<a.length;m++)-1!=a[m].indexOf(": ")&&a[m].length>4?(d.length>1&&l.push(d),d=a[m]):d+=a[m];return e.abrupt("return",l);case 52:e.prev=52,e.t0=e.catch(2),console.log(e.t0);case 55:case"end":return e.stop()}}),e,null,[[2,52]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(c.a.mark((function e(t,n){var a,i,s,o,u,l,m,h,f,g,y,v,k,j,x,O;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(n.state.tokenMint,t.publicKey);case 2:return a=e.sent[0],i=n.ticket.data,e.next=6,A(n.state.tokenMint);case 6:return s=e.sent[0],e.next=9,Object(b.d)(n.state.tokenMint,t.publicKey);case 9:if(o=e.sent[0],!(null===i||void 0===i?void 0:i.amount.gt(n.state.currentMedian))){e.next=44;break}return u=n.program,n.publicKey,l=n.state,e.next=16,A(l.tokenMint);case 16:return m=e.sent[0],e.next=19,u.provider.connection.getAccountInfo(m);case 19:e.sent,h=[],f=0;case 22:if(!(f<l.numberTicketsSold)){e.next=31;break}return e.t0=h,e.next=26,Object(b.e)(l.tokenMint,new d.a(f));case 26:e.t1=e.sent[0],e.t0.push.call(e.t0,e.t1);case 28:f++,e.next=22;break;case 31:return console.log(h),g=h[Math.floor(Math.random()*h.length)],console.log(g),console.log(1),console.log("Adjusting down...",null===i||void 0===i?void 0:i.amount.toNumber(),n.state.currentMedian.toNumber()),e.next=38,B(n.program,n.state.currentMedian.toNumber(),t,n,a);case 38:return y=e.sent,v=y.remainingAccounts,k=y.instructions,j=y.signers,e.next=44,n.program.rpc.adjustTicket(n.state.currentMedian,{accounts:{fairLaunchTicket:a,fairLaunch:n.id,fairLaunchLotteryBitmap:m,treasury:n.state.treasury,buyer:t.publicKey,systemProgram:d.e.SystemProgram.programId,clock:d.e.SYSVAR_CLOCK_PUBKEY},__private:{logAccounts:!0},instructions:k.length>0?k:void 0,remainingAccounts:[{pubkey:t.publicKey,isSigner:!0,isWritable:!0}].concat(Object(r.a)(v)),signers:j});case 44:return e.next=46,n.program.provider.connection.getAccountInfo(o);case 46:return x=e.sent,O=x?[]:[Object(b.b)(o,t.publicKey,t.publicKey,n.state.tokenMint)],e.next=50,n.program.rpc.punchTicket({accounts:{fairLaunchTicket:a,fairLaunch:n.id,fairLaunchLotteryBitmap:s,payer:t.publicKey,buyerTokenAccount:o,tokenMint:n.state.tokenMint,tokenProgram:p.b,treasury:n.state.treasury,systemProgram:d.e.SystemProgram.programId,dev:n.state.dev,buyer:t.publicKey},instructions:O.length>0?O:void 0});case 50:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var t=Object(l.a)(c.a.mark((function t(n,a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),a.toBuffer()],g);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),A=function(){var t=Object(l.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),e.from("lottery")],g);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(c.a.mark((function e(t,n,a,r,i){var s,o,l,m,p,f,g,y,v,k;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",{remainingAccounts:[],instructions:[],signers:[],amountLamports:0});case 2:if(s=r.ticket,console.log(1),console.log(s),o=[],l=[],m=[],p=0,p=0==n?r.state.data.priceRangeStart.toNumber():n*h.LAMPORTS_PER_SOL,console.log(s.data),!s.data){e.next=27;break}return e.next=14,Object(b.e)(r.state.tokenMint,null===(f=s.data)||void 0===f?void 0:f.seq);case 14:return g=e.sent,y=Object(u.a)(g,2),v=y[0],k=y[1],e.next=20,r.program.provider.connection.getAccountInfo(v);case 20:if(e.sent){e.next=27;break}return e.t0=l,e.next=25,r.program.instruction.createTicketSeq(k,{accounts:{fairLaunchTicketSeqLookup:v,fairLaunch:r.id,fairLaunchTicket:i,payer:a.publicKey,systemProgram:d.e.SystemProgram.programId,rent:d.e.SYSVAR_RENT_PUBKEY},signers:[]});case 25:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 27:return e.abrupt("return",{remainingAccounts:o,instructions:l,signers:m,amountLamports:p});case 28:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(c.a.mark((function e(t,n){var a,r,i,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(b.d)(n.state.tokenMint,t.publicKey);case 4:if(a=e.sent[0],r=d.e.Keypair.generate(),i=[r],s=[p.c.createApproveInstruction(p.b,a,r.publicKey,t.publicKey,[],1)],o=[],!n.state.treasuryMint){e.next=17;break}return o.push({pubkey:n.state.treasuryMint,isWritable:!0,isSigner:!1}),e.t0=o,e.next=14,Object(b.d)(n.state.treasuryMint,t.publicKey);case 14:e.t1=e.sent[0],e.t2={pubkey:e.t1,isWritable:!0,isSigner:!1},e.t0.push.call(e.t0,e.t2);case 17:return console.log("tfr",n.state.treasury.toBase58(),t.publicKey.toBase58(),a.toBase58()),e.next=20,n.program.rpc.receiveRefund({accounts:{fairLaunch:n.id,treasury:n.state.treasury,buyer:t.publicKey,buyerTokenAccount:a,transferAuthority:r.publicKey,tokenMint:n.state.tokenMint,tokenProgram:p.b,systemProgram:d.e.SystemProgram.programId,clock:d.e.SYSVAR_CLOCK_PUBKEY},__private:{logAccounts:!0},remainingAccounts:o,instructions:s,signers:i});case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(c.a.mark((function e(t,n,a){var i,s,o,m,p,h,f,g,y,k,x,O,S,w,M,T,P,E,K,N,C,R,_,D,I,F;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return i=a.ticket.data,a.program,a.publicKey,a.state,s="",o=[],e.prev=8,e.next=11,A(a.state.tokenMint);case 11:return m=e.sent[0],e.next=14,a.program.provider.connection.getAccountInfo(m);case 14:p=e.sent,h=[],f=0;case 17:if(!(f<a.state.numberTicketsSold)){e.next=26;break}return e.t0=h,e.next=21,Object(b.e)(a.state.tokenMint,new d.a(f));case 21:e.t1=e.sent[0],e.t0.push.call(e.t0,e.t1);case 23:f++,e.next=17;break;case 26:return e.next=28,Promise.all(j(Array.from(Array(h.length).keys()),2).map(function(){var e=Object(l.a)(c.a.mark((function e(t){var n,r,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=0;case 2:if(!(r<t.length)){e.next=12;break}return i=t.slice(r,r+1).map((function(e){return h[e]})),e.next=6,v(a.program.provider.connection,i.map((function(e){return e.toBase58()})),"recent");case 6:return s=e.sent,n=n.concat(s.array.map((function(e){return{buyer:new d.e.PublicKey(new Uint8Array(e.data.slice(40,72))),seq:new d.a(e.data.slice(72,80),void 0,"le")}}))),e.abrupt("return",n);case 9:r+=1,e.next=2;break;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 28:for(g=e.sent,o=g.flat().sort((function(e,t){return e.seq.toNumber()-t.seq.toNumber()})),y=0;y<o.length;y++)k=o[y],x=p.data[49+Math.floor(k.seq.toNumber()/8)],O=7-k.seq.toNumber()%8,S=Math.pow(2,O),w=(x&S)>0?" won!":" lost :(",s.push("Ticket #"+k.seq.toString()+" owned by: "+k.buyer.toBase58()+w);e.next=36;break;case 33:e.prev=33,e.t2=e.catch(8),console.log(e.t2);case 36:console.log(s),console.log(o),M=n.publicKey,void 0!=a.state.stranger&&(M=a.state.stranger),T=n.publicKey;try{T=o[Math.floor(Math.random()*o.length)].buyer,console.log(T.toBase58())}catch(W){}return console.log("haha"),e.next=45,L(a.state.tokenMint,n.publicKey);case 45:return P=e.sent,E=Object(u.a)(P,2),K=E[0],N=E[1],e.next=51,B(a.program,t,n,a,K);case 51:if(C=e.sent,R=C.remainingAccounts,_=C.instructions,D=C.signers,I=C.amountLamports,0==t&&(I=0),!i){e.next=65;break}return e.next=60,A(a.state.tokenMint);case 60:return F=e.sent[0],console.log("Anchor wallet",n.publicKey.toBase58(),I),e.next=64,a.program.rpc.adjustTicket(new d.a(I),{accounts:{fairLaunchTicket:K,fairLaunch:a.id,fairLaunchLotteryBitmap:F,treasury:a.state.treasury,systemProgram:d.e.SystemProgram.programId,clock:d.e.SYSVAR_CLOCK_PUBKEY,dev:a.state.dev,fuckboi:a.state.fuckboi,buyer:n.publicKey},__private:{logAccounts:!0},remainingAccounts:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}].concat(Object(r.a)(R)),signers:D,instructions:_.length>0?_:void 0});case 64:return e.abrupt("return");case 65:return console.log("Amount",I),console.log(),"11111111111111111111111111111111"==M.toBase58()&&(M=n.publicKey),console.log(M.toBase58()),console.log(T.toBase58()),e.next=72,a.program.rpc.purchaseTicket(N,new d.a(I),{accounts:{fairLaunchTicket:K,fairLaunch:a.id,treasury:a.state.treasury,buyer:n.publicKey,payer:n.publicKey,systemProgram:d.e.SystemProgram.programId,rent:d.e.SYSVAR_RENT_PUBKEY,clock:d.e.SYSVAR_CLOCK_PUBKEY,dev:a.state.dev,stranger:M,arandom:T,fuckboi:a.state.fuckboi,ago:a.state.ago},remainingAccounts:R,signers:D,instructions:_.length>0?_:void 0});case 72:case"end":return e.stop()}}),e,null,[[8,33]])})));return function(t,n,a){return e.apply(this,arguments)}}()}).call(this,n(6).Buffer)},236:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return y}));var a=n(1),r=n.n(a),i=n(3),s=n(28),o=n(46),c=n(50),u=n(488),l=n(37),d=new s.e.PublicKey("cndyAnrLdpjq1Ssp1z8xxDsB8dxe7u4HL5Nxi2K5WXZ"),m=new s.e.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),p=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a){var s,o,c,u,l=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>3&&void 0!==l[3]?l[3]:"recent",s=l.length>4&&void 0!==l[4]&&l[4],o=!1,c={slot:0,confirmations:0,err:null},u=0,e.next=7,new Promise(function(){var e=Object(i.a)(r.a.mark((function e(u,l){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){o||(o=!0,console.log("Rejecting for timeout..."),l({timeout:!0}))}),n);case 1:if(o||!s){e.next=7;break}return Object(i.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.getSignatureStatuses([t]);case 3:n=e.sent,c=n&&n.value[0],o||(c?c.err?(console.log("REST error for",t,c),o=!0,l(c.err)):c.confirmations?(console.log("REST confirmation for",t,c),o=!0,u(c)):console.log("REST no confirmations for",t,c):console.log("REST null result for",t,c)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=5,v(2e3);case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return c=e.sent,a._signatureSubscriptions[u]&&a.removeSignatureListener(u),o=!0,console.log("Returning status",c),e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),h=function(t,n,a,r){var i=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:s.e.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:o.b,isSigner:!1,isWritable:!1},{pubkey:s.e.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new s.e.TransactionInstruction({keys:i,programId:l.a,data:e.from([])})},b=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a){var i,o,c,u,l,m,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new s.c(a,t,{preflightCommitment:"recent"}),e.next=3,s.b.fetchIdl(d,i);case 3:return o=e.sent,c=new s.b(o,d,i),e.next=7,c.account.candyMachine.fetch(n);case 7:return u=e.sent,l=u.data.itemsAvailable.toNumber(),m=u.itemsRedeemed.toNumber(),p=l-m,e.abrupt("return",{id:n,program:c,state:{itemsAvailable:l,itemsRedeemed:m,itemsRemaining:p,isSoldOut:0===p,isActive:u.data.goLiveDate.toNumber()<(new Date).getTime()/1e3,goLiveDate:u.data.goLiveDate,treasury:u.wallet,tokenMint:u.tokenMint,config:u.config,price:u.data.price}});case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),f=function(){var t=Object(i.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.e.PublicKey.findProgramAddress([e.from("metadata"),m.toBuffer(),n.toBuffer(),e.from("edition")],m);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(i.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.e.PublicKey.findProgramAddress([e.from("metadata"),m.toBuffer(),n.toBuffer()],m);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i,d,p,b,y,v,k,j,x;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.e.Keypair.generate(),e.next=3,Object(l.d)(a.publicKey,n);case 3:return i=e.sent[0],e.next=6,Object(l.d)(t.state.tokenMint,n);case 6:return d=e.sent[0],p=t.id,b=[],y=[a],e.t0=s.e.SystemProgram,e.t1=n,e.t2=a.publicKey,e.t3=o.a.span,e.next=16,t.program.provider.connection.getMinimumBalanceForRentExemption(o.a.span);case 16:return e.t4=e.sent,e.t5=o.b,e.t6={fromPubkey:e.t1,newAccountPubkey:e.t2,space:e.t3,lamports:e.t4,programId:e.t5},e.t7=e.t0.createAccount.call(e.t0,e.t6),e.t8=o.c.createInitMintInstruction(o.b,a.publicKey,0,n,n),e.t9=h(i,n,n,a.publicKey),e.t10=o.c.createMintToInstruction(o.b,a.publicKey,i,n,[],1),v=[e.t7,e.t8,e.t9,e.t10],t.state.tokenMint&&(k=s.e.Keypair.generate(),y.push(k),b.push({pubkey:d,isWritable:!0,isSigner:!1}),b.push({pubkey:k.publicKey,isWritable:!1,isSigner:!0}),v.push(o.c.createApproveInstruction(o.b,d,k.publicKey,n,[],t.state.price.toNumber()))),e.next=27,g(a.publicKey);case 27:return j=e.sent,e.next=30,f(a.publicKey);case 30:return x=e.sent,e.t11=v,e.next=34,t.program.instruction.mintNft({accounts:{config:t.state.config,candyMachine:p,payer:n,wallet:t.state.treasury,mint:a.publicKey,metadata:j,masterEdition:x,mintAuthority:n,updateAuthority:n,tokenMetadataProgram:m,tokenProgram:o.b,systemProgram:c.SystemProgram.programId,rent:s.e.SYSVAR_RENT_PUBKEY,clock:s.e.SYSVAR_CLOCK_PUBKEY},remainingAccounts:b.length>0?b:void 0});case 34:return e.t12=e.sent,e.t11.push.call(e.t11,e.t12),e.prev=37,e.next=40,Object(u.a)(t.program.provider.connection,t.program.provider.wallet,v,y);case 40:return e.abrupt("return",e.sent.txid);case 43:e.prev=43,e.t13=e.catch(37),console.log(e.t13);case 46:return e.abrupt("return","j");case 47:case"end":return e.stop()}}),e,null,[[37,43]])})));return function(t,n){return e.apply(this,arguments)}}(),v=function(e){return new Promise((function(t){return setTimeout(t,e)}))}}).call(this,n(6).Buffer)},37:function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return f}));var a=n(1),r=n.n(a),i=n(3),s=n(28),o=n(46),c=n(50),u=new s.e.PublicKey("EHNbEKdx5qimYUBQdUXq2KmdZeikbnpiEzpKnydBUEwB"),l=function(e){if(e)return new Date(1e3*e.toNumber())},d=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),m={format:function(e){return e?d.format(e):"--"},asInteger:function(e){return e?e.toNumber():1},asNumber:function(e){if(e)return e.toNumber()/c.LAMPORTS_PER_SOL}},p=new s.e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),h=function(){var t=Object(i.a)(r.a.mark((function t(n,a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),a.toArrayLike(e,"le",8)],u);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.e.PublicKey.findProgramAddress([n.toBuffer(),o.b.toBuffer(),t.toBuffer()],p);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function f(t,n,a,r){var i=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:o.b,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new c.TransactionInstruction({keys:i,programId:p,data:e.from([])})}}).call(this,n(6).Buffer)},488:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a,r=n(19),i=n(1),s=n.n(i),o=n(3),c=n(50),u=n(65);!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(a||(a={}));var l=function(){var e=Object(o.a)(s.a.mark((function e(t,n,a,i){var o,l,d,m,h,b,f,g,y,v,k,j=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=j.length>4&&void 0!==j[4]?j[4]:"singleGossip",l=j.length>5&&void 0!==j[5]&&j[5],d=j.length>6?j[6]:void 0,m=j.length>7?j[7]:void 0,n.publicKey){e.next=6;break}throw new u.WalletNotConnectedError;case 6:if(h=new c.Transaction,a.forEach((function(e){return h.add(e)})),e.t0=d,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(o);case 12:e.t0=e.sent;case 13:if(h.recentBlockhash=e.t0.blockhash,l?(b=h).setSigners.apply(b,Object(r.a)(i.map((function(e){return e.publicKey})))):(f=h).setSigners.apply(f,[n.publicKey].concat(Object(r.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(g=h).partialSign.apply(g,Object(r.a)(i)),l){e.next=20;break}return e.next=19,n.signTransaction(h);case 19:h=e.sent;case 20:return m&&m(),e.next=23,p({connection:t,signedTransaction:h});case 23:return y=e.sent,v=y.txid,k=y.slot,e.abrupt("return",{txid:v,slot:k});case 27:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),d=function(){return(new Date).getTime()/1e3},m=15e3;function p(e){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(s.a.mark((function e(t){var n,a,r,i,c,u,l,p,h,f,y,k,j;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,a=t.connection,r=t.timeout,i=void 0===r?m:r,c=n.serialize(),u=d(),l=0,e.next=6,a.sendRawTransaction(c,{skipPreflight:!0});case 6:return p=e.sent,console.log("Started awaiting confirmation for",p),h=!1,Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h||!(d()-u<i)){e.next=6;break}return a.sendRawTransaction(c,{skipPreflight:!0}),e.next=4,v(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,g(p,i,a,"recent",!0);case 13:if(f=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!f.err){e.next=19;break}throw console.error(f.err),new Error("Transaction failed: Custom instruction error");case 19:l=(null===f||void 0===f?void 0:f.slot)||0,e.next=47;break;case 22:if(e.prev=22,e.t0=e.catch(10),console.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return y=null,e.prev=28,e.next=31,b(a,n,"single");case 31:y=e.sent.value,e.next=36;break;case 34:e.prev=34,e.t1=e.catch(28);case 36:if(!y||!y.err){e.next=47;break}if(!y.logs){e.next=46;break}k=y.logs.length-1;case 39:if(!(k>=0)){e.next=46;break}if(!(j=y.logs[k]).startsWith("Program log: ")){e.next=43;break}throw new Error("Transaction failed: "+j.slice("Program log: ".length));case 43:--k,e.next=39;break;case 46:throw new Error(JSON.stringify(y.err));case 47:return e.prev=47,h=!0,e.finish(47);case 50:return console.log("Latency",p,d()-u),e.abrupt("return",{txid:p,slot:l});case 52:case"end":return e.stop()}}),e,null,[[10,22,47,50],[28,34]])})))).apply(this,arguments)}function b(e,t,n){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(s.a.mark((function e(t,n,a){var r,i,o,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,r=n.serializeMessage(),i=n._serialize(r),o=i.toString("base64"),c=[o,{encoding:"base64",commitment:a}],e.next=10,t._rpcRequest("simulateTransaction",c);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,n){return y.apply(this,arguments)}function y(){return y=Object(o.a)(s.a.mark((function e(t,n,a){var r,i,c,u,l,d=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>3&&void 0!==d[3]?d[3]:"recent",i=d.length>4&&void 0!==d[4]&&d[4],c=!1,u={slot:0,confirmations:0,err:null},l=0,e.next=7,new Promise(function(){var e=Object(o.a)(s.a.mark((function e(d,m){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){c||(c=!0,console.log("Rejecting for timeout..."),m({timeout:!0}))}),n);try{l=a.onSignature(t,(function(e,t){c=!0,u={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),m(u)):(console.log("Resolved via websocket",e),d(u))}),r)}catch(p){c=!0,console.error("WS error in setup",t,p)}case 2:if(c||!i){e.next=8;break}return Object(o.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.getSignatureStatuses([t]);case 3:n=e.sent,u=n&&n.value[0],c||(u?u.err?(console.log("REST error for",t,u),c=!0,m(u.err)):u.confirmations?(console.log("REST confirmation for",t,u),c=!0,d(u)):console.log("REST no confirmations for",t,u):console.log("REST null result for",t,u)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=6,v(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return u=e.sent,a._signatureSubscriptions[l]&&a.removeSignatureListener(l),c=!0,console.log("Returning status",u),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function v(e){return new Promise((function(t){return setTimeout(t,e)}))}},489:function(e){e.exports=JSON.parse('{"version":"0.0.0","name":"fair_launch","instructions":[{"name":"initializeFairLaunch","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"tokenMint","isMut":true,"isSigner":false},{"name":"treasury","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"fuckboi","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"treasuryBump","type":"u8"},{"name":"tokenMintBump","type":"u8"},{"name":"data","type":{"defined":"FairLaunchData"}}]},{"name":"updateFairLaunch","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"dev","isMut":false,"isSigner":true},{"name":"clock","isMut":false,"isSigner":false}],"args":[]},{"name":"startPhaseThree","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"fairLaunchLotteryBitmap","isMut":false,"isSigner":false},{"name":"dev","isMut":false,"isSigner":true},{"name":"tokenMint","isMut":true,"isSigner":false}],"args":[]},{"name":"updateFairLaunchLotteryBitmap","accounts":[{"name":"fairLaunch","isMut":false,"isSigner":false},{"name":"fairLaunchLotteryBitmap","isMut":true,"isSigner":false},{"name":"dev","isMut":false,"isSigner":true}],"args":[{"name":"index","type":"u32"},{"name":"bytes","type":"bytes"}]},{"name":"createFairLaunchLotteryBitmap","accounts":[{"name":"fairLaunch","isMut":false,"isSigner":false},{"name":"fairLaunchLotteryBitmap","isMut":true,"isSigner":false},{"name":"dev","isMut":false,"isSigner":true},{"name":"payer","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"}]},{"name":"purchaseTicket","accounts":[{"name":"fairLaunchTicket","isMut":true,"isSigner":false},{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"treasury","isMut":true,"isSigner":false},{"name":"buyer","isMut":true,"isSigner":true},{"name":"payer","isMut":true,"isSigner":true},{"name":"dev","isMut":true,"isSigner":false},{"name":"fuckboi","isMut":true,"isSigner":false},{"name":"stranger","isMut":true,"isSigner":false},{"name":"arandom","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"amount","type":"u64"}]},{"name":"createTicketSeq","accounts":[{"name":"fairLaunchTicketSeqLookup","isMut":true,"isSigner":false},{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"fairLaunchTicket","isMut":true,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"}]},{"name":"adjustTicket","accounts":[{"name":"fairLaunchTicket","isMut":true,"isSigner":false},{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"fairLaunchLotteryBitmap","isMut":false,"isSigner":false},{"name":"treasury","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"dev","isMut":true,"isSigner":false},{"name":"fuckboi","isMut":true,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"punchTicket","accounts":[{"name":"fairLaunchTicket","isMut":true,"isSigner":false},{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"fairLaunchLotteryBitmap","isMut":false,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"buyerTokenAccount","isMut":true,"isSigner":false},{"name":"tokenMint","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"treasury","isMut":true,"isSigner":false},{"name":"buyer","isMut":true,"isSigner":false}],"args":[]},{"name":"withdrawFunds","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"treasury","isMut":true,"isSigner":false},{"name":"authority","isMut":true,"isSigner":true},{"name":"tokenMint","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"restartPhaseTwo","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[]},{"name":"setTokenMetadata","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"dev","isMut":true,"isSigner":true},{"name":"payer","isMut":true,"isSigner":true},{"name":"metadata","isMut":true,"isSigner":false},{"name":"tokenMint","isMut":true,"isSigner":false},{"name":"tokenMetadataProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"data","type":{"defined":"TokenMetadata"}}]},{"name":"setParticipationNft","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"dev","isMut":false,"isSigner":true},{"name":"payer","isMut":true,"isSigner":true},{"name":"participationMint","isMut":true,"isSigner":false},{"name":"participationTokenAccount","isMut":true,"isSigner":false},{"name":"metadata","isMut":true,"isSigner":false},{"name":"masterEdition","isMut":true,"isSigner":false},{"name":"tokenMetadataProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"participationMintBump","type":"u8"},{"name":"participationTokenBump","type":"u8"},{"name":"participationModulo","type":"u8"},{"name":"data","type":{"defined":"TokenMetadata"}}]},{"name":"updateParticipationNft","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"dev","isMut":false,"isSigner":true},{"name":"metadata","isMut":true,"isSigner":false},{"name":"tokenMetadataProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"participationModulo","type":"u8"},{"name":"data","type":{"defined":"TokenMetadata"}}]},{"name":"mintParticipationNft","accounts":[{"name":"fairLaunch","isMut":false,"isSigner":false},{"name":"fairLaunchTicket","isMut":true,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"participationMint","isMut":true,"isSigner":false},{"name":"participationTokenAccount","isMut":true,"isSigner":false},{"name":"buyer","isMut":false,"isSigner":false},{"name":"buyerNftTokenAccount","isMut":false,"isSigner":false},{"name":"newMetadata","isMut":true,"isSigner":false},{"name":"newEdition","isMut":true,"isSigner":false},{"name":"newMint","isMut":true,"isSigner":false},{"name":"newMintAuthority","isMut":false,"isSigner":true},{"name":"metadata","isMut":true,"isSigner":false},{"name":"masterEdition","isMut":true,"isSigner":false},{"name":"editionMarkPda","isMut":true,"isSigner":false},{"name":"tokenMetadataProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false}],"args":[]},{"name":"mintTokens","accounts":[{"name":"fairLaunch","isMut":true,"isSigner":false},{"name":"dev","isMut":false,"isSigner":true},{"name":"tokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"tokenMint","isMut":true,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]}],"accounts":[{"name":"FairLaunch","type":{"kind":"struct","fields":[{"name":"tokenMint","type":"publicKey"},{"name":"treasury","type":"publicKey"},{"name":"treasuryMint","type":{"option":"publicKey"}},{"name":"authority","type":"publicKey"},{"name":"bump","type":"u8"},{"name":"treasuryBump","type":"u8"},{"name":"tokenMintBump","type":"u8"},{"name":"data","type":{"defined":"FairLaunchData"}},{"name":"numberTicketsUnSeqed","type":"u64"},{"name":"numberTicketsSold","type":"u64"},{"name":"numberTicketsDropped","type":"u64"},{"name":"numberTicketsPunched","type":"u64"},{"name":"numberTokensBurnedForRefunds","type":"u64"},{"name":"numberTokensPreminted","type":"u64"},{"name":"phaseThreeStarted","type":"bool"},{"name":"treasurySnapshot","type":{"option":"u64"}},{"name":"currentEligibleHolders","type":"u64"},{"name":"currentMedian","type":"u64"},{"name":"currentHighest","type":"u64"},{"name":"countsAtEachTick","type":{"vec":"u64"}},{"name":"participationModulo","type":"u8"},{"name":"participationMintBump","type":"u8"},{"name":"participationTokenBump","type":"u8"},{"name":"participationMint","type":{"option":"publicKey"}},{"name":"dev","type":"publicKey"},{"name":"fuckboi","type":"publicKey"},{"name":"stranger","type":"publicKey"}]}},{"name":"FairLaunchLotteryBitmap","type":{"kind":"struct","fields":[{"name":"fairLaunch","type":"publicKey"},{"name":"bump","type":"u8"},{"name":"bitmapOnes","type":"u64"}]}},{"name":"FairLaunchTicket","type":{"kind":"struct","fields":[{"name":"fairLaunch","type":"publicKey"},{"name":"buyer","type":"publicKey"},{"name":"amount","type":"u64"},{"name":"state","type":{"defined":"FairLaunchTicketState"}},{"name":"bump","type":"u8"},{"name":"seq","type":"u64"},{"name":"gottenParticipation","type":"bool"}]}},{"name":"FairLaunchTicketSeqLookup","type":{"kind":"struct","fields":[{"name":"fairLaunchTicket","type":"publicKey"},{"name":"buyer","type":"publicKey"},{"name":"seq","type":"u64"},{"name":"bump","type":"u8"}]}}],"types":[{"name":"Creator","type":{"kind":"struct","fields":[{"name":"address","type":"publicKey"},{"name":"verified","type":"bool"},{"name":"share","type":"u8"}]}},{"name":"TokenMetadata","type":{"kind":"struct","fields":[{"name":"name","type":"string"},{"name":"symbol","type":"string"},{"name":"uri","type":"string"},{"name":"sellerFeeBasisPoints","type":"u16"},{"name":"creators","type":{"option":{"vec":{"defined":"Creator"}}}},{"name":"isMutable","type":"bool"}]}},{"name":"AntiRugSetting","type":{"kind":"struct","fields":[{"name":"reserveBp","type":"u16"},{"name":"tokenRequirement","type":"u64"},{"name":"selfDestructDate","type":"i64"}]}},{"name":"FairLaunchData","type":{"kind":"struct","fields":[{"name":"uuid","type":"string"},{"name":"priceRangeStart","type":"u64"},{"name":"priceRangeEnd","type":"u64"},{"name":"phaseOneStart","type":"i64"},{"name":"phaseOneEnd","type":"i64"},{"name":"phaseTwoEnd","type":"i64"},{"name":"lotteryDuration","type":"i64"},{"name":"tickSize","type":"u64"},{"name":"numberOfTokens","type":"u64"},{"name":"fee","type":"u64"},{"name":"antiRugSetting","type":{"option":{"defined":"AntiRugSetting"}}}]}},{"name":"FairLaunchTicketState","type":{"kind":"enum","variants":[{"name":"NoSequenceStruct"},{"name":"Unpunched"},{"name":"Punched"},{"name":"Withdrawn"}]}}],"errors":[{"code":300,"name":"IncorrectOwner","msg":"Account does not have correct owner!"},{"code":301,"name":"Uninitialized","msg":"Account is not initialized!"},{"code":302,"name":"MintMismatch","msg":"Mint Mismatch!"},{"code":303,"name":"TokenTransferFailed","msg":"Token transfer failed"},{"code":304,"name":"NumericalOverflowError","msg":"Numerical overflow error"},{"code":305,"name":"TimestampsDontLineUp","msg":"Timestamps of phases should line up"},{"code":306,"name":"CantSetPhaseThreeDatesYet","msg":"Cant set phase 3 dates yet"},{"code":307,"name":"UuidMustBeExactly6Length","msg":"Uuid must be exactly of 6 length"},{"code":308,"name":"TickSizeTooSmall","msg":"Tick size too small"},{"code":309,"name":"CannotGiveZeroTokens","msg":"Cannot give zero tokens"},{"code":310,"name":"InvalidPriceRanges","msg":"Invalid price ranges"},{"code":311,"name":"TooMuchGranularityInRange","msg":"With this tick size and price range, you will have too many ticks(>"},{"code":312,"name":"CannotUseTickSizeThatGivesRemainder","msg":"Cannot use a tick size with a price range that results in a remainder when doing (end-start)/ticksize"},{"code":313,"name":"DerivedKeyInvalid","msg":"Derived key invalid"},{"code":314,"name":"TreasuryAlreadyExists","msg":"Treasury Already Exists"},{"code":315,"name":"LotteryBitmapOnesMustEqualNumberOfTicketsSold","msg":"The number of ones in the lottery must equal the number of tickets sold in phase 1"},{"code":316,"name":"InvalidPurchaseAmount","msg":"Amount must be between price ranges and at a tick mark"},{"code":317,"name":"TreasuryMintMismatch","msg":"Treasury mint does not match"},{"code":318,"name":"NotEnoughTokens","msg":"Not enough tokens to pay for this minting"},{"code":319,"name":"NotEnoughSOL","msg":"Not enough SOL to pay for this minting"},{"code":320,"name":"InvalidTokenProgram","msg":"Sent up invalid token program"},{"code":321,"name":"CannotBuyTicketsOutsidePhaseOne","msg":"Cannot buy tickets outside phase one"},{"code":322,"name":"CannotCreateFairLaunchLotteryBitmapBeforePhaseTwoEnd","msg":"Cannot create the bitmap before phase two end"},{"code":323,"name":"CannotUpdateFairLaunchLotteryOncePhaseThreeLocked","msg":"Cannot update fair launch lottery once phase three locked"},{"code":324,"name":"SeqAlreadyExists","msg":"Seq already exists"},{"code":325,"name":"CannotSetFairLaunchLotteryUntilAllTicketsAreSequenced","msg":"Cannot set lottery until all tickets have sequence lookups using permissionless crank endpoint. Use CLI to make."},{"code":326,"name":"CanOnlySubmitZeroDuringPhaseThree","msg":"During phase three, since you did not pay up to the median, you can only withdraw your funds"},{"code":327,"name":"CanOnlySubmitDifferenceDuringPhaseThree","msg":"During phase three, since you paid above median, you can only withdraw the difference"},{"code":328,"name":"DidNotWinLotteryCanOnlyWithdraw","msg":"You did not win the lottery, therefore you can only withdraw your funds"},{"code":329,"name":"AccountShouldHaveNoDelegates","msg":"This account should have no delegates"},{"code":330,"name":"TokenMintToFailed","msg":"Token minting failed"},{"code":331,"name":"DuringPhaseTwoAndOneBuyerMustBeSigner","msg":"During phase two and one buyer must be signer"},{"code":332,"name":"InvalidFairLaunchTicketState","msg":"Invalid fair launch ticket state for this operation"},{"code":333,"name":"CannotCashOutUntilAllRefundsAndPunchesHaveBeenProcessed","msg":"Cannot cash out until all refunds and punches (permissionless calls) have been processed. Use the CLI."},{"code":334,"name":"CannotCashOutUntilPhaseThree","msg":"Cannot cash out until phase three"},{"code":335,"name":"CannotUpdateFairLaunchDataOnceInProgress","msg":"Cannot update fair launch variables once it is in progress"},{"code":336,"name":"PhaseTwoEnded","msg":"Not able to adjust tickets between phase two and three"},{"code":337,"name":"CannotPunchTicketWhenHavingPaidLessThanMedian","msg":"Cannot punch ticket when having paid less than median."},{"code":338,"name":"AlreadyWithdrawnCapitalAlotment","msg":"You have already withdrawn your seed capital alotment from the treasury."},{"code":339,"name":"NoAntiRugSetting","msg":"No anti rug settings on this fair launch. Should\'ve checked twice."},{"code":340,"name":"SelfDestructNotPassed","msg":"Self destruct date has not passed yet, so you are not eligible for a refund."},{"code":341,"name":"TokenBurnFailed","msg":"Token burn failed"},{"code":342,"name":"NoTreasurySnapshot","msg":"No treasury snapshot present"},{"code":343,"name":"CannotRefundUntilAllTicketsHaveBeenPunchedOrDropped","msg":"Cannot refund until all existing tickets have been dropped or punched"},{"code":344,"name":"CannotRefundUntilPhaseThree","msg":"Cannot refund until phase three"},{"code":345,"name":"InvalidReserveBp","msg":"Invalid reserve bp"},{"code":346,"name":"InvalidAntiRugTokenRequirement","msg":"Anti Rug Token Requirement must be less than or equal to number of tokens being sold"},{"code":347,"name":"CannotPunchTicketUntilPhaseThree","msg":"Cannot punch ticket until phase three"},{"code":348,"name":"CannotPunchTicketUntilEqualized","msg":"Cannot punch ticket until you have refunded the difference between your given price and the median."},{"code":349,"name":"InvalidLotteryDuration","msg":"Invalid lottery duration"},{"code":350,"name":"PhaseThreeAlreadyStarted","msg":"Phase two already started"},{"code":351,"name":"PhaseTwoHasntEndedYet","msg":"Phase two hasnt ended yet"},{"code":352,"name":"LotteryDurationHasntEndedYet","msg":"Lottery duration hasnt ended yet"},{"code":353,"name":"FairLaunchMismatch","msg":"Fair launch ticket and fair launch key mismatch"},{"code":354,"name":"ParticipationTokenAccountAlreadyExists","msg":"Participation Token Account already exists"},{"code":355,"name":"InvalidParticipationModulo","msg":"Invalid participation modulo"},{"code":356,"name":"AlreadyMintedParticipation","msg":"Already got participation"},{"code":357,"name":"NotEligibleForParticipation","msg":"Not eligible for participation"},{"code":358,"name":"ParticipationMintMismatch","msg":"The mint on this account does not match the participation nft mint"},{"code":359,"name":"AccountOwnerShouldBeBuyer","msg":"Account owner should be buyer"},{"code":360,"name":"AccountOwnerShouldBeAuthority","msg":"Account owner should be fair launch authority"},{"code":361,"name":"TokenMintMismatch","msg":"Token mint mismatch"},{"code":362,"name":"CannotMintMoreTokensThanTotal","msg":"Cannot mint more tokens than are allowed by the fair launch"},{"code":363,"name":"CanOnlyPremintOnce","msg":"Due to concerns that you might mint, burn, then mint again and mess up the counter, you can only mint once before the FLP"},{"code":364,"name":"CannotMintTokensUntilAllCashedOut","msg":"Once phase three has begun, no more FLP tokens can be minted until all ticket holders have been given tokens"}],"metadata":{"address":"EHNbEKdx5qimYUBQdUXq2KmdZeikbnpiEzpKnydBUEwB"}}')},515:function(e,t,n){},516:function(e,t,n){},519:function(e,t){},521:function(e,t){},537:function(e,t){},538:function(e,t){},661:function(e,t){},663:function(e,t){},677:function(e,t){},681:function(e,t){},683:function(e,t){},694:function(e,t){},696:function(e,t){},723:function(e,t){},725:function(e,t){},730:function(e,t){},732:function(e,t){},739:function(e,t){},751:function(e,t){},754:function(e,t){},766:function(e,t){},767:function(e,t,n){"use strict";n.r(t);var a,r,i,s,o=n(5),c=n.n(o),u=n(42),l=n.n(u),d=(n(515),n(516),n(10)),m=n(1),p=n.n(m),h=n(3),b=n(20),f=n(235),g=n(178),y=n(800),v=n(789),k=n(796),j=n(788),x=n(786),O=n(797),S=n(312),w=n(50),M=n(787),T=n(499),P=n(502),L=n(795),A=n(484),B=n(308),E=n(406),K=n(17),N=Object(E.a)((function(e){return Object(A.a)({root:{display:"flex",padding:e.spacing(0),"& > *":{margin:e.spacing(.5),marginRight:0,width:e.spacing(6),height:e.spacing(6),display:"flex",flexDirection:"column",alignContent:"center",alignItems:"center",justifyContent:"center",background:"#384457",color:"white",borderRadius:5,fontSize:10}},done:{display:"flex",margin:e.spacing(1),marginRight:0,padding:e.spacing(1),flexDirection:"column",alignContent:"center",alignItems:"center",justifyContent:"center",background:"#384457",color:"white",borderRadius:5,fontWeight:"bold",fontSize:18},item:{fontWeight:"bold",fontSize:18}})})),C=function(e){var t=e.date,n=e.status,a=e.style,r=e.start,i=e.end,s=e.onComplete,c=N(),u=Object(o.useState)(!!(r&&i&&t)&&r.getTime()-Date.now()<0),l=Object(b.a)(u,2),d=l[0],m=(l[1],function(e){var t=e.days,r=e.hours,i=e.minutes,s=e.seconds;return r+=24*t,e.completed?n?Object(K.jsx)("span",{className:c.done,children:n}):null:Object(K.jsxs)("div",{className:c.root,style:a,children:[d&&Object(K.jsx)(T.a,{elevation:0,children:Object(K.jsx)("span",{className:c.item,children:"+"})}),Object(K.jsxs)(T.a,{elevation:0,children:[Object(K.jsx)("span",{className:c.item,children:r<10?"0".concat(r):r}),Object(K.jsx)("span",{children:"hrs"})]}),Object(K.jsxs)(T.a,{elevation:0,children:[Object(K.jsx)("span",{className:c.item,children:i<10?"0".concat(i):i}),Object(K.jsx)("span",{children:"mins"})]}),Object(K.jsxs)(T.a,{elevation:0,children:[Object(K.jsx)("span",{className:c.item,children:s<10?"0".concat(s):s}),Object(K.jsx)("span",{children:"secs"})]})]})});return t&&r&&i&&d&&B.a,t?Object(K.jsx)(B.a,{date:t,onComplete:s,renderer:m}):null},R=n(790),_=n(794),D=n(793),I=n(305),F=n.n(I),W=n(798),U=n(104),q=n(222),Y=n(236),z=n(109),H=n(37),G=Object(g.a)(q.WalletDialogButton)(a||(a=Object(f.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),V=g.a.div(r||(r=Object(f.a)([""]))),J=Object(g.a)(M.a)(i||(i=Object(f.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),X=function(e){return Object(A.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})},Z=Object(g.a)(y.a)({color:"#C0D5FE",height:8,"& > *":{height:4},"& .MuiSlider-track":{border:"none",height:4},"& .MuiSlider-thumb":{height:24,width:24,marginTop:-10,background:"linear-gradient(180deg, #604AE5 0%, #813EEE 100%)",border:"2px solid currentColor","&:focus, &:hover, &.Mui-active, &.Mui-focusVisible":{boxShadow:"inherit"},"&:before":{display:"none"}},"& .MuiSlider-valueLabel":{"& > *":{background:"linear-gradient(180deg, #604AE5 0%, #813EEE 100%)"},lineHeight:1.2,fontSize:12,padding:0,width:32,height:32,marginLeft:9}});!function(e){e[e.Phase0=0]="Phase0",e[e.Phase1=1]="Phase1",e[e.Phase2=2]="Phase2",e[e.Lottery=3]="Lottery",e[e.Phase3=4]="Phase3",e[e.Phase4=5]="Phase4",e[e.Unknown=6]="Unknown"}(s||(s={}));var Q=function(e){var t=e.phaseName,n=e.desc,a=e.date,r=e.status;return Object(K.jsxs)(L.a,{container:!0,justifyContent:"center",children:[Object(K.jsxs)(L.a,{xs:6,justifyContent:"center",direction:"column",children:[Object(K.jsx)(P.a,{variant:"h5",style:{fontWeight:600},children:t}),Object(K.jsx)(P.a,{variant:"body1",color:"textSecondary",children:n})]}),Object(K.jsx)(L.a,{xs:6,container:!0,justifyContent:"flex-end",children:Object(K.jsx)(C,{date:Object(H.f)(a),style:{justifyContent:"flex-end"},status:r||"COMPLETE"})})]})};var $=function(e,t){var n,a,r;if(console.log(t),t>0)return!0;if(!(null===e||void 0===e?void 0:e.lottery.data)||!(null===e||void 0===e?void 0:e.lottery.data.length)||!(null===e||void 0===e||null===(n=e.ticket.data)||void 0===n?void 0:n.seq)||!(null===e||void 0===e?void 0:e.state.phaseThreeStarted))return console.log("false"),!1;var i=e.lottery.data[49+Math.floor((null===(a=e.ticket.data)||void 0===a?void 0:a.seq.toNumber())/8)],s=7-(null===(r=e.ticket.data)||void 0===r?void 0:r.seq.toNumber())%8,o=i&Math.pow(2,s);return o>0};var ee=!0,te=function(e){var t,n,a,r,i,c,u,l,m,f,g,y,M,A,B,E,N,C,I,q,te,ne,ae,re,ie=Object(o.useState)(0),se=Object(b.a)(ie,2),oe=se[0],ce=(se[1],Object(o.useState)(null)),ue=Object(b.a)(ce,2),le=(ue[0],ue[1],Object(o.useState)([""])),de=Object(b.a)(le,2),me=(de[0],de[1],Object(o.useState)([""])),pe=Object(b.a)(me,2),he=(pe[0],pe[1],Object(o.useState)(!1)),be=Object(b.a)(he,2),fe=be[0],ge=be[1],ye=Object(o.useState)(0),ve=Object(b.a)(ye,2),ke=ve[0],je=ve[1],xe=Object(U.useWallet)(),Oe=Object(o.useMemo)((function(){if(xe&&xe.publicKey&&xe.signAllTransactions&&xe.signTransaction)return{publicKey:xe.publicKey,signAllTransactions:xe.signAllTransactions,signTransaction:xe.signTransaction}}),[xe]),Se=Object(o.useState)({open:!1,message:"",severity:void 0}),we=Object(b.a)(Se,2),Me=we[0],Te=we[1],Pe=Object(o.useState)(),Le=Object(b.a)(Pe,2),Ae=Le[0],Be=Le[1],Ee=Object(o.useState)(),Ke=Object(b.a)(Ee,2),Ne=Ke[0],Ce=Ke[1],Re=Object(o.useState)(!1),_e=Object(b.a)(Re,2),De=_e[0],Ie=_e[1],Fe=Object(o.useState)(!1),We=Object(b.a)(Fe,2),Ue=We[0],qe=We[1],Ye=Object(o.useState)(!1),ze=Object(b.a)(Ye,2),He=ze[0],Ge=ze[1],Ve=Object(o.useState)([]),Je=Object(b.a)(Ve,2),Xe=Je[0],Ze=Je[1],Qe=Object(o.useState)([]),$e=Object(b.a)(Qe,2),et=$e[0],tt=$e[1];void 0!=Ae&&ee&&void 0!=Oe&&void 0!=Ae.state&&(ee=!1,setTimeout(Object(h.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.e)(Oe,Ae);case 2:return t=e.sent,console.log(t),e.next=6,Object(z.f)(Oe,Ae);case 6:n=e.sent,console.log(n);try{Ze(Object(K.jsxs)("div",{children:[Object(K.jsxs)("h1",{children:["This fair3d's publicKey: ","CKdk5rxrBo73J3D6jCk8XDgx4b5kojcmu7KvfWFaufKF"]}),Object(K.jsx)("h2",{children:"DYOR and run the show and show_lottery commands yourself on your own version of our modified Metaplex CLI..."}),Object(K.jsx)("h2",{children:"...fear not! the Solana Program code in RUST is available for peer review on the same github repository :)"}),"To accomplish this, run these commands with solana cli, git, node, npm and yarn installed - make sure you configure solana cli first! ",Object(K.jsx)("br",{}),"git clone https://github.com/dunncreativess/fair3d ",Object(K.jsx)("br",{}),"cd fair3d/js && yarn install && yarn build   ",Object(K.jsx)("br",{}),"node packages/cli/build/fair-launch-cli.js show -e mainnet-beta -k ~/.config/solana/id.json -f ","CKdk5rxrBo73J3D6jCk8XDgx4b5kojcmu7KvfWFaufKF"," ",Object(K.jsx)("br",{}),"later, you can also run: ",Object(K.jsx)("br",{}),"node packages/cli/build/fair-launch-cli.js show_lottery -e mainnet-beta -k ~/.config/solana/id.json -f ","CKdk5rxrBo73J3D6jCk8XDgx4b5kojcmu7KvfWFaufKF"," ",Object(K.jsx)("br",{}),Object(K.jsx)("h2",{children:"Metaplex fair-launch-cli 'show' command output:"}),t.map((function(e,t){return Object(K.jsxs)(K.Fragment,{children:[e,Object(K.jsx)("br",{})]})}))]}))}catch(a){}try{tt(Object(K.jsxs)("div",{children:[Object(K.jsx)("h2",{children:"Metaplex fair-launch-cli 'show_lottery' command output:"}),n.map((function(e,t){return Object(K.jsxs)(K.Fragment,{children:[e,Object(K.jsx)("br",{})]})}))]}))}catch(a){}case 10:case"end":return e.stop()}}),e)}))),1e3));var nt=function(){var t=Object(h.a)(p.a.mark((function t(){var n,a,r,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,ge(!0),!(xe.connected&&(null===Ne||void 0===Ne?void 0:Ne.program)&&xe.publicKey)){t.next=13;break}if(!(null===Ae||void 0===Ae||null===(n=Ae.ticket.data)||void 0===n?void 0:n.state.unpunched)||!$(Ae,oe)){t.next=6;break}return t.next=6,dt();case 6:return t.next=8,Object(Y.c)(Ne,xe.publicKey);case 8:return a=t.sent,t.next=11,Object(Y.a)(a,e.txTimeout,e.connection,"singleGossip",!1);case 11:(null===(r=t.sent)||void 0===r?void 0:r.err)?Te({open:!0,message:"Mint failed! Please try again!",severity:"error"}):Te({open:!0,message:"Congratulations! Mint succeeded!",severity:"success"});case 13:t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),i=t.t0.msg||"Minting failed! Please try again!",t.t0.msg?311===t.t0.code?(i="SOLD OUT!",window.location.reload()):312===t.t0.code&&(i="Minting period hasn't started yet."):t.t0.message?t.t0.message.indexOf("0x138")||(t.t0.message.indexOf("0x137")?i="SOLD OUT!":t.t0.message.indexOf("0x135")&&(i="Insufficient funds to mint. Please fund your wallet.")):i="Transaction Timeout! Please try again.",Te({open:!0,message:i,severity:"error"});case 20:return t.prev=20,ge(!1),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[0,15,20,23]])})));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){Object(h.a)(p.a.mark((function t(){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Oe){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,Object(z.a)(Oe,e.fairLaunchId,e.connection);case 5:n=t.sent,Be(n),je((n.state.currentMedian||n.state.data.priceRangeStart).toNumber()/w.LAMPORTS_PER_SOL),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.log("Problem getting fair launch state"),console.log(t.t0);case 14:if(!e.candyMachineId){t.next=28;break}return t.prev=15,t.next=18,Object(Y.b)(Oe,e.candyMachineId,e.connection);case 18:a=t.sent,Ce(a),t.next=26;break;case 22:t.prev=22,t.t1=t.catch(15),console.log("Problem getting candy machine state"),console.log(t.t1);case 26:t.next=29;break;case 28:console.log("No candy machine detected in configuration.");case 29:case"end":return t.stop()}}),t,null,[[2,10],[15,22]])})))()}),[Oe,e.candyMachineId,e.connection,e.fairLaunchId]);var at=H.c.asNumber(null===Ae||void 0===Ae?void 0:Ae.state.data.priceRangeStart),rt=H.c.asNumber(null===Ae||void 0===Ae?void 0:Ae.state.data.priceRangeEnd),it=H.c.asNumber(null===Ae||void 0===Ae?void 0:Ae.state.data.tickSize),st=H.c.asNumber(null===Ae||void 0===Ae?void 0:Ae.state.currentMedian),ot=(null===Ae||void 0===Ae?void 0:Ae.state.currentHighest)/w.LAMPORTS_PER_SOL,ct=H.c.asInteger(null===Ae||void 0===Ae?void 0:Ae.state.data.numberOfTokens);console.log(at);var ut=[{value:at||0,label:"".concat(at," SOL")},{value:ot||0,label:"Winning Bid: ".concat(ot," SOL")},{value:rt||0,label:"".concat(rt," SOL")}].filter((function(e){return void 0!==e})),lt=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Oe){e.next=2;break}return e.abrupt("return");case 2:if(console.log("deposit"),ge(!0),console.log(Ae.state.authority.toBase58()),console.log(Oe.publicKey.toBase58()),e.prev=6,Ae.state.authority.toBase58()!=Oe.publicKey.toBase58()){e.next=13;break}return e.next=10,Object(z.g)(Oe,Ae);case 10:return ge(!1),Te({open:!0,message:"Congratulations! You've punched every ticket and taken most of the balance ;)!",severity:"success"}),e.abrupt("return");case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(6),console.log(e.t0),ge(!1),Te({open:!0,message:"Something went wrong.",severity:"error"});case 20:return e.prev=20,e.next=23,Object(z.c)(ke,Oe,Ae);case 23:ge(!1),Te({open:!0,message:"Congratulations! Bid ".concat((null===Ae||void 0===Ae?void 0:Ae.ticket.data)?"updated":"inserted","!"),severity:"success"}),e.next=32;break;case 27:e.prev=27,e.t1=e.catch(20),console.log(e.t1),ge(!1),Te({open:!0,message:"Something went wrong.",severity:"error"});case 32:case"end":return e.stop()}}),e,null,[[6,15],[20,27]])})));return function(){return e.apply(this,arguments)}}(),dt=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Oe&&Ae&&Ae.ticket){e.next=2;break}return e.abrupt("return");case 2:return console.log("punch"),ge(!0),e.prev=4,e.next=7,Object(z.b)(Oe,Ae);case 7:ge(!1),Te({open:!0,message:"Congratulations! Ticket punched!",severity:"success"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0),ge(!1),Te({open:!0,message:"Something went wrong.",severity:"error"});case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),mt=function(e,t){var n,a,r,i,o=(new Date).getTime(),c=null===(n=Object(H.f)(null===e||void 0===e?void 0:e.state.data.phaseOneStart))||void 0===n?void 0:n.getTime(),u=null===(a=Object(H.f)(null===e||void 0===e?void 0:e.state.data.phaseOneEnd))||void 0===a?void 0:a.getTime(),l=null===(r=Object(H.f)(null===e||void 0===e?void 0:e.state.data.phaseTwoEnd))||void 0===r?void 0:r.getTime(),d=null===(i=Object(H.f)(null===t||void 0===t?void 0:t.state.goLiveDate))||void 0===i?void 0:i.getTime();return c&&o<c?s.Phase0:u&&o<=u?s.Phase1:l&&o<=l?s.Phase2:(null===e||void 0===e?void 0:e.state.phaseThreeStarted)?(null===e||void 0===e?void 0:e.state.phaseThreeStarted)&&d&&o>d?s.Phase4:(null===e||void 0===e?void 0:e.state.phaseThreeStarted)?s.Phase3:s.Unknown:s.Lottery}(Ae,Ne);console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury),console.log(null===Ae||void 0===Ae?void 0:Ae.treasury);var pt=(null===Ne||void 0===Ne?void 0:Ne.state.goLiveDate)&&(null===Ae||void 0===Ae?void 0:Ae.state.data.phaseTwoEnd)&&(null===Ne||void 0===Ne?void 0:Ne.state.goLiveDate.lt(null===Ae||void 0===Ae?void 0:Ae.state.data.phaseTwoEnd));return void 0!=Ae&&console.log(Ae.ticket),Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)(v.a,{style:{marginTop:100},children:[Object(K.jsx)(v.a,{maxWidth:"xl",style:{position:"relative"},children:Object(K.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},children:Object(K.jsx)(k.a,{component:"button",variant:"body2",color:"textSecondary",align:"right",onClick:function(){Ge(!0)},children:"Show Game && Show Lottery"})})}),Object(K.jsx)(v.a,{maxWidth:"xl",style:{position:"relative"},children:Object(K.jsx)(T.a,{style:{padding:24,backgroundColor:"#151A1F",borderRadius:6},children:Object(K.jsxs)(L.a,{container:!0,justifyContent:"center",direction:"column",children:[mt===s.Phase0&&Object(K.jsx)(Q,{phaseName:"Phase 0",desc:"Anticipation Phase",date:null===Ae||void 0===Ae?void 0:Ae.state.data.phaseOneStart}),mt===s.Phase1&&Object(K.jsx)(Q,{phaseName:"Phase 1",desc:"SOL of the Hill Phase",date:null===Ae||void 0===Ae?void 0:Ae.state.data.phaseOneEnd}),mt===s.Phase2&&Object(K.jsx)(Q,{phaseName:"Phase 2",desc:"Grace period",date:null===Ae||void 0===Ae?void 0:Ae.state.data.phaseTwoEnd}),mt===s.Lottery&&Object(K.jsx)(Q,{phaseName:"Phase 3",desc:"MAKE DEV RUN LOTTERY!",date:null===Ae||void 0===Ae?void 0:Ae.state.data.phaseTwoEnd.add(null===Ae||void 0===Ae?void 0:Ae.state.data.lotteryDuration)}),mt===s.Phase3&&!Ne&&Object(K.jsx)(Q,{phaseName:"Phase 3",desc:"Fair3d Game finished!",date:null===Ae||void 0===Ae?void 0:Ae.state.data.phaseTwoEnd}),mt===s.Phase3&&Ne&&Object(K.jsx)(Q,{phaseName:"Phase 3",desc:"Minting starts in...",date:null===Ne||void 0===Ne?void 0:Ne.state.goLiveDate}),mt===s.Phase4&&Object(K.jsx)(Q,{phaseName:pt?"Phase 3":"Phase 4",desc:"Candy Time \ud83c\udf6c \ud83c\udf6c \ud83c\udf6c",date:null===Ne||void 0===Ne?void 0:Ne.state.goLiveDate,status:"LIVE"}),")",Ae&&Object(K.jsx)(S.a,{url:"https://fair3d.me",options:{text:"#fair3d is awesome eh, "+Ae.state.authority.toBase58().slice(0,3)+"..."+Ae.state.authority.toBase58().slice(Ae.state.authority.toBase58().length-3,Ae.state.authority.toBase58().length)+" is Authority & 1st prize @ "+.9*(null===Ae||void 0===Ae?void 0:Ae.treasury)/w.LAMPORTS_PER_SOL+" SOL",via:"fair3d_me"}}),Ae&&Object(K.jsxs)(L.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:200,marginTop:20,marginBottom:20,background:"#384457",borderRadius:6},children:[Object(K.jsxs)(P.a,{variant:"h6",style:{fontWeight:900},children:[Ae.state.authority.toBase58().slice(0,3)+"..."+Ae.state.authority.toBase58().slice(Ae.state.authority.toBase58().length-3,Ae.state.authority.toBase58().length)," is Authority"]}),[s.Lottery].includes(mt)?Object(K.jsxs)(P.a,{children:["MAKE DEV RUN LOTTERY! @jarettdunn @STACCArt ",Object(K.jsx)("br",{}),"Hi! Make the DEV run the Lottery! This is to ensure no other party has a chance to cSOLhange the results, as they're (currently...) calculated off-chain"]}):[s.Phase0,s.Phase1].includes(mt)&&!Ae.ticket.data?Object(K.jsxs)(K.Fragment,{children:["  ",Object(K.jsxs)(P.a,{children:["The last person to bid a new highest bid wins 90% the treasurypot. ",Object(K.jsx)("br",{}),"10% of bidders win around 10% treasurypot. ",Object(K.jsx)("br",{})]}),Object(K.jsx)(P.a,{children:"Both net-new bids and a changed bid, if higher than the current highest bid, will become the new Authority."})]}):[s.Phase0,s.Phase1].includes(mt)&&Ae.ticket.data?Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(P.a,{children:"Your bid"}),Object(K.jsxs)(P.a,{variant:"h6",style:{fontWeight:900},children:[H.c.format(((null===Ae||void 0===Ae||null===(t=Ae.ticket.data)||void 0===t?void 0:t.amount.toNumber())||0)/w.LAMPORTS_PER_SOL)," ","SOL"]}),Object(K.jsx)(P.a,{children:"Both net-new bids and a changed bid, if higher than the current highest bid, will become the new Authority."})]}):[s.Phase2].includes(mt)&&Ae.ticket.data&&(null===Ae||void 0===Ae||null===(n=Ae.ticket.data)||void 0===n?void 0:n.amount.toNumber())<st?Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(P.a,{children:"Your bid"}),Object(K.jsxs)(P.a,{variant:"h6",style:{fontWeight:900},children:[H.c.format(((null===Ae||void 0===Ae||null===(a=Ae.ticket.data)||void 0===a?void 0:a.amount.toNumber())||0)/w.LAMPORTS_PER_SOL)," ","SOL"]}),Object(K.jsx)(P.a,{children:"Median Bid - The Minimum To Qualify For A Chance At 10% Of The Bidders Sharing 10% Of The Pot :)"}),Object(K.jsxs)(P.a,{variant:"h6",style:{fontWeight:900},children:[H.c.format((st||0)/w.LAMPORTS_PER_SOL)," ","SOL"]}),Object(K.jsx)(P.a,{children:"Congrats on your bid! The Authority is now chosen and will win 90% of the pot. If you want a chance to win a share of what remains in the pot, adjust bid. GLHF!"})]}):[s.Phase2].includes(mt)&&Ae.ticket.data&&(null===Ae||void 0===Ae||null===(r=Ae.ticket.data)||void 0===r?void 0:r.amount.toNumber())>=st?Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(P.a,{children:"Your bid"}),Object(K.jsxs)(P.a,{variant:"h6",style:{fontWeight:900},children:[H.c.format(((null===Ae||void 0===Ae||null===(i=Ae.ticket.data)||void 0===i?void 0:i.amount.toNumber())||0)/w.LAMPORTS_PER_SOL)," ","SOL"]}),Object(K.jsx)(P.a,{children:"Median Bid - The Minimum To Qualify For A Chance At 10% Of The Bidders Sharing 10% Of The Pot :)"}),Object(K.jsxs)(P.a,{variant:"h6",style:{fontWeight:900},children:[H.c.format((st||0)/w.LAMPORTS_PER_SOL)," ","SOL"]}),Object(K.jsx)(P.a,{children:"Congrats on your bid! The Authority is now chosen and will win 90% of the pot. "})]}):Object(K.jsx)(P.a,{children:"You didn't participate in this Fair3d Game."})]}),Ae&&Object(K.jsxs)(K.Fragment,{children:[[s.Phase1,s.Phase2,s.Phase3,s.Lottery].includes(mt)&&(null===Ae||void 0===Ae||null===(c=Ae.ticket)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.state.withdrawn)&&Object(K.jsx)("div",{style:{paddingTop:"15px"},children:Object(K.jsx)(W.a,{severity:"error",children:"Your bid was withdrawn and cannot be adjusted or re-inserted."})}),[s.Phase1,s.Phase2].includes(mt)&&Ae.state.currentMedian&&(null===Ae||void 0===Ae||null===(l=Ae.ticket)||void 0===l||null===(m=l.data)||void 0===m?void 0:m.amount)&&!(null===Ae||void 0===Ae||null===(f=Ae.ticket)||void 0===f||null===(g=f.data)||void 0===g?void 0:g.state.withdrawn)&&Ae.state.currentMedian.gt(null===Ae||void 0===Ae||null===(y=Ae.ticket)||void 0===y||null===(M=y.data)||void 0===M?void 0:M.amount)&&Object(K.jsx)("div",{style:{paddingTop:"15px"},children:Object(K.jsx)(W.a,{severity:"warning",children:"Your bid is currently below the median bid and will not be eligible for the Fair3d Game."})}),[s.Phase3,s.Phase4,s.Lottery].includes(mt)&&Ae.state.currentMedian&&(null===Ae||void 0===Ae||null===(A=Ae.ticket)||void 0===A||null===(B=A.data)||void 0===B?void 0:B.amount)&&!(null===Ae||void 0===Ae||null===(E=Ae.ticket)||void 0===E||null===(N=E.data)||void 0===N?void 0:N.state.withdrawn)&&Ae.state.currentMedian.gt(null===Ae||void 0===Ae||null===(C=Ae.ticket)||void 0===C||null===(I=C.data)||void 0===I?void 0:I.amount)&&Object(K.jsx)("div",{style:{paddingTop:"15px"},children:Object(K.jsx)(W.a,{severity:"error",children:"Your bid wasn't the newest highest bid - you didn't win 90% of the treasurypot! Your bid was below the median bid and was not included in the lottery to win a chance of 10% of the pot."})}),false]}),[s.Phase1,s.Phase2].includes(mt)&&Object(K.jsx)(K.Fragment,{children:Object(K.jsx)(L.a,{style:{marginTop:40,marginBottom:20},children:Object(K.jsx)(Z,{min:at,marks:ut,max:rt,step:it,value:ke,onChange:function(e,t){return je(t)},valueLabelDisplay:"auto",style:{width:"calc(100% - 40px)",marginLeft:20,height:30}})})}),xe.connected?Object(K.jsxs)("div",{children:[[s.Phase1,s.Phase2].includes(mt)&&Object(K.jsx)(K.Fragment,{children:Object(K.jsx)(J,{onClick:lt,variant:"contained",disabled:fe||!(null===Ae||void 0===Ae?void 0:Ae.ticket.data)&&mt===s.Phase2||false,children:fe?Object(K.jsx)(j.a,{}):(null===Ae||void 0===Ae?void 0:Ae.ticket.data)?"Change bid":"Place bid"})}),[s.Phase3,s.Phase4].includes(mt)&&Object(K.jsxs)(K.Fragment,{children:[Ae.state.authority.toBase58()==Oe.publicKey.toBase58()&&Object(K.jsx)(J,{onClick:lt,variant:"contained",disabled:fe,children:fe?Object(K.jsx)(j.a,{}):"WINNERwinner!! Click me!"}),$(Ae,oe)&&Object(K.jsx)(J,{onClick:dt,variant:"contained",disabled:void 0!==(null===Ae||void 0===Ae||null===(q=Ae.ticket.data)||void 0===q?void 0:q.state.punched),children:fe?Object(K.jsx)(j.a,{}):"Punch Ticket"})]}),mt===s.Phase4&&Object(K.jsx)(K.Fragment,{children:(!Ae||$(Ae,oe))&&Object(K.jsx)(V,{children:Object(K.jsx)(J,{disabled:(null===Ne||void 0===Ne?void 0:Ne.state.isSoldOut)||fe||!(null===Ne||void 0===Ne?void 0:Ne.state.isActive)||(null===Ae||void 0===Ae||null===(te=Ae.ticket)||void 0===te||null===(ne=te.data)||void 0===ne?void 0:ne.state.punched)&&0===oe,onClick:nt,variant:"contained",children:(null===Ae||void 0===Ae||null===(ae=Ae.ticket)||void 0===ae||null===(re=ae.data)||void 0===re?void 0:re.state.punched)&&0===oe?"MINTED":(null===Ne||void 0===Ne?void 0:Ne.state.isSoldOut)?"SOLD OUT":fe?Object(K.jsx)(j.a,{}):"MINT"})})})]}):Object(K.jsxs)(G,{children:["Connect"," ",[s.Phase1].includes(mt)?"to bid":"to see status"]}),Object(K.jsxs)(L.a,{container:!0,justifyContent:"space-between",color:"textSecondary",children:[" ",Object(K.jsx)(k.a,{component:"button",variant:"body2",color:"textSecondary",align:"left",onClick:function(){Ie(!0)},children:"How this game works"})]}),Object(K.jsx)(R.a,{open:Ue,onClose:function(){return qe(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:Object(K.jsx)(D.a,{style:{padding:24},children:"During Fair3d Game phases, or if you are a winner, or if this website is not configured to be a fair launch but simply a candy machine, refunds are disallowed."})}),Object(K.jsx)(R.a,{open:He,onClose:function(){Ge(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:Object(K.jsx)(D.a,{style:{padding:24},children:Object(K.jsxs)("div",{children:[Object(K.jsx)("h1",{children:"Show Fair Launch + Show Lottery"}),Object(K.jsx)("p",{children:"Anyone at any time can run these commands for transparency of the game..."}),Xe,et]})})}),Object(K.jsxs)(R.a,{open:De,onClose:function(){return Ie(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:[Object(K.jsxs)(_.a,{disableTypography:!0,style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(K.jsx)(k.a,{component:"button",variant:"h6",color:"textSecondary",onClick:function(){Ie(!0)},children:"How to win"}),Object(K.jsx)(x.a,{"aria-label":"close",className:X.closeButton,onClick:function(){return Ie(!1)},children:Object(K.jsx)(F.a,{})})]}),Object(K.jsxs)(D.a,{children:[Object(K.jsx)(P.a,{variant:"h6",children:"Phase 1 - The Game:"}),Object(K.jsx)(P.a,{gutterBottom:!0,color:"textSecondary",children:"Every time someone new bids the price increases and the timer resets. Dev takes 1% of every bid, fuckboi takes 1% for putting up $, which doesn't get to see treasurypot. That new highest bidder becomes the Authority. Anyone at any phase can check the code on dunncreativess/fair3d, or run the show command on the cli. Metaplex team can assist you."}),Object(K.jsx)(P.a,{variant:"h6",children:"Phase 2 - Grace period:"}),Object(K.jsx)(P.a,{gutterBottom:!0,color:"textSecondary",children:"You can optionally pay the median bid in order to qualify for a runner up ticket."}),Object(K.jsx)(P.a,{variant:"h6",children:"Phase 3 - The Lottery:"}),Object(K.jsx)(P.a,{gutterBottom:!0,color:"textSecondary",children:"If you get a ticket, the Authority must conduct a lottery. The Metaplex team can assist the Authority. There are 10% of the total unique addresses bidding as winning tickets, +1 for good luck :)"}),Object(K.jsx)(P.a,{variant:"h6",children:"Phase 4 - The Candy Machine:"}),Object(K.jsx)(P.a,{gutterBottom:!0,color:"textSecondary",children:"Winners of lottery share 10% treasurypot when you punch your ticket. You also get an NFT. The Authority can punch everyones tickets for them. When withdrawing, the Authority gets what's left of the treasurypot - 90%."}),Object(K.jsx)(P.a,{variant:"h6",children:"Wat?"}),Object(K.jsx)(P.a,{gutterBottom:!0,color:"textSecondary",children:"If 500 bidders means 51 runner up tickets. The final top bidder wins 90% of the treasurypot. Anyone who bid over the median or who opts into paying the median bid gets a chance at one of those 51 winning runner up tickets, and those 50 winning tickets share 10% pot."}),Object(K.jsx)(P.a,{variant:"h6",children:"Tips? Strategy? Nash Tables?"}),Object(K.jsxs)(P.a,{gutterBottom:!0,color:"textSecondary",children:["All in all it's not what @redacted_j had in mind. At all. ",Object(K.jsx)("br",{}),"It's probably better to bid more sooner. More than once. If your goal is 1st prize (which it probably should be). You can now update your existing bids... By outpricing everyone else taking it seriously, you'd ensure the thing concludes before many other ppl out there know about it. That said, doing it from more than 1 address would increase your chances at getting either a winning ticket (which would get you a shiny Nft you'll be able to exchange for a new winning bid instead of sol in the next game) or a losing ticket (which you'll be able to exchange for a bid just over the median in the next game) You need to outgreed the consensus greed before the pool contributing to consensus includes greedier parties.",Object(K.jsx)("br",{})," Bidding more earlier from more addresses:",Object(K.jsx)("br",{})," 1. Ensures you'll probably priceout everyone easier than letting the 24hr timer nearly conclude over and over, as there will absolutely be more parties interested in pricing out everyone else as time elapses.",Object(K.jsx)("br",{})," 2. If your bids from any address are over the median by conclusion 2nd phase, they can punch to receive a ticket.  This ticket gives you a chance at sharing the 2nd place prize pool.",Object(K.jsx)("br",{})," 3. Any ticket can be used in the next game instead of sol to enter a bid at median. These can then be manually increased incrementally to ensure another ticket, and chance at 2nd place prize, or maximally to become new highest bidder on that 2nd game - for a fraction of the cost in either case.",Object(K.jsx)("br",{})," 4. If your ticket wine that games draw, when punching you'll get an NFT from the candy machine. In the following game, winning nfts can be exchanged for a new top bid instead of paying sol.",Object(K.jsx)("br",{})," 5. Because the following game will absolutely have more interest than the previous games, the won nfts will always have more value than what it probably cost to acquire them. Losing tickets may have some value more or less... This depends entirely on when these things are redeemed.",Object(K.jsx)("br",{})," 6. Moreover either of these things can be traded on secondary.",Object(K.jsx)("br",{}),Object(K.jsx)("br",{})," In short: bidding more from more addresses as early as is feasible almost definitely ensures free bids, as well as significantly increasing chances at either pot.",Object(K.jsx)("br",{})," ",Object(K.jsx)("br",{})," Not financial advice. Risk only what you can afford to lose.",Object(K.jsx)("br",{})," ",Object(K.jsx)("br",{})," If you're among the subset of people that would rather see the timer almost expire then bid again - that's actually ok, too. The system needs you to thrive."]})]})]})]})})}),Ae&&Object(K.jsx)(v.a,{maxWidth:"sm",style:{position:"relative",marginTop:10},children:Object(K.jsx)("div",{style:{marginLeft:50},children:Object(K.jsxs)(L.a,{container:!0,direction:"row",wrap:"nowrap",children:[Object(K.jsxs)(L.a,{container:!0,md:4,direction:"column",children:[Object(K.jsx)(P.a,{variant:"body2",color:"textSecondary",children:"1st Prize"}),Object(K.jsxs)(P.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:["\u25ce"," ",H.c.format((.9*(null===Ae||void 0===Ae?void 0:Ae.treasury)||0)/w.LAMPORTS_PER_SOL)]})]}),Object(K.jsxs)(L.a,{container:!0,md:4,direction:"column",children:[Object(K.jsx)(P.a,{variant:"body2",color:"textSecondary",children:"Top Bid"}),Object(K.jsxs)(P.a,{color:"textPrimary",style:{fontWeight:"bold"},children:["\u25ce"," ",H.c.format((Ae.state.currentHighest||0)/w.LAMPORTS_PER_SOL)]})]}),Object(K.jsxs)(L.a,{container:!0,md:4,direction:"column",children:[Object(K.jsx)(P.a,{variant:"body2",color:"textSecondary",children:"2nd Prizes"}),Object(K.jsxs)(P.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:["\u25ce"," ",H.c.format((.1*(null===Ae||void 0===Ae?void 0:Ae.treasury)||0)/w.LAMPORTS_PER_SOL/ct)]})]}),Object(K.jsxs)(L.a,{container:!0,md:4,direction:"column",children:[Object(K.jsx)(P.a,{variant:"body2",color:"textSecondary",children:"2nd Bids"}),Object(K.jsxs)(P.a,{color:"textPrimary",style:{fontWeight:"bold"},children:[">\u25ce ",H.c.format(st)]})]}),Object(K.jsxs)(L.a,{container:!0,md:4,direction:"column",children:[Object(K.jsx)(P.a,{variant:"body2",color:"textSecondary",children:"# 2nd"}),Object(K.jsx)(P.a,{color:"textPrimary",style:{fontWeight:"bold"},children:ct})]})]})})}),Object(K.jsx)(O.a,{open:Me.open,autoHideDuration:6e3,onClose:function(){return Te(Object(d.a)(Object(d.a)({},Me),{},{open:!1}))},children:Object(K.jsx)(W.a,{onClose:function(){return Te(Object(d.a)(Object(d.a)({},Me),{},{open:!1}))},severity:Me.severity,children:Me.message})}),Object(K.jsx)("br",{}),Object(K.jsx)(P.a,{children:Object(K.jsx)(S.b,{sourceType:"profile",screenName:"fair3d_me",options:{textSize:1,height:400}})})]})})},ne=n(28),ae=n(237),re=n(124),ie=n(785),se=n(494),oe=c.a.createContext(null),ce=function(e){var t=e.children,n=void 0===t?null:t,a=Object(o.useRef)(),r=Object(o.useRef)(),i=Object(o.useMemo)((function(){return function(){var e;r.current&&a.current&&(a.current.style.visibility="visible",null===(e=r.current({particleCount:400,spread:160,origin:{y:.3}}))||void 0===e||e.finally((function(){a.current&&(a.current.style.visibility="hidden")})))}}),[]);Object(o.useEffect)((function(){a.current&&!r.current&&(a.current.style.visibility="hidden",r.current=se.a.create(a.current,{resize:!0,useWorker:!0}))}),[]);return Object(K.jsxs)(oe.Provider,{value:{dropConfetti:i},children:[Object(K.jsx)("canvas",{ref:a,style:{width:"100vw",height:"100vh",position:"absolute",zIndex:1,top:0,left:0}}),n]})},ue=Object(re.b)({palette:{type:"dark"}}),le=new ne.e.PublicKey("CKdk5rxrBo73J3D6jCk8XDgx4b5kojcmu7KvfWFaufKF"),de="mainnet-beta",me=Object(w.clusterApiUrl)(de),pe=new ne.e.Connection(me),he=parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CANDY_MACHINE_ID:"",REACT_APP_SOLANA_NETWORK:"mainnet-beta",REACT_APP_SOLANA_RPC_HOST:"https://api.mainnet-beta.solana.com",REACT_APP_FAIR_LAUNCH_ID:"CKdk5rxrBo73J3D6jCk8XDgx4b5kojcmu7KvfWFaufKF"}).REACT_APP_CANDY_START_DATE,10),be=function(){var e=Object(o.useMemo)((function(){return Object(w.clusterApiUrl)(de)}),[]),t=Object(o.useMemo)((function(){return[Object(ae.getPhantomWallet)(),Object(ae.getSolflareWallet)(),Object(ae.getSolletWallet)()]}),[]);return Object(K.jsx)(ie.a,{theme:ue,children:Object(K.jsx)(U.ConnectionProvider,{endpoint:e,children:Object(K.jsx)(U.WalletProvider,{wallets:t,autoConnect:!0,children:Object(K.jsx)(q.WalletDialogProvider,{children:Object(K.jsx)(ce,{children:Object(K.jsx)(te,{candyMachineId:undefined,fairLaunchId:le,connection:pe,startDate:he,txTimeout:3e4})})})})})})},fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,801)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};l.a.render(Object(K.jsx)(c.a.StrictMode,{children:Object(K.jsx)(be,{})}),document.getElementById("root")),fe()}},[[767,1,2]]]);
//# sourceMappingURL=main.1f28ed8c.chunk.js.map